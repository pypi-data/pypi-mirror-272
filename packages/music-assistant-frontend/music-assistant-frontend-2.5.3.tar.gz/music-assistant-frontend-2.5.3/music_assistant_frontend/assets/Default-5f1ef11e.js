import{_ as mt,g as pt,V as vt}from"./DrawerNavigation.vue_vue_type_style_index_0_scoped_cdf8fb82_lang-a481a8ea.js";import{_ as F}from"./_plugin-vue_export-helper-c27b6911.js";import{M as fe,i as he,a as Me,_ as yt,g as Te}from"./helpers-4d7c5bf6.js";import{_ as ce,C as _t}from"./Container-fdf4c1f5.js";import{d as I,r as x,o as be,a as Fe,b as C,M as R,P as ze,c as r,e as g,w as v,f as u,u as e,g as _,h as A,F as D,$ as le,i as f,t as k,j as w,s as t,p as Re,k as We,l as se,m as re,n as ft,K as ht,q as bt,v as ge,x as qe,y as G,z as Q,A as gt,B as kt,C as He,D as K,E as $,G as z,H as L,I as de,J as U,L as Pt,N as pe,O as Y,Q as B,R as ve,S as X,T as N,U as Ct,V as ke,W as ie,X as Ee,Y as Z,Z as Vt,_ as wt,a0 as $t,a1 as Qt,a2 as Ne,a3 as De,a4 as Ue,a5 as It,a6 as xt,a7 as Oe,a8 as St,a9 as Bt,aa as Tt}from"./index-2dd0c7d2.js";import{e as Le}from"./eventbus-d154090d.js";import{T as zt}from"./Toolbar-1720c469.js";import{V as ee,a as te,u as Ge}from"./VList-d110868a.js";import{V as Pe,a as Nt}from"./VCard-907b4685.js";import{V as je}from"./VDialog-e187bf14.js";import{V as O,m as ne,a as Dt,b as Ce,u as Lt,c as ue,d as Ke,e as At,f as Ye,g as Je,h as Mt,i as Xe,j as Ze,k as Ft,l as et,n as tt,o as Rt,p as Wt,q as S,r as qt,s as Ht,t as Et,v as Ut}from"./VListItem-cb387084.js";import{_ as Ot}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_7aadaa8c_lang-7ff19a96.js";import{V as Gt}from"./VSnackbar-6950ff68.js";import{u as jt,m as lt,a as it,b as Kt,c as Yt}from"./layout-42d7f450.js";import{V as Ae,a as me}from"./VTabs-3cd7b169.js";import{V as Ve,a as Jt}from"./VMenu-97c1c955.js";import{V as ot,a as Xt,b as Zt,c as el,d as tl}from"./VExpansionPanels-e08ac037.js";import{B as M}from"./Button-69b906cf.js";import{V as at}from"./VBadge-91055b8b.js";import{L as ll}from"./ListItem-87435fbb.js";import{V as il}from"./VToolbar-6047eebf.js";import{V as ol}from"./VLabel-1f522f96.js";import{V as al}from"./VCardText-0ed41581.js";/* empty css              */const sl=F(mt,[["__scopeId","data-v-cdf8fb82"]]),we=a=>(Re("data-v-d3dbeb83"),a=a(),We(),a),rl=we(()=>f("br",null,null,-1)),nl={class:"media-thumb"},ul=we(()=>f("div",{style:{height:"30px"}},null,-1)),cl=we(()=>f("div",{style:{height:"30px"}},null,-1)),dl={style:{"margin-left":"-10px","padding-right":"5px"}},ml=I({__name:"AddToPlaylistDialog",setup(a){const l=x(!1),m=x([]),o=x([]),s=x(),i=x([]);be(()=>{Le.on("playlistdialog",async b=>{l.value=!0,i.value=b.items,s.value=b.parentItem,await n()}),Fe(()=>{Le.off("playlistdialog")})});const n=async function(){m.value=[],o.value=[];const b=await C.getLibraryPlaylists(),c=i.value.length?i.value[0]:void 0;for(const d of b.items){if(!d.provider_mappings.filter(V=>V.available).length||!d.is_editable||s.value&&s.value.media_type===R.PLAYLIST&&d.item_id===s.value.item_id)continue;const P=C.providers[d.provider_mappings[0].provider_instance];(P.domain=="builtin"||P.is_streaming_provider||c!=null&&c.provider_mappings.filter(V=>V.provider_instance==P.instance_id).length)&&m.value.push(d)}for(const d of Object.values(C.providers))d.supported_features.includes(ze.PLAYLIST_CREATE)&&d.supported_features.includes(ze.PLAYLIST_TRACKS_EDIT)&&(d.domain=="builtin"||d.is_streaming_provider||c!=null&&c.provider_mappings.filter(P=>P.provider_instance==d.instance_id).length)&&o.value.push(d.instance_id)},y=function(b){if(i.value[0].media_type===R.TRACK)C.addPlaylistTracks(b.item_id,i.value.map(d=>d.uri));else if(i.value[0].media_type===R.ALBUM){var c=[];C.getAlbumTracks(i.value[0].item_id,i.value[0].provider).then(d=>{c=d,C.addPlaylistTracks(b.item_id,c.map(P=>P.uri))})}p()},h=async function(b){const c=prompt(le("new_playlist_name"));if(!c)return;const d=await C.createPlaylist(c,b);y(d)},p=function(){l.value=!1};return(b,c)=>(r(),g(je,{modelValue:l.value,"onUpdate:modelValue":[c[0]||(c[0]=d=>l.value=d),c[1]||(c[1]=d=>{e(t).dialogActive=d})],fullscreen:"",transition:"dialog-bottom-transition"},{default:v(()=>[u(Pe,null,{default:v(()=>[u(zt,{icon:"mdi-playlist-plus",title:e(le)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:p}]},null,8,["title","menu-items"]),u(ee),rl,u(te,null,{default:v(()=>[(r(!0),_(D,null,A(m.value,d=>(r(),_("div",{key:d.item_id},[u(O,{onClick:P=>y(d)},{prepend:v(()=>[f("div",nl,[u(fe,{item:d,size:50},null,8,["item"])])]),title:v(()=>[f("div",null,k(d.name),1)]),subtitle:v(()=>[f("div",null,k(d.owner),1)]),append:v(()=>[d.provider_mappings?(r(),g(ce,{key:0,domain:d.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):w("",!0)]),_:2},1032,["onClick"])]))),128)),ul,u(ee),cl,(r(!0),_(D,null,A(o.value,d=>(r(),_("div",{key:d},[u(O,{onClick:P=>h(d)},{prepend:v(()=>[f("div",dl,[u(ce,{domain:e(C).providers[d].domain,size:50},null,8,["domain"])])]),title:v(()=>[f("div",null,k(e(le)("new_playlist")),1)]),subtitle:v(()=>[f("div",null,k(e(le)("create_playlist_on",[e(C).providers[d].name])),1)]),append:v(()=>[u(ce,{domain:e(C).providers[d].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}});const pl=F(ml,[["__scopeId","data-v-d3dbeb83"]]),vl=F(Ot,[["__scopeId","data-v-7aadaa8c"]]);const yl=se({scrollable:Boolean,...ne(),...Dt(),...Ce({tag:"main"})},"VMain"),_l=re()({name:"VMain",props:yl(),setup(a,l){let{slots:m}=l;const{dimensionStyles:o}=Lt(a),{mainStyles:s,layoutIsReady:i}=jt(),{ssrBootStyles:n}=Ge();return ue(()=>u(a.tag,{class:["v-main",{"v-main--scrollable":a.scrollable},a.class],style:[s.value,n.value,o.value,a.style]},{default:()=>{var y,h;return[a.scrollable?u("div",{class:"v-main__scroller"},[(y=m.default)==null?void 0:y.call(m)]):(h=m.default)==null?void 0:h.call(m)]}})),i}}),fl=I({__name:"View",setup(a){return(l,m)=>{const o=ft("router-view");return r(),g(_l,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:v(()=>{var s,i,n;return[e(t).navigationMenuStyle=="vertical"?(r(),g(sl,{key:0})):w("",!0),u(o,null,{default:v(({Component:y})=>[(r(),g(ht,{max:5,include:["HomeView","Artists","Albums","Tracks","Playlists","Search","Browse"]},[(r(),g(bt(y)))],1024))]),_:1}),u(pl),u(vl),u(Gt,{"model-value":e(t).activeAlert!==void 0,color:((s=e(t).activeAlert)==null?void 0:s.type)||"grey",text:(i=e(t).activeAlert)==null?void 0:i.message,"close-on-content-click":"",position:"sticky",timeout:(n=e(t).activeAlert)!=null&&n.persistent?-1:5e3,"onUpdate:modelValue":m[0]||(m[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}});const hl=se({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:a=>!a||["horizontal","shift"].includes(a)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Ke(),...ne(),...At(),...Ye(),...Je(),...lt({name:"bottom-navigation"}),...Ce({tag:"header"}),...Mt({selectedClass:"v-btn--selected"}),...ge()},"VBottomNavigation"),bl=re()({name:"VBottomNavigation",props:hl(),emits:{"update:active":a=>!0,"update:modelValue":a=>!0},setup(a,l){let{slots:m}=l;const{themeClasses:o}=qe(),{borderClasses:s}=Xe(a),{backgroundColorClasses:i,backgroundColorStyles:n}=Ze(G(a,"bgColor")),{densityClasses:y}=Ft(a),{elevationClasses:h}=et(a),{roundedClasses:p}=tt(a),{ssrBootStyles:b}=Ge(),c=Q(()=>Number(a.height)-(a.density==="comfortable"?8:0)-(a.density==="compact"?16:0)),d=gt(a,"active",a.active),{layoutItemStyles:P,layoutIsReady:V}=it({id:a.name,order:Q(()=>parseInt(a.order,10)),position:Q(()=>"bottom"),layoutSize:Q(()=>d.value?c.value:0),elementSize:c,active:d,absolute:G(a,"absolute")});return Rt(a,Wt),kt({VBtn:{baseColor:G(a,"baseColor"),color:G(a,"color"),density:G(a,"density"),stacked:Q(()=>a.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ue(()=>u(a.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":d.value,"v-bottom-navigation--grow":a.grow,"v-bottom-navigation--shift":a.mode==="shift"},o.value,i.value,s.value,y.value,h.value,p.value,a.class],style:[n.value,P.value,{height:He(c.value)},b.value,a.style]},{default:()=>[m.default&&u("div",{class:"v-bottom-navigation__content"},[m.default()])]})),V}}),gl={class:"menuButton"},kl={class:"menuButton"},Pl={class:"menuButton"},Cl=I({__name:"BottomNavigation",props:{height:{}},setup(a){const l=pt(),m=Q(()=>{for(const o of l)if(K.currentRoute.value.path.startsWith(o.path))return!$("tablet")&&o.isLibraryNode?"library":o.label;return""});return(o,s)=>(r(),g(bl,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"}},{default:v(()=>[e($)("tablet")?(r(),g(Ae,{key:0,stacked:"",grow:"","show-arrows":!1,"model-value":m.value,nav:"",color:"accent","center-active":""},{default:v(()=>[(r(!0),_(D,null,A(e(l),i=>(r(),g(me,{key:i.label,to:i.path,value:i.label},{default:v(()=>[u(S,{size:"xx-large"},{default:v(()=>[L(k(i.icon),1)]),_:2},1024),f("span",gl,k(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128))]),_:1},8,["model-value"])):(r(),g(Ae,{key:1,stacked:"",grow:"","show-arrows":!1,"model-value":m.value,nav:"",color:"accent"},{default:v(()=>[(r(!0),_(D,null,A(e(l).filter(i=>!i.isLibraryNode),i=>(r(),g(me,{key:i.label,to:i.path,value:i.label},{default:v(()=>[u(S,{size:"xx-large"},{default:v(()=>[L(k(i.icon),1)]),_:2},1024),f("span",kl,k(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128)),u(Ve,null,{activator:v(({props:i})=>[u(me,z({key:"library"},i,{value:"library"}),{default:v(()=>[u(S,{size:"xx-large"},{default:v(()=>[L("mdi-bookshelf")]),_:1}),f("span",Pl,k(o.$t("library")),1)]),_:2},1040)]),default:v(()=>[u(te,null,{default:v(()=>[(r(!0),_(D,null,A(e(l).filter(i=>i.isLibraryNode),i=>(r(),g(O,{key:i.label,title:o.$t(i.label),"prepend-icon":i.icon,to:i.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["height"]))}});const Vl={style:{width:"100%"}},wl={key:0,style:{display:"flex",flex:"1 1 auto","align-items":"center"}},$l={style:{"z-index":"1"},class:"text-caption"},Ql={key:1,style:{width:"100%","padding-bottom":"0px"}},ye=I({__name:"PlayerTimeline",props:{isProgressBar:{type:Boolean,default:!1},color:{default:"accent"}},setup(a){const l=a,m=x(!1),o=x(!0),s=x(!1),i=x(0),n=x(0),y=Q(()=>t.curQueueItem?m.value?`-${de(t.curQueueItem.duration-p.value)}`:`${de(p.value)}`:"0:00"),h=Q(()=>{if(!t.curQueueItem)return"0:00";const P=t.curQueueItem.duration;return de(P)}),p=Q(()=>s.value?(n.value=i.value,i.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0);U(p,P=>{s.value||(i.value=P)});const b=function(){s.value=!0},c=()=>{s.value=!1,d(n.value)},d=P=>{var V;s.value||C.queueCommandSeek(((V=t.activePlayerQueue)==null?void 0:V.queue_id)||"",Math.round(P))};return(P,V)=>{var W,q;return r(),_("div",Vl,[e(t).activePlayerQueue&&!P.isProgressBar?(r(),_("div",wl,[f("div",{class:"text-caption",style:{cursor:"pointer","z-index":"1"},onClick:V[0]||(V[0]=T=>m.value?m.value=!1:m.value=!0)},k(y.value),1),u(ot,{modelValue:i.value,"onUpdate:modelValue":V[1]||(V[1]=T=>i.value=T),disabled:!e(t).curQueueItem||((W=e(t).curQueueItem.media_item)==null?void 0:W.media_type)!=e(R).TRACK,color:l.color,style:{width:"100%"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration,"hide-details":"","track-size":2,"thumb-size":o.value?0:10,onTouchstart:V[2]||(V[2]=T=>o.value=!1),onTouchend:V[3]||(V[3]=T=>o.value=!0),onMouseenter:V[4]||(V[4]=T=>o.value=!1),onMouseleave:V[5]||(V[5]=T=>o.value=!0),onStart:b,onEnd:c},null,8,["modelValue","disabled","color","max","thumb-size"]),f("div",$l,k(h.value),1)])):e(t).activePlayerQueue&&P.isProgressBar?(r(),_("div",Ql,[u(qt,{modelValue:i.value,"onUpdate:modelValue":V[6]||(V[6]=T=>i.value=T),disabled:!e(t).activePlayerQueue||!e(t).curQueueItem||((q=e(t).activePlayerQueue)==null?void 0:q.items)==0,height:"70",color:e(Pt)(l.color,.15),"bg-color":l.color,"bg-opacity":1,style:{position:"absolute","border-radius":"10px"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration},null,8,["modelValue","disabled","color","bg-color","max"])])):w("",!0)])}}}),Il=I({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean}},setup(a){const l=a,m=()=>{if(o.value){const i=o.value.offsetWidth,n=o.value.offsetHeight,y=Math.min(i,n);s.value.$el.style.fontSize=`${y}px`}},o=x(),s=x();return be(()=>{m(),window.addEventListener("resize",m)}),Fe(()=>{window.removeEventListener("resize",m)}),(i,n)=>(r(),_("div",{ref_key:"responsiveIconHolder",ref:o,class:Y([l.type=="btn"?"responsive-icon-holder-btn":"responsive-icon-holder",{disabled:i.disabled}]),style:B({width:l.staticWidth?l.staticWidth:l.width,height:l.staticWidth?l.staticWidth:l.height,maxHeight:l.staticHeight?l.staticHeight:l.maxHeight,maxWidth:l.staticWidth?l.staticWidth:l.maxWidth,minHeight:l.staticHeight?l.staticHeight:l.minHeight,minWidth:l.staticWidth?l.staticWidth:l.minWidth})},[i.type==="icon"?(r(),g(S,{key:0,ref_key:"responsiveIcon",ref:s,class:"responsive-icon",color:i.color?i.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null},pe({_:2},[A(i.$slots,(y,h)=>({name:h,fn:v(()=>[ve(i.$slots,h,{},void 0,!0)])}))]),1032,["color","icon","width","height"])):i.type==="btn"?(r(),g(S,{key:1,ref_key:"responsiveIcon",ref:s,class:"responsive-icon",style:{cursor:"pointer"},color:i.color?i.color:"",icon:l.icon?l.icon:"mdi-check",width:l.staticWidth?l.staticWidth:null,height:l.staticHeight?l.staticHeight:null,disabled:i.disabled},pe({_:2},[A(i.$slots,(y,h)=>({name:h,fn:v(()=>[ve(i.$slots,h,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):w("",!0)],6))}});const j=F(Il,[["__scopeId","data-v-5ed57264"]]),st=I({__name:"RepeatBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a;return(m,o)=>{var s,i,n,y,h,p,b,c,d,P;return l.isVisible?(r(),g(j,z({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((s=e(t).activePlayerQueue)!=null&&s.active)||((i=e(t).activePlayerQueue)==null?void 0:i.items)==0,color:e(X)((n=l.icon)==null?void 0:n.color,[[((y=e(t).activePlayerQueue)==null?void 0:y.repeat_mode)==e(N).OFF,null],[((h=e(t).activePlayerQueue)==null?void 0:h.repeat_mode)==e(N).ALL,"secondary"],[((p=e(t).activePlayerQueue)==null?void 0:p.repeat_mode)==e(N).ONE,"secondary"]]),icon:e(X)((b=l.icon)==null?void 0:b.icon,[[((c=e(t).activePlayerQueue)==null?void 0:c.repeat_mode)==e(N).OFF,"mdi-repeat-off"],[((d=e(t).activePlayerQueue)==null?void 0:d.repeat_mode)==e(N).ALL,"mdi-repeat"],[((P=e(t).activePlayerQueue)==null?void 0:P.repeat_mode)==e(N).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:o[0]||(o[0]=V=>{var W,q,T,J;return e(C).queueCommandRepeat(((W=e(t).activePlayerQueue)==null?void 0:W.queue_id)||"",e(X)(null,[[((q=e(t).activePlayerQueue)==null?void 0:q.repeat_mode)==e(N).OFF,e(N).ONE],[((T=e(t).activePlayerQueue)==null?void 0:T.repeat_mode)==e(N).ALL,e(N).OFF],[((J=e(t).activePlayerQueue)==null?void 0:J.repeat_mode)==e(N).ONE,e(N).ALL]]))})}),null,16,["disabled","color","icon"])):w("",!0)}}}),rt=I({__name:"ShuffleBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a;return(m,o)=>{var s,i,n,y,h,p,b;return l.isVisible?(r(),g(j,z({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((s=e(t).activePlayerQueue)!=null&&s.active)||((i=e(t).activePlayerQueue)==null?void 0:i.items)==0,color:e(X)((n=l.icon)==null?void 0:n.color,[[(y=e(t).activePlayerQueue)==null?void 0:y.shuffle_enabled,"secondary",""]]),icon:e(X)((h=l.icon)==null?void 0:h.icon,[[(p=e(t).activePlayerQueue)==null?void 0:p.shuffle_enabled,"mdi-shuffle"],[((b=e(t).activePlayerQueue)==null?void 0:b.shuffle_enabled)==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:o[0]||(o[0]=c=>{var d,P;return e(C).queueCommandShuffle(((d=e(t).activePlayerQueue)==null?void 0:d.queue_id)||"",!((P=e(t).activePlayerQueue)!=null&&P.shuffle_enabled))})}),null,16,["disabled","color","icon"])):w("",!0)}}}),nt=I({__name:"PlayBtn",props:{isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a;return(m,o)=>{var s,i,n,y,h,p;return e(t).activePlayerQueue&&((s=e(t).activePlayerQueue)!=null&&s.active)&&l.isVisible?(r(),g(j,z({key:0},l.icon,{disabled:e(t).activePlayerQueue&&!((i=e(t).activePlayerQueue)!=null&&i.active)&&((n=e(t).activePlayerQueue)==null?void 0:n.items)==0,icon:((y=e(t).activePlayerQueue)==null?void 0:y.state)=="playing"?l.withCircle?"mdi-pause-circle":"mdi-pause":l.withCircle?"mdi-play-circle":"mdi-play",type:"btn",onClick:o[0]||(o[0]=b=>e(C).queueCommandPlayPause(e(t).activePlayerQueue.queue_id))}),null,16,["disabled","icon"])):((h=e(t).selectedPlayer)==null?void 0:h.state)==e(Ct).PLAYING&&l.isVisible?(r(),g(j,z({key:1},l.icon,{icon:"mdi-stop",type:"btn",onClick:o[1]||(o[1]=b=>e(C).queueCommandStop(e(t).selectedPlayer.player_id))}),null,16)):l.isVisible?(r(),g(j,z({key:2},l.icon,{disabled:!e(t).activePlayerQueue||((p=e(t).activePlayerQueue)==null?void 0:p.items)==0,icon:l.withCircle?"mdi-play-circle":"mdi-play",type:"btn",onClick:o[2]||(o[2]=b=>{var c;return e(C).queueCommandPlay(((c=e(t).activePlayerQueue)==null?void 0:c.queue_id)||e(t).selectedPlayer.player_id)})}),null,16,["disabled","icon"])):w("",!0)}}}),ut=I({__name:"PreviousBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a;return(m,o)=>{var s,i;return l.isVisible?(r(),g(j,z({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((s=e(t).activePlayerQueue)!=null&&s.active)||((i=e(t).activePlayerQueue)==null?void 0:i.items)==0,icon:"mdi-skip-previous-outline",type:"btn",onClick:o[0]||(o[0]=n=>e(C).queueCommandPrevious(e(t).activePlayerQueue.queue_id))}),null,16,["disabled"])):w("",!0)}}}),ct=I({__name:"NextBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(a){const l=a;return(m,o)=>{var s,i;return l.isVisible?(r(),g(j,z({key:0},l.icon,{disabled:!e(t).activePlayerQueue||!((s=e(t).activePlayerQueue)!=null&&s.active)||((i=e(t).activePlayerQueue)==null?void 0:i.items)==0,icon:"mdi-skip-next-outline",type:"btn",onClick:o[0]||(o[0]=n=>e(C).queueCommandNext(e(t).activePlayerQueue.queue_id))}),null,16,["disabled"])):w("",!0)}}}),xl={key:0,style:{display:"inline-flex"}},Sl={key:0,class:"player-controls-elements"},Bl={key:1,class:"player-controls-elements"},Tl={key:2},zl={key:3,class:"player-controls-elements"},Nl={key:4,class:"player-controls-elements"},ae=I({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(a){const l=a;return(m,o)=>{var s,i,n,y,h;return l.visibleComponents?(r(),_("div",xl,[l.visibleComponents&&((s=l.visibleComponents.shuffle)!=null&&s.isVisible)?(r(),_("div",Sl,[u(rt,{class:"media-controls-item",icon:l.visibleComponents.shuffle.icon},null,8,["icon"])])):w("",!0),l.visibleComponents&&((i=l.visibleComponents.previous)!=null&&i.isVisible)?(r(),_("div",Bl,[u(ut,{class:"media-controls-item",icon:l.visibleComponents.previous.icon},null,8,["icon"])])):w("",!0),l.visibleComponents&&((n=l.visibleComponents.play)!=null&&n.isVisible)?(r(),_("div",Tl,[u(nt,{class:"media-controls-item","with-circle":l.visibleComponents.play.withCircle,icon:l.visibleComponents.play.icon},null,8,["with-circle","icon"])])):w("",!0),l.visibleComponents&&((y=l.visibleComponents.next)!=null&&y.isVisible)?(r(),_("div",zl,[u(ct,{icon:l.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["icon"])])):w("",!0),l.visibleComponents&&((h=l.visibleComponents.repeat)!=null&&h.isVisible)?(r(),_("div",Nl,[u(st,{icon:l.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["icon"])])):w("",!0)])):w("",!0)}}});const Dl=I({__name:"QueueBtn",props:{color:{}},setup(a){const l=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(m,o)=>(r(),g(M,{variant:"icon",icon:"mdi-playlist-play",color:m.color?m.color:"",onClick:l},null,8,["color"]))}}),Ll={key:2,class:"line-clamp-1 no_transform"},Al=I({__name:"SpeakerBtn",props:{color:{}},setup(a){const l=a,m=Q(()=>{var s;if(!t.selectedPlayer)return 0;let o=0;for(const i of t.selectedPlayer.group_childs){const n=(s=C)==null?void 0:s.players[i];n&&n.available&&n.powered&&o++}return o});return(o,s)=>(r(),g(M,{variant:"icon",ripple:!1,icon:!e($)("bp6"),onClick:s[0]||(s[0]=i=>e(t).showPlayersMenu=!0)},{default:v(()=>{var i,n;return[(i=e(t).selectedPlayer)!=null&&i.group_childs.length?(r(),g(at,{key:0,size:"small",content:m.value},{default:v(()=>[u(S,{color:l.color?o.color:"",size:24},{default:v(()=>[L("mdi-speaker-multiple")]),_:1},8,["color"])]),_:1},8,["content"])):(r(),g(S,{key:1,color:l.color?o.color:"",size:24},{default:v(()=>[L("mdi-speaker")]),_:1},8,["color"])),e(t).activePlayerQueue&&e($)("bp6")?(r(),_("span",Ll,k(e(ke)((n=e(t).activePlayerQueue)==null?void 0:n.display_name,e($)("bp7")?16:8)),1)):w("",!0)]}),_:1},8,["icon"]))}});const Ml={props:{width:String,height:String,style:String,isPowered:Boolean},emits:["update:model-value"],setup(a,l){const m=x(!0),o=Q(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:m.value?0:10,step:2,elevation:0,disabled:!a.isPowered,style:`width: ${a.width}; height:${a.height}; display: inline-grid; ${a.style}`})),s=Q(()=>({...o.value,...l}));return{isThumbHidden:m,playerVolumeProps:s,onWheel:({deltaY:n})=>{const y=s.value.step,h=l.attrs["model-value"],p=n<0?y:-y;l.emit("update:model-value",h+p)}}}};function Fl(a,l,m,o,s,i){return r(),g(ot,z(o.playerVolumeProps,{onTouchstart:l[0]||(l[0]=n=>o.isThumbHidden=!1),onTouchend:l[1]||(l[1]=n=>o.isThumbHidden=!0),onMouseenter:l[2]||(l[2]=n=>o.isThumbHidden=!1),onMouseleave:l[3]||(l[3]=n=>o.isThumbHidden=!0),onWheel:o.onWheel,"onUpdate:modelValue":l[4]||(l[4]=n=>a.$emit("update:model-value",n))}),pe({_:2},[A(a.$slots,(n,y)=>({name:y,fn:v(()=>[ve(a.$slots,y,{},void 0,!0)])}))]),1040,["onWheel"])}const _e=F(Ml,[["render",Fl],["__scopeId","data-v-a6e8aec7"]]),Rl={class:"text-center"},Wl={class:"text-caption"},ql={class:"text-center"},Hl={key:0,class:"text-caption"},El={key:1,class:"text-caption"},Ul={key:0,class:"syncbtn"},Ol={key:1,class:"syncbtn"},Gl=I({__name:"VolumeControl",props:{player:{}},setup(a){const l=function(o){var i;const s=[];o.type!=ie.GROUP&&o.type!=ie.SYNC_GROUP&&s.push(o);for(const n of o.group_childs){const y=(i=C)==null?void 0:i.players[n];y&&y.available&&!s.includes(y)&&s.push(y)}return s.sort((n,y)=>n.display_name.toUpperCase()>y.display_name.toUpperCase()?1:-1),s},m=function(o,s){o.type==ie.GROUP||o.type==ie.SYNC_GROUP||o.group_childs.length>0?C.playerCommandGroupPower(o.player_id,s):C.playerCommandPower(o.player_id,s)};return(o,s)=>(r(),g(te,{style:{overflow:"hidden"},lines:"two"},{default:v(()=>[o.player.group_childs.length>0?(r(),g(O,{key:0},{prepend:v(()=>[f("div",{style:B(o.player.powered?"opacity: 0.75":"opacity: 0.5")},[f("div",Rl,[u(M,{icon:"",style:{height:"25px !important"},onClick:s[0]||(s[0]=i=>m(o.player,!o.player.powered))},{default:v(()=>[u(S,{size:25,icon:o.player.volume_muted?"mdi-volume-off":"mdi-power"},null,8,["icon"])]),_:1}),f("div",Wl,k(o.player.group_volume),1)])],4)]),default:v(()=>[f("div",{class:"volumesliderrow",style:B(o.player.powered?"opacity: 0.75":"opacity: 0.5")},[f("h6",null,k(e(Ee)(o.player,27)),1),u(_e,{class:"vc-slider",width:"100%",color:"secondary","is-powered":o.player.powered,"model-value":Math.round(o.player.group_volume),"onUpdate:modelValue":s[1]||(s[1]=i=>e(C).playerCommandGroupVolume(o.player.player_id,i))},null,8,["is-powered","model-value"])],4)]),_:1})):w("",!0),o.player.group_childs.length>0?(r(),g(ee,{key:1,style:{"margin-top":"7px","margin-bottom":"7px"}})):w("",!0),(r(!0),_(D,null,A(l(o.player),i=>(r(),g(O,{key:i.player_id,style:B(i.powered?"opacity: 0.75":"opacity: 0.5")},{prepend:v(()=>[f("div",null,[f("div",ql,[u(M,{icon:"",style:{height:"25px !important"},onClick:n=>e(C).playerCommandPowerToggle(i.player_id)},{default:v(()=>[u(S,{size:25,icon:"mdi-power"})]),_:2},1032,["onClick"]),i.volume_muted?(r(),_("div",Hl,k(o.$t("muted")),1)):(r(),_("div",El,k(i.volume_level),1))])])]),default:v(()=>[f("div",{class:"volumesliderrow",style:B(i.powered?"opacity: 0.75":"opacity: 0.5")},[f("h6",null,k(e(ke)(i.display_name,27)),1),u(_e,{class:"vc-slider",width:"100%",color:"secondary","is-powered":i.powered,"model-value":Math.round(i.volume_level),"onUpdate:modelValue":n=>e(C).playerCommandVolumeSet(i.player_id,n)},null,8,["is-powered","model-value","onUpdate:modelValue"])],4)]),append:v(()=>[f("div",{style:B(i.powered?"opacity: 0.75":"opacity: 0.5")},[!i.synced_to&&i.can_sync_with.length&&Object.values(e(C).players).filter(n=>!n.synced_to&&n.can_sync_with.includes(i.player_id)).length>0?(r(),_("div",Ul,[u(Ve,{location:"bottom end",style:{"z-index":"999999"}},{activator:v(({props:n})=>[u(M,z({icon:"",ref_for:!0},n),{default:v(()=>[u(S,null,{default:v(()=>[L("mdi-link-variant")]),_:1})]),_:2},1040)]),default:v(()=>[u(te,null,{default:v(()=>[u(Nt,null,{default:v(()=>[L(k(o.$t("sync_player_to")),1)]),_:1}),(r(!0),_(D,null,A(Object.values(e(C).players).filter(n=>!n.synced_to&&n.can_sync_with.includes(i.player_id)),n=>(r(),g(ll,{key:n.player_id,title:n.display_name,onClick:y=>e(C).playerCommandSync(i.player_id,n.player_id)},null,8,["title","onClick"]))),128)),u(ee)]),_:2},1024)]),_:2},1024)])):w("",!0),i.synced_to?(r(),_("div",Ol,[u(M,{icon:"",onClick:n=>e(C).playerCommandUnSync(i.player_id)},{default:v(()=>[u(S,null,{default:v(()=>[L("mdi-link-variant-off")]),_:1})]),_:2},1032,["onClick"])])):w("",!0)],4)]),_:2},1032,["style"]))),128))]),_:1}))}});const dt=F(Gl,[["__scopeId","data-v-902945d8"]]),jl={key:0},Kl={key:0},Yl={class:"text-caption"},Jl={key:1},Xl=I({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(a){const l=a,m=x(!1);return(o,s)=>l.isVisible&&e(t).selectedPlayer?(r(),_("div",jl,[u(Ve,{modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=i=>m.value=i),class:"volume-control-dialog","close-on-content-click":!1,scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:v(({props:i})=>{var n,y;return[e($)("bp5")||!o.responsiveVolumeSize?(r(),_("div",Kl,[u(_e,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(t).selectedPlayer.group_childs.length>0?Math.round(((n=e(t).selectedPlayer)==null?void 0:n.group_volume)||0):Math.round(((y=e(t).selectedPlayer)==null?void 0:y.volume_level)||0),"onUpdate:modelValue":s[0]||(s[0]=h=>{var p,b;return e(t).selectedPlayer.group_childs.length>0?e(C).playerCommandGroupVolume(((p=e(t).selectedPlayer)==null?void 0:p.player_id)||"",h):e(C).playerCommandVolumeSet(((b=e(t).selectedPlayer)==null?void 0:b.player_id)||"",h)})},{prepend:v(()=>[u(M,z({variant:"icon",size:"48",ripple:!1},{...i}),{default:v(()=>{var h,p;return[u(S,{color:l.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),f("div",Yl,k(e(t).selectedPlayer.group_childs.length>0?Math.round(((h=e(t).selectedPlayer)==null?void 0:h.group_volume)||0):Math.round(((p=e(t).selectedPlayer)==null?void 0:p.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(r(),_("div",Jl,[u(M,z({...i},{size:"48",variant:"icon"}),{default:v(()=>{var h,p;return[u(S,{color:l.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),f("div",{class:"text-caption",style:B({color:l.color?o.color:""})},k(e(t).selectedPlayer.group_childs.length>0?Math.round(((h=e(t).selectedPlayer)==null?void 0:h.group_volume)||0):Math.round(((p=e(t).selectedPlayer)==null?void 0:p.volume_level)||0)),5)]}),_:2},1040)]))]}),default:v(()=>[u(Pe,{"min-width":300},{default:v(()=>[u(te,{style:{overflow:"hidden"},lines:"two"},{default:v(()=>{var i,n,y;return[u(O,{density:"compact","two-line":"",title:(i=e(t).selectedPlayer)==null?void 0:i.display_name.substring(0,25),subtitle:(n=e(t).selectedPlayer)!=null&&n.powered?o.$t("state."+((y=e(t).selectedPlayer)==null?void 0:y.state)):o.$t("state.off")},{prepend:v(()=>[u(S,{size:"50",icon:e(t).selectedPlayer.icon,color:"primary"},null,8,["icon"])]),_:1},8,["title","subtitle"]),u(ee),e(t).selectedPlayer?(r(),g(dt,{key:0,player:e(t).selectedPlayer},null,8,["player"])):w("",!0)]}),_:1})]),_:1})]),_:1},8,["modelValue","scrim"])])):w("",!0)}});const Zl=F(Xl,[["__scopeId","data-v-2596bf36"]]),oe=I({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(a){const l=a;return(m,o)=>(r(),_(D,null,[l.player&&l.player.isVisible?(r(),g(Al,{key:0,color:l.player.color},null,8,["color"])):w("",!0),l.queue&&l.queue.isVisible?(r(),g(Dl,{key:1,color:l.queue.color},null,8,["color"])):w("",!0),l.volume&&l.volume.isVisible?(r(),g(Zl,{key:2,color:l.volume.color,"volume-size":l.volume.volumeSize,"responsive-volume-size":l.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):w("",!0)],64))}}),$e=a=>(Re("data-v-a80df3a9"),a=a(),We(),a),ei=$e(()=>f("div",{class:"fullscreen-media-space"},null,-1)),ti={class:"fullscreen-row-centered"},li={class:"fullscreen-row"},ii={key:0,class:"fullscreen-track-info"},oi={key:2},ai={key:1,class:"fullscreen-track-info-subtitle"},si={key:3,style:{cursor:"pointer"},class:"line-clamp-1"},ri=$e(()=>f("br",null,null,-1)),ni=$e(()=>f("br",null,null,-1)),ui={key:4,class:"fullscreen-track-info-subtitle"},ci={key:5,class:"fullscreen-track-info-subtitle"},di={key:6,class:"fullscreen-track-info-subtitle"},mi={class:"fullscreen-row",style:{margin:"0 10px"}};const pi={class:"fullscreen-row"},vi={key:1,class:"fullscreen-media-controls"},yi={class:"media-controls-item",style:{display:"grid","align-content":"center"}},_i={class:"media-controls-item fullscreen-row-centered"},fi={style:{width:"100%"}},hi={class:"fullscreen-mediacontrols-right media-controls-item"},bi={class:"fullscreen-media-controls-bottom",if:"store.activePlayerQueue"},gi={key:0},ki={class:"line-clamp-1"},Pi={style:{"text-align":"end"}},Ci=I({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(a){const l=a,m=x(""),o=x(),s=Q(()=>{if(t.selectedPlayer)return t.selectedPlayer.group_childs}),i=Q(()=>Z.theme.current.value.dark?he:Me),n=function(c){K.push({name:"track",params:{itemId:c.item_id,provider:c.provider}}),t.showFullscreenPlayer=!1},y=function(c){K.push({name:"artist",params:{itemId:c.item_id,provider:c.provider}}),t.showFullscreenPlayer=!1},h=function(c){K.push({name:"album",params:{itemId:c.item_id,provider:c.provider}}),t.showFullscreenPlayer=!1},p=function(c){K.push({name:"radio",params:{itemId:c.item_id,provider:c.provider}}),t.showFullscreenPlayer=!1},b=function(c){t.globalSearchTerm=c,K.push({name:"search"}),t.showFullscreenPlayer=!1};return U(()=>t.curQueueItem,async c=>{c&&c.media_item&&c.media_item.media_type===R.TRACK&&(o.value=await C.getItemByUri(c.media_item.uri))}),U(()=>l.colorPalette,c=>{!c.darkColor||!c.lightColor?m.value=Z.theme.current.value.dark?"#000":"#fff":m.value=Z.theme.current.value.dark?c.darkColor:c.lightColor}),(c,d)=>(r(),g(je,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":d[7]||(d[7]=P=>e(t).showFullscreenPlayer=P),fullscreen:"",scrim:!1,style:{overflow:"hidden"},transition:"dialog-bottom-transition"},{default:v(()=>[u(Pe,{color:e(Vt)(m.value,77,40)},{default:v(()=>[u(il,{class:"v-toolbar-default",color:"transparent"},{prepend:v(()=>[u(M,{icon:"",onClick:d[0]||(d[0]=P=>e(t).showFullscreenPlayer=!1)},{default:v(()=>[u(S,{icon:"mdi-chevron-down"})]),_:1})]),_:1}),u(_t,{class:"fullscreen-container"},{default:v(()=>{var V,W,q,T,J,Qe,Ie,xe,Se,Be;return[ei,f("div",ti,[(e(t).curQueueItem&&e($)({breakpoint:"mobile"})&&e($)({breakpoint:"bp3",condition:"lt"}),e(t).curQueueItem?(r(),g(fe,{key:1,item:e(t).curQueueItem.media_item||e(t).curQueueItem,size:e($)({breakpoint:"bp3",condition:"lt"})?512:1024,style:{height:"min(calc(100vw - 40px), calc(100vh - 340px))",width:"min(calc(100vw - 40px), calc(100vh - 340px))"},thumbnail:!1},null,8,["item","size"])):(r(),g(Ht,{key:2,src:i.value,style:{height:"min(calc(100vw - 40px), calc(100vh - 340px))",width:"min(calc(100vw - 40px), calc(100vh - 340px))"}},null,8,["src"])))]),f("div",li,[e(t).curQueueItem&&e(t).curQueueItem.media_item?(r(),_("div",ii,[(V=e(t).curQueueItem)!=null&&V.media_item&&((W=e(t).curQueueItem.media_item)==null?void 0:W.media_type)==e(R).RADIO?(r(),_("h2",{key:0,style:{cursor:"pointer",width:"fit-content",display:"inline"},class:"title line-clamp-1",onClick:d[1]||(d[1]=H=>{var E;return(E=e(t).curQueueItem)!=null&&E.media_item?p(e(t).curQueueItem.media_item):""})},k(e(t).curQueueItem.media_item.name),1)):(r(),_("h2",{key:1,style:{cursor:"pointer",width:"fit-content",display:"inline"},class:"title line-clamp-1",onClick:d[2]||(d[2]=H=>{var E;return(E=e(t).curQueueItem)!=null&&E.media_item?n(e(t).curQueueItem.media_item):""})},k(`${e(t).curQueueItem.media_item.name} ${"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?"("+e(t).curQueueItem.media_item.version+")":""}`),1)),((q=e(t).curQueueItem.media_item)==null?void 0:q.media_type)==e(R).RADIO&&((J=(T=e(t).curQueueItem)==null?void 0:T.streamdetails)!=null&&J.stream_title)?(r(),_("div",oi,[e(t).curQueueItem.streamdetails.stream_title.includes(" - ")?(r(),_("h4",{key:0,class:"fullscreen-track-info-subtitle",style:{cursor:"pointer"},onClick:d[3]||(d[3]=H=>b(e(t).curQueueItem.streamdetails.stream_title))},k(e(t).curQueueItem.streamdetails.stream_title),1)):(r(),_("h4",ai,k(e(t).curQueueItem.streamdetails.stream_title),1))])):((Qe=e(t).curQueueItem.media_item)==null?void 0:Qe.media_type)==e(R).TRACK&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists?(r(),_("div",si,[f("h4",null,["album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album?(r(),_("span",{key:0,class:"fullscreen-track-info-subtitle",onClick:d[4]||(d[4]=H=>h(e(t).curQueueItem.media_item.album))},k(e(t).curQueueItem.media_item.album.name),1)):w("",!0),f("span",{class:"fullscreen-track-info",onClick:d[5]||(d[5]=H=>y(e(t).curQueueItem.media_item.artists[0]))},[ri,ni,L(k(e(t).curQueueItem.media_item.artists[0].name),1)])])])):e(t).curQueueItem&&((Ie=e(t).curQueueItem.media_item)!=null&&Ie.metadata.description)?(r(),_("h4",ui,k(e(t).curQueueItem.media_item.metadata.description),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(r(),_("h4",ci,k(c.$t("queue_empty")),1)):((xe=e(t).selectedPlayer)==null?void 0:xe.active_source)!=((Se=e(t).selectedPlayer)==null?void 0:Se.player_id)?(r(),_("h4",di,k(c.$t("external_source_active",[(Be=e(t).selectedPlayer)==null?void 0:Be.active_source])),1)):w("",!0)])):w("",!0)]),f("div",mi,[u(ye,{"is-progress-bar":!1,color:c.$vuetify.theme.current.dark?l.colorPalette.lightColor:l.colorPalette.darkColor},null,8,["color"])]),w("",!0),f("div",pi,[e($)({breakpoint:"bp3",condition:"lt"})?(r(),g(oe,{key:0,queue:{isVisible:!1},player:{isVisible:!1},volume:{isVisible:!0,volumeSize:"100%",responsiveVolumeSize:!1}})):w("",!0)]),e($)({breakpoint:"bp3",condition:"lt"})?(r(),_("div",vi,[u(rt,{class:"media-controls-item","max-height":"24px"}),u(ut,{class:"media-controls-item","max-height":"35px"}),u(nt,{class:"media-controls-item","max-height":"80px"}),u(ct,{class:"media-controls-item","max-height":"35px"}),u(st,{class:"media-controls-item","max-height":"24px"})])):(r(),_("div",{key:2,class:"fullscreen-media-controls",style:B({paddingTop:"1vh",flex:e($)({breakpoint:"bp3",condition:"lt"})?"1 1 auto":"0 1 auto"})},[f("div",yi,[u(yt)]),f("div",_i,[f("div",fi,[u(ae,{"visible-components":{repeat:{isVisible:e($)("bp3")},shuffle:{isVisible:e($)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"}},previous:{isVisible:e($)("bp3")},next:{isVisible:e($)("bp3")}}},null,8,["visible-components"])])]),f("div",hi,[f("div",null,[u(ae,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e($)({breakpoint:"bp3",condition:"lt"})},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"]),u(oe,{queue:{isVisible:e($)("bp3")},player:{isVisible:!0},volume:{isVisible:e($)("bp0")}},null,8,["queue","volume"])])])],4)),f("div",bi,[e($)({breakpoint:"bp3",condition:"lt"})?(r(),_("div",gi,[u(M,{onClick:d[6]||(d[6]=H=>{e(t).showFullscreenPlayer=!1,e(t).showPlayersMenu=!0})},{default:v(()=>{var H,E;return[s.value&&s.value.length>0?(r(),g(at,{key:0,content:(H=e(t).selectedPlayer)==null?void 0:H.group_childs.length,color:c.$vuetify.theme.current.dark?l.colorPalette.lightColor:l.colorPalette.darkColor},{default:v(()=>[u(S,{size:30},{default:v(()=>[L("mdi-speaker")]),_:1})]),_:1},8,["content","color"])):(r(),g(S,{key:1,size:30},{default:v(()=>[L("mdi-speaker")]),_:1})),f("div",ki,k((E=e(t).activePlayerQueue)==null?void 0:E.display_name),1)]}),_:1})])):w("",!0),f("div",Pi,[u(oe,{queue:{isVisible:e($)({breakpoint:"bp3",condition:"lt"})},player:{isVisible:!1},volume:{isVisible:!1}},null,8,["queue"])])])]}),_:1})]),_:1},8,["color"])]),_:1},8,["modelValue"]))}});const Vi=F(Ci,[["__scopeId","data-v-a80df3a9"]]),wi={key:0},$i={key:1},Qi={key:2},Ii={class:"d-flex justify-center",style:{width:"100%"}},xi={key:0},Si={key:1},Bi={key:2,class:"line-clamp-1"},Ti={key:3,class:"line-clamp-1"},zi={key:4,class:"line-clamp-1"},Ni={key:5,class:"line-clamp-1"},Di=I({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(a){const l=a,m=Q(()=>{var o,s;return(s=(o=t.activePlayerQueue)==null?void 0:o.current_item)==null?void 0:s.streamdetails});return(o,s)=>(r(),g(O,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:v(()=>{var i;return[f("div",{class:"media-thumb player-media-thumb",style:B(`height: ${e($)({breakpoint:"phone"})?50:64}px; width: ${e($)({breakpoint:"phone"})?50:64}px; `)},[u(Vi,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":o.colorPalette},null,8,["show-fullscreen","color-palette"]),u(fe,{item:((i=e(t).curQueueItem)==null?void 0:i.media_item)||e(t).curQueueItem,fallback:e(he),style:{cursor:"pointer"},onClick:s[0]||(s[0]=n=>e(t).showFullscreenPlayer=!0)},null,8,["item","fallback"])],4)]}),title:v(()=>{var i,n;return[f("div",{style:B({cursor:"pointer",color:o.primaryColor})},[e(t).curQueueItem&&e(t).curQueueItem.media_item?(r(),_("div",{key:0,onClick:s[1]||(s[1]=y=>e(t).showFullscreenPlayer=!0)},[L(k(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(r(),_("span",wi,"("+k(e(t).curQueueItem.media_item.version)+")",1)):w("",!0)])):e(t).curQueueItem?(r(),_("div",$i,k(e(t).curQueueItem.name),1)):(i=e(t).activePlayerQueue)!=null&&i.display_name?(r(),_("div",Qi,k((n=e(t).activePlayerQueue)==null?void 0:n.display_name),1)):(r(),_("div",{key:3,onClick:s[2]||(s[2]=y=>e(t).showPlayersMenu=!0)},k(o.$t("no_player")),1))],4)]}),append:v(()=>{var i,n,y;return[(i=m.value)!=null&&i.audio_format.content_type&&!e($)({breakpoint:"phone"})&&o.showQualityDetailsBtn?(r(),g(ol,z({key:0,disabled:!e(t).activePlayerQueue||!((n=e(t).activePlayerQueue)!=null&&n.active)||((y=e(t).activePlayerQueue)==null?void 0:y.items)==0,class:"player-track-content-type",style:o.$vuetify.theme.current.dark?"color: #000; background: #fff; margin-left: 15px;":"color: #fff; background: #000; margin-left: 15px;",label:"",ripple:!1},l),{default:v(()=>[f("div",Ii,k(m.value.audio_format.content_type.toUpperCase()),1)]),_:1},16,["disabled","style"])):w("",!0)]}),subtitle:v(()=>{var i,n,y,h,p,b,c,d,P;return[f("div",{style:B({cursor:"pointer",color:o.primaryColor}),class:"line-clamp-1",onClick:s[3]||(s[3]=V=>e(t).showFullscreenPlayer=!0)},[e(t).curQueueItem&&((i=e(t).curQueueItem.media_item)==null?void 0:i.media_type)==e(R).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!l.showOnlyArtist?(r(),_("div",xi,k(e(wt)(e(t).curQueueItem.media_item.artists))+" • "+k(e(t).curQueueItem.media_item.album.name),1)):e(t).curQueueItem&&e(t).curQueueItem.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(r(),_("div",Si,k(e(t).curQueueItem.media_item.artists[0].name),1)):(y=(n=e(t).curQueueItem)==null?void 0:n.streamdetails)!=null&&y.stream_title?(r(),_("div",Bi,k((p=(h=e(t).curQueueItem)==null?void 0:h.streamdetails)==null?void 0:p.stream_title),1)):e(t).curQueueItem&&((b=e(t).curQueueItem.media_item)!=null&&b.metadata.description)?(r(),_("div",Ti,k(e(t).curQueueItem.media_item.metadata.description),1)):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(r(),_("div",zi,k(o.$t("queue_empty")),1)):((c=e(t).selectedPlayer)==null?void 0:c.active_source)!=((d=e(t).selectedPlayer)==null?void 0:d.player_id)?(r(),_("div",Ni,k(o.$t("external_source_active",[(P=e(t).selectedPlayer)==null?void 0:P.active_source])),1)):w("",!0)],4)]}),_:1}))}});const Li={style:{width:"100%"}},Ai={class:"mediacontrols-bottom-right"},Mi=I({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(a){qe();const l=x({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),m=new Image;m.src=Z.theme.current.value.dark?he:Me,m.crossOrigin="Anonymous",m.addEventListener("load",function(){l.value=$t(m)});const o=Q(()=>Z.theme.current.value.dark?l.value&&l.value.darkColor?l.value.darkColor+"26":"CCCCCC26":l.value&&l.value.lightColor?l.value.lightColor+"26":"CCCCCC26");return U(()=>{var s;return(s=t.curQueueItem)==null?void 0:s.queue_item_id},()=>{var s;(s=t.curQueueItem)!=null&&s.media_item?m.src=Te(t.curQueueItem.media_item,De.THUMB)||"":t.curQueueItem?m.src=Te(t.curQueueItem,De.THUMB)||"":m.src=""}),(s,i)=>{const n=Qt("breakpoint");return r(),_(D,null,[f("div",{class:Y(`${s.useFloatingPlayer?"mediacontrols-bg-2":"mediacontrols-bg-1"}`),style:B(`background: ${o.value};`)},null,6),e($)("bp3")?Ne((r(),g(ye,{key:0,color:s.$vuetify.theme.current.dark?l.value.lightColor||"#fff":l.value.darkColor||"#000","is-progress-bar":!0},null,8,["color"])),[[n,{breakpoint:"bp3",condition:"lt"}]]):w("",!0),f("div",{class:"mediacontrols",style:B(`padding: ${e($)({breakpoint:"phone"})?3:10}px ${e($)({breakpoint:"phone"}),10}px;`)},[f("div",{class:Y(`mediacontrols-left-${e($)("bp3")?"1":"2"}`)},[u(Di,{"show-quality-details-btn":!!e($)("bp8"),"show-only-artist":!e($)("bp7"),"color-palette":l.value,"primary-color":s.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])],2),f("div",{class:Y(`mediacontrols-bottom-center-${e($)("bp3")?"1":"2"}`)},[f("div",Li,[u(ae,{"visible-components":{repeat:{isVisible:e($)("bp3")},shuffle:{isVisible:e($)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"}},previous:{isVisible:e($)("bp3")},next:{isVisible:e($)("bp3")}}},null,8,["visible-components"]),Ne(u(ye,{color:s.$vuetify.theme.current.dark?l.value.lightColor||"#fff":l.value.darkColor||"#000","is-progress-bar":!1},null,8,["color"]),[[n,{breakpoint:"mobile",condition:"gt"}]])])],2),f("div",Ai,[f("div",null,[u(oe,{queue:{isVisible:e($)("bp3"),color:s.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:s.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!0,color:s.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),u(ae,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e($)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"48px",staticHeight:"48px",color:s.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],4)],64)}}});const Fi=F(Mi,[["__scopeId","data-v-30d32c2a"]]);const Ri=se({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ke(),...ne(),...Ye(),...lt(),...Je(),...Ce({tag:"footer"}),...ge()},"VFooter"),Wi=re()({name:"VFooter",props:Ri(),setup(a,l){let{slots:m}=l;const{themeClasses:o}=Ue(a),{backgroundColorClasses:s,backgroundColorStyles:i}=Ze(G(a,"color")),{borderClasses:n}=Xe(a),{elevationClasses:y}=et(a),{roundedClasses:h}=tt(a),p=It(32),{resizeRef:b}=Et(V=>{V.length&&(p.value=V[0].target.clientHeight)}),c=Q(()=>a.height==="auto"?p.value:parseInt(a.height,10)),{layoutItemStyles:d,layoutIsReady:P}=it({id:a.name,order:Q(()=>parseInt(a.order,10)),position:Q(()=>"bottom"),layoutSize:c,elementSize:Q(()=>a.height==="auto"?void 0:c.value),active:Q(()=>a.app),absolute:G(a,"absolute")});return ue(()=>u(a.tag,{ref:b,class:["v-footer",o.value,s.value,n.value,y.value,h.value,a.class],style:[i.value,a.app?d.value:{height:He(a.height)},a.style]},m)),a.app?P:{}}}),qi=I({__name:"Footer",setup(a){const l=Q(()=>t.navigationMenuStyle=="horizontal"),m=Q(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),o=Q(()=>l.value?m.value+5:0);return(s,i)=>(r(),_(D,null,[l.value?(r(),_("div",{key:0,class:Y(s.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:B(`
      position: fixed;
      width: 100%;
      height: ${m.value+(e($)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):w("",!0),e(t).navigationMenuStyle=="horizontal"?(r(),g(Cl,{key:1,height:m.value},null,8,["height"])):w("",!0),u(Wi,{bottom:"",fixed:"",class:Y(`d-flex flex-column ${l.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:B(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:v(()=>[u(Fi,{"use-floating-player":l.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}});const Hi={key:0,class:"text-body-2",style:{"line-height":"1em"}},Ei={key:1,class:"text-body-2",style:{"line-height":"1em"}},Ui={key:2,class:"text-body-2",style:{"line-height":"1em"}},Oi=I({__name:"PlayerSelect",setup(a){const l=x(void 0),m=Q(()=>{var b,c;const p=[];for(const d in(b=C)==null?void 0:b.players){const P=(c=C)==null?void 0:c.players[d];n(P,!0)&&p.push(P)}return p.slice().sort((d,P)=>{var V;return d.display_name.toUpperCase()>((V=P.display_name)==null?void 0:V.toUpperCase())?1:-1})});U(()=>t.showPlayersMenu,p=>{p||(l.value=void 0)}),U(()=>t.selectedPlayer,p=>{p&&localStorage.setItem("mass.LastPlayerId",p.player_id)}),U(()=>C.players,p=>{p&&y()},{deep:!0}),U(()=>C.state,p=>{p.value!=Oe.CONNECTED&&(t.selectedPlayerId=void 0)},{deep:!0});const o=x(),s=x();be(()=>{var p,b,c;o.value=(c=(b=(p=xt())==null?void 0:p.vnode)==null?void 0:b.el)==null?void 0:c.getRootNode(),y()});const i=function(p){s.value!=p&&(s.value=p,setTimeout(()=>{var c;const b=(c=o.value)==null?void 0:c.getElementById(p);b==null||b.scrollIntoView({behavior:"smooth"})},0))},n=function(p,b=!0,c=!1,d=!1){return!(!p.enabled||!p.available&&!b||p.synced_to&&!c||p.hidden&&!d)},y=function(){if(t.selectedPlayer&&n(t.selectedPlayer,!1,!1,!1))return;const p=h();p&&(t.selectedPlayerId=p.player_id,console.log("Selected new default player: ",p.display_name))},h=function(){const p=localStorage.getItem("mass.LastPlayerId");if(p&&p in C.players&&n(C.players[p],!1,!1,!1)&&C.players[p].powered)return C.players[p]};return(p,b)=>(r(),g(vt,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":b[1]||(b[1]=c=>e(t).showPlayersMenu=c),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:"290",style:{"z-index":"9999"}},{default:v(()=>[u(al,{class:"title"},{default:v(()=>[f("b",null,k(p.$t("players")),1)]),_:1}),u(Xt,{modelValue:l.value,"onUpdate:modelValue":b[0]||(b[0]=c=>l.value=c),focusable:"",variant:"accordion",flat:""},{default:v(()=>[(r(!0),_(D,null,A(m.value,c=>(r(),g(Zt,{id:c.player_id,key:c.player_id,disabled:!c.available,flat:"",class:"playerrow"},{default:v(()=>[u(el,{"expand-icon":"mdi-chevron-down","collapse-icon":"mdi-chevron-up",onClick:d=>{e(t).selectedPlayerId=c.player_id,i(c.player_id)}},{default:v(()=>[u(O,{class:"playerrow-list-item"},{prepend:v(()=>[u(S,{size:"45",icon:c.icon,color:"primary"},null,8,["icon"])]),title:v(()=>[f("div",null,[f("b",null,k(e(ke)(e(Ee)(c),20)),1)])]),subtitle:v(()=>[c.powered?c.active_source!=c.player_id&&e(C).queues[c.active_source]?(r(),_("div",Ei,k(p.$t("state."+c.state))+" ("+k(e(C).queues[c.active_source].display_name)+") ",1)):(r(),_("div",Ui,k(p.$t("state."+c.state)),1)):(r(),_("div",Hi,k(p.$t("state.off")),1))]),_:2},1024)]),_:2},1032,["onClick"]),u(tl,null,{default:v(()=>[u(dt,{player:c},null,8,["player"])]),_:2},1024)]),_:2},1032,["id","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]))}});const Gi=F(Oi,[["__scopeId","data-v-92e297c7"]]);function ji(a={}){const{immediate:l=!1,onNeedRefresh:m,onOfflineReady:o,onRegistered:s,onRegisteredSW:i,onRegisterError:n}=a;let y,h,p;const b=async(d=!0)=>{await h,await(p==null?void 0:p())};async function c(){if("serviceWorker"in navigator){if(y=await St(()=>import("./workbox-window.prod.es5-c46a1faa.js"),[],import.meta.url).then(({Workbox:d})=>new d("./sw.js",{scope:"./",type:"classic"})).catch(d=>{n==null||n(d)}),!y)return;p=async()=>{await(y==null?void 0:y.messageSkipWaiting())};{let d=!1;const P=()=>{d=!0,y==null||y.addEventListener("controlling",V=>{V.isUpdate&&window.location.reload()}),m==null||m()};y.addEventListener("installed",V=>{typeof V.isUpdate>"u"?typeof V.isExternal<"u"?V.isExternal?P():!d&&(o==null||o()):V.isExternal?window.location.reload():!d&&(o==null||o()):V.isUpdate||o==null||o()}),y.addEventListener("waiting",P),y.addEventListener("externalwaiting",P)}y.register({immediate:l}).then(d=>{i?i("./sw.js",d):s==null||s(d)}).catch(d=>{n==null||n(d)})}}return h=c(),b}function Ki(a={}){const{immediate:l=!0,onNeedRefresh:m,onOfflineReady:o,onRegistered:s,onRegisteredSW:i,onRegisterError:n}=a,y=x(!1),h=x(!1);return{updateServiceWorker:ji({immediate:l,onNeedRefresh(){y.value=!0,m==null||m()},onOfflineReady(){h.value=!0,o==null||o()},onRegistered:s,onRegisteredSW:i,onRegisterError:n}),offlineReady:h,needRefresh:y}}const Yi={key:0,class:"pwa-toast",role:"alert"},Ji={class:"message"},Xi={key:0},Zi={key:1},eo=I({__name:"ReloadPrompt",setup(a){const{offlineReady:l,needRefresh:m,updateServiceWorker:o}=Ki(),s=async()=>{l.value=!1,m.value=!1};return(i,n)=>e(l)||e(m)?(r(),_("div",Yi,[f("div",Ji,[e(l)?(r(),_("span",Xi," App ready to work offline ")):(r(),_("span",Zi," New content available, click on reload button to update. "))]),e(m)?(r(),_("button",{key:0,onClick:n[0]||(n[0]=y=>e(o)())},"Reload")):w("",!0),f("button",{onClick:s},"Close")])):w("",!0)}});const to=se({...ne(),...Kt({fullHeight:!0}),...ge()},"VApp"),lo=re()({name:"VApp",props:to(),setup(a,l){let{slots:m}=l;const o=Ue(a),{layoutClasses:s,getLayoutItem:i,items:n,layoutRef:y}=Yt(a),{rtlClasses:h}=Bt();return ue(()=>u("div",{ref:y,class:["v-application",o.themeClasses.value,s.value,h.value,a.class],style:[a.style]},[u("div",{class:"v-application__wrap"},[u(Tt,null,{default:()=>{var p;return[u(D,null,[(p=m.default)==null?void 0:p.call(m)])]}})])])),{getLayoutItem:i,items:n,theme:o}}}),Io=I({__name:"Default",setup(a){return(l,m)=>(r(),g(lo,null,{default:v(()=>[u(Gi),e(C).state.value==e(Oe).CONNECTED?(r(),g(fl,{key:0})):(r(),g(Jt,{key:1},{default:v(()=>[u(Ut,{indeterminate:"",size:"64"})]),_:1})),e(t).isInStandaloneMode?(r(),g(eo,{key:2})):w("",!0),u(qi)]),_:1}))}});export{Io as default};
