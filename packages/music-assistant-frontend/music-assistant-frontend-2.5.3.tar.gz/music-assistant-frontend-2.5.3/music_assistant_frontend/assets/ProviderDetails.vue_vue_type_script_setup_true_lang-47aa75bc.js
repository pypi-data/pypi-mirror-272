import{l as X,m as Z,f as t,aa as ee,F as T,d as N,r as j,c as a,g as p,w as i,G,Q as H,R as te,N as ie,ai as ae,aj as le,ae as ne,J as oe,z as D,b as I,e as g,j as y,u as d,i as b,H as L,t as f,h as R,ad as B,a3 as Q,s as w,M as S,ak as se,V as re,al as me,O as ue,E as de}from"./index-2dd0c7d2.js";import{_ as K,C as pe}from"./Container-fdf4c1f5.js";import{M as A,g as E,c as ce}from"./helpers-4d7c5bf6.js";import{m as fe,a as ye,u as ge,c as ve,w as P,q as _,s as q,x as Y,V as U,r as he}from"./VListItem-cb387084.js";import{V as ke}from"./VMenu-97c1c955.js";import{g as be,a as _e}from"./ItemContextMenu.vue_vue_type_style_index_0_scoped_7aadaa8c_lang-7ff19a96.js";import{T as J}from"./Toolbar-1720c469.js";import{V as $e,a as Ce}from"./VCardText-0ed41581.js";import{a as V,V as x,b as we}from"./VCard-907b4685.js";import{V as Ve}from"./VTooltip-e62b61bd.js";import{a as F,V as M}from"./VList-d110868a.js";import{b as Le,c as Te}from"./layout-42d7f450.js";import{V as Ie}from"./VDialog-e187bf14.js";import{V as Pe}from"./VLabel-1f522f96.js";import{_ as ze}from"./_plugin-vue_export-helper-c27b6911.js";import{L as De}from"./ListItem-87435fbb.js";const Re=X({...fe(),...ye(),...Le()},"VLayout"),Be=Z()({name:"VLayout",props:Re(),setup(h,u){let{slots:m}=u;const{layoutClasses:k,layoutStyles:c,getLayoutItem:n,items:r,layoutRef:v}=Te(h),{dimensionStyles:o}=ge(h);return ve(()=>t("div",{ref:v,class:[k.value,h.class],style:[o.value,c.value,h.style]},[t(ee,null,{default:()=>{var $;return[t(T,null,[($=m.default)==null?void 0:$.call(m)])]}})])),{getLayoutItem:n,items:r}}}),Se=N({__name:"MenuButton",props:{icon:{default:void 0},text:{default:void 0},disabled:{type:Boolean,default:!1},width:{default:200},openMenuOnClick:{type:Boolean,default:!1}},emits:["click"],setup(h,{emit:u}){const m=j(!1),k=u;return(c,n)=>(a(),p("div",{style:H(`width: ${c.width}px; height: 30px;`)},[t(ke,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=r=>m.value=r),"close-on-content-click":!0,"nudge-width":200,"offset-x":"",scrim:"!store.showPlayersMenu","z-index":"100"},{activator:i(({props:r})=>[t(P,G({variant:"tonal"},r,{style:`
            width: ${c.width}px;
            position: absolute;
            border: 1px solid #cccccc4d;
            height: 38px;
            margin-top: -1px;
            margin-left: -1px;
          `}),{default:i(()=>[t(_,{icon:"mdi-menu-down",size:"xx-large",style:H(`width: 20px; margin-left: ${c.width-42}px`)},null,8,["style"])]),_:2},1040,["style"])]),default:i(()=>[te(c.$slots,"menu")]),_:3},8,["modelValue"]),t(P,{color:"primary",flat:"",disabled:c.disabled,style:H(`width: ${c.width-40}px; justify-content: left;`),text:c.text,onClick:n[1]||(n[1]=r=>c.openMenuOnClick?m.value=!m.value:k("click"))},ie({_:2},[c.icon?{name:"prepend",fn:i(()=>[t(_,{icon:c.icon,size:"x-large"},null,8,["icon"])]),key:"0"}:void 0]),1032,["disabled","style","text"])],4))}}),He={key:0,xs5:"","pa-5":"",style:{height:"80%","min-width":"230px","margin-top":"25px","margin-bottom":"15px","margin-right":"24px","align-content":"center"}},Ae={key:0},Ue={key:1},xe={style:{"padding-bottom":"10px"}},je=["onClick"],Fe={style:{color:"primary"}},Ne={style:{display:"flex","margin-left":"14px","padding-bottom":"10px",cursor:"pointer !important"}},Oe=["innerHTML"],Qe={key:1,class:"justify-center",style:{"margin-left":"15px","padding-bottom":"20px"}},Ee=N({__name:"InfoHeader",props:{item:{}},setup(h){const u=h,m=j(!1),k=j(),{mobile:c}=ae(),n=new URL(""+new URL("info_gradient-a4aefd1d.jpg",import.meta.url).href,self.location).href,r=le();ne(),oe(()=>u.item,async e=>{e&&(k.value=E(u.item,Q.FANART)||E(u.item,Q.THUMB)||n)},{immediate:!0});const v=function(e){r.push({name:"album",params:{itemId:e.item_id,provider:e.provider}})},o=function(e){r.push({name:"artist",params:{itemId:e.item_id,provider:e.provider}})},$=function(){var s;if(w.prevScrollPos){r.go(-1);return}const e=((s=r.currentRoute.value.name)==null?void 0:s.toString())||"";for(const l of["artist","album","track","playlist","radio"])if(e.includes(l)){r.push({name:`${l}s`});return}r.push({name:"home"})},z=D(()=>u.item?u.item.metadata&&u.item.metadata.description?u.item.metadata.description:u.item.metadata&&u.item.metadata.copyright?u.item.metadata.copyright:("artists"in u.item&&u.item.artists.forEach(function(e){if("metadata"in e&&e.metadata.description)return e.metadata.description}),""):""),W=D(()=>z.value.replace(/(\r\n|\n|\r)/gm,"<br /><br />")),O=D(()=>{const e=c.value?160:300;return z.value.length>e?z.value.replace(/(\r\n|\n|\r)/gm," ").substring(0,e)+"...":z.value.replace(/(\r\n|\n|\r)/gm," ")});return D(()=>Object.values(I.players).filter(e=>e.available&&!e.synced_to).sort((e,s)=>e.display_name.toUpperCase()>s.display_name.toUpperCase()?1:-1)),(e,s)=>(a(),p("div",null,[t(x,{variant:"flat",img:d(n),style:{"z-index":"0","border-radius":"0px"},height:"25vh","max-height":"500px","min-height":"340px"},{default:i(()=>[e.item?y("",!0):(a(),g(he,{key:0,indeterminate:""})),t(q,{width:"100%",height:"100%",cover:"",class:"background-image",src:k.value,gradient:e.$vuetify.theme.current.dark?"to bottom, rgba(0,0,0,.90), rgba(0,0,0,.75)":"to bottom, rgba(255,255,255,.90), rgba(255,255,255,.75)"},null,8,["src","gradient"]),t(J,{icon:"mdi-arrow-left",style:{position:"absolute"},"menu-items":e.item?d(be)([e.item],e.item):[],"enforce-overflow-menu":!0,onIconClicked:$},null,8,["menu-items"]),e.item?(a(),g(Be,{key:1,style:{margin:"0",top:"55%","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)","padding-left":"15px","align-items":"center","padding-right":"15px"}},{default:i(()=>[e.$vuetify.display.mobile?y("",!0):(a(),p("div",He,[e.item.media_type&&[d(S).ARTIST,d(S).PLAYLIST].includes(e.item.media_type)?(a(),p("div",Ae,[t(Y,{size:"210",style:{"margin-bottom":"10%"}},{default:i(()=>[t(A,{item:e.item},null,8,["item"])]),_:1})])):(a(),p("div",Ue,[t(A,{item:e.item,size:"calc(100%)",style:{"max-height":"256px"}},null,8,["item"])]))])),b("div",null,[t($e,null,{default:i(()=>[L(f(e.item.name),1)]),_:1}),b("div",xe,["version"in e.item&&e.item.version?(a(),g(V,{key:0,class:"caption"},{default:i(()=>[L(f(e.item.version)+" ",1),t(Ve,{location:"bottom"},{activator:i(({props:l})=>[d(se)(e.item.metadata.explicit||!1)?(a(),g(_,G({key:0},l,{icon:"mdi-alpha-e-box",width:"35"}),null,16)):y("",!0)]),default:i(()=>[b("span",null,f(e.$t("tooltip.explicit")),1)]),_:1})]),_:1})):y("",!0),"artists"in e.item&&e.item.artists?(a(),g(V,{key:1,class:"title accent--text"},{default:i(()=>[t(_,{style:{"margin-left":"-3px","margin-right":"3px"},small:"",color:"primary",icon:"mdi-account-music"}),(a(!0),p(T,null,R(e.item.artists,(l,C)=>(a(),p("span",{key:l.item_id},[b("a",{style:{color:"accent"},onClick:Je=>o(l)},f(l.name),9,je),C+1<e.item.artists.length?(a(),p("span",{key:C,style:{color:"accent"}},f(" / "))):y("",!0)]))),128))]),_:1})):y("",!0),"owner"in e.item&&e.item.owner?(a(),g(V,{key:2,class:"title"},{default:i(()=>[t(_,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-account-music"}),b("a",Fe,f(e.item.owner),1)]),_:1})):y("",!0),"album"in e.item&&e.item.album?(a(),g(V,{key:3},{default:i(()=>[t(_,{color:"primary",style:{"margin-left":"-3px","margin-right":"3px"},small:"",icon:"mdi-album"}),b("a",{style:{color:"secondary"},onClick:s[0]||(s[0]=l=>{var C;return v((C=e.item)==null?void 0:C.album)})},f(e.item.album.name),1)]),_:1})):y("",!0)]),b("div",Ne,[t(Se,{width:200,icon:"mdi-play-circle-outline",text:d(re)(e.$t("play"),12),disabled:!e.item,"open-menu-on-click":!d(w).activePlayerQueue,onClick:s[2]||(s[2]=l=>d(I).playMedia(e.item))},{menu:i(()=>[t(x,{width:"320"},{default:i(()=>[t(F,null,{default:i(()=>[t(U,{title:e.item.name,link:""},{prepend:i(()=>[t(Y,null,{default:i(()=>[t(A,{item:e.item,size:"80"},null,8,["item"])]),_:1})]),title:i(()=>{var l;return[t(U,{variant:"text",title:e.$t("play_on"),subtitle:((l=d(w).activePlayerQueue)==null?void 0:l.display_name)||e.$t("no_player"),onClick:s[1]||(s[1]=B(C=>d(w).showPlayersMenu=!0,["stop"]))},null,8,["title","subtitle"])]}),_:1},8,["title"])]),_:1}),t(M),t(F,{density:"compact",slim:"",tile:"",disabled:!d(w).activePlayerQueue},{default:i(()=>[(a(!0),p(T,null,R(d(_e)([e.item],e.item),l=>(a(),p("div",{key:l.label},[t(U,{title:e.$t(l.label,l.labelArgs||[]),density:"compact",onClick:l.action},{prepend:i(()=>[t(_,{style:{"padding-left":"15px"},icon:l.icon},null,8,["icon"])]),_:2},1032,["title","onClick"])]))),128))]),_:1},8,["disabled"])]),_:1})]),_:1},8,["text","disabled","open-menu-on-click"]),t(P,{variant:"plain",ripple:"",icon:e.item.favorite?"mdi-heart":"mdi-heart-outline",size:"x-large",style:{"margin-top":"-14px"},title:e.$t("tooltip.favorite"),onClick:[s[3]||(s[3]=l=>d(I).toggleFavorite(e.item)),s[4]||(s[4]=B(()=>{},["prevent"])),s[5]||(s[5]=B(()=>{},["stop"]))]},null,8,["icon","title"]),t(K,{domain:e.item.provider,size:25,style:{"margin-top":"4px"}},null,8,["domain"])]),O.value?(a(),g(V,{key:0,class:"body-2 justify-left",style:{"padding-bottom":"10px","white-space":"pre-line",cursor:"pointer"},onClick:s[6]||(s[6]=l=>m.value=!m.value)},{default:i(()=>[b("div",{innerHTML:O.value},null,8,Oe)]),_:1})):y("",!0),e.item&&e.item.metadata.genres?(a(),p("div",Qe,[(a(!0),p(T,null,R(e.item.metadata.genres.slice(0,e.$vuetify.display.mobile?15:25),l=>(a(),g(Pe,{key:l,color:"blue-grey lighten-1",style:{"margin-right":"5px","margin-bottom":"5px"},small:"",outlined:""},{default:i(()=>[L(f(l),1)]),_:2},1024))),128))])):y("",!0)])]),_:1})):y("",!0)]),_:1},8,["img"]),t(Ie,{modelValue:m.value,"onUpdate:modelValue":s[8]||(s[8]=l=>m.value=l),"max-width":"975",width:"auto"},{default:i(()=>[t(x,null,{default:i(()=>[t(Ce,{innerHTML:W.value},null,8,["innerHTML"]),t(we,null,{default:i(()=>[t(P,{color:"primary",block:"",onClick:s[7]||(s[7]=l=>m.value=!1)},{default:i(()=>[L(f(e.$t("close")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}});const pt=ze(Ee,[["__scopeId","data-v-a49c4624"]]),Ye={style:{"margin-bottom":"10px"}},Ge={key:0},Ke=["title","onClick"],qe=["title"],ct=N({__name:"ProviderDetails",props:{itemDetails:{}},setup(h){const u=function(n){window.open(n,"_blank")},m=me({}),k=function(n){const r=`${n.provider_instance}.${n.item_id}`,v=m[r];if(v)v.load(),delete m[r];else{const o=new Audio(c(n.provider_instance,n.item_id));m[r]=o,o.play()}},c=function(n,r){return`${I.baseUrl}/preview?item_id=${encodeURIComponent(r)}&provider=${n}`};return(n,r)=>(a(),p("section",Ye,[t(J,{title:n.$t("mapped_providers")},null,8,["title"]),t(M),t(pe,null,{default:i(()=>[t(F,null,{default:i(()=>{var v;return[(a(!0),p(T,null,R((v=n.itemDetails)==null?void 0:v.provider_mappings,o=>(a(),g(De,{key:o.provider_instance},{prepend:i(()=>[t(K,{domain:o.provider_domain,size:30},null,8,["domain"])]),title:i(()=>[L(f(d(I).providerManifests[o.provider_domain].name),1)]),subtitle:i(()=>[n.itemDetails.media_type==d(S).TRACK&&o.audio_format?(a(),p("span",Ge,f(o.audio_format.content_type)+" | "+f(o.audio_format.sample_rate/1e3)+"kHz/"+f(o.audio_format.bit_depth)+" bits | ",1)):y("",!0),o.url&&!o.provider_domain.startsWith("file")?(a(),p("a",{key:1,style:{opacity:"0.4"},title:n.$t("tooltip.open_provider_link"),onClick:B($=>u(o.url),["prevent"])},f(o.url),9,Ke)):(a(),p("span",{key:2,style:{opacity:"0.4"},title:o.item_id},f(o.item_id),9,qe))]),append:i(()=>[o.audio_format&&o.audio_format.bit_depth>16?(a(),g(q,{key:0,src:d(ce),width:"30",class:ue(n.$vuetify.theme.current.dark?"hiresicondark":"hiresicon"),style:{"margin-right":"15px"}},null,8,["src","class"])):y("",!0),d(de)("bp1")&&n.itemDetails.media_type==d(S).TRACK?(a(),g(P,{key:1,icon:m[`${o.provider_instance}.${o.item_id}`]?"mdi-pause":"mdi-play-circle",title:n.$t("tooltip.play_sample"),onClick:$=>k(o)},null,8,["icon","title","onClick"])):y("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]))}});export{pt as I,ct as _};
