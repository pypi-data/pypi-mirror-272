import{d as me,V as q,a as ve}from"./VTextField-8263a3db.js";import{L as Z,N as K,l as _,aI as pe,D as he,m as G,J as ye,r as L,A as j,z as x,aZ as z,f as r,F as E,E as A,a$ as Ve,Y as ge,b0 as be,U as ke,b1 as W}from"./index-abd7b0d3.js";import{d as we,V as Pe,e as Ce,f as xe}from"./VVirtualScroll-d9ad5563.js";import{h as Se,V as De,f as Q}from"./VMenu-1534bcb0.js";import{m as Fe,b as Te,a as Ae}from"./VList-856decd1.js";import{N as Ie,c as X,V as Y,D as Re,w as J,K as Le,m as Be}from"./VListItem-623fa258.js";import{a as Oe}from"./VChip-13179554.js";function Ee(e,I){const n=Z(!1);let b;function c(i){cancelAnimationFrame(b),n.value=!0,b=requestAnimationFrame(()=>{b=requestAnimationFrame(()=>{n.value=!1})})}async function k(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const l=K(n,()=>{l(),i()})}else i()})}async function w(i){var p,S;if(i.key==="Tab"&&((p=I.value)==null||p.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const l=(S=e.value)==null?void 0:S.$el;if(!l)return;(i.key==="Home"||i.key==="End")&&l.scrollTo({top:i.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await k();const d=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const o=l.getBoundingClientRect().top;for(const V of d)if(V.getBoundingClientRect().top>=o){V.focus();break}}else{const o=l.getBoundingClientRect().bottom;for(const V of[...d].reverse())if(V.getBoundingClientRect().bottom<=o){V.focus();break}}}return{onListScroll:c,onListKeydown:w}}const Ke=_({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:pe,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Fe({itemChildren:!1})},"Select"),_e=_({...Ke(),...he(me({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ie({transition:{component:Se}})},"VSelect"),We=G()({name:"VSelect",props:_e(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:n}=I;const{t:b}=ye(),c=L(),k=L(),w=L(),i=j(e,"menu"),l=x({get:()=>i.value,set:t=>{var a;i.value&&!t&&((a=k.value)!=null&&a.Î¨openChildren)||(i.value=t)}}),{items:d,transformIn:p,transformOut:S}=Te(e),o=j(e,"modelValue",[],t=>p(t===null?[null]:be(t)),t=>{const a=S(t);return e.multiple?a:a[0]??null}),V=x(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),D=we(),ee=x(()=>o.value.map(t=>t.value)),P=Z(!1),H=x(()=>l.value?e.closeText:e.openText);let O="",M;const F=x(()=>e.hideSelected?d.value.filter(t=>!o.value.some(a=>a===t)):d.value),N=x(()=>e.hideNoData&&!F.value.length||e.readonly||(D==null?void 0:D.isReadonly.value)),te=x(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=L(),{onListScroll:ne,onListKeydown:le}=Ee(R,c);function ae(t){e.openOnClear&&(l.value=!0)}function oe(){N.value||(l.value=!l.value)}function ue(t){var u,h;if(!t.key||e.readonly||D!=null&&D.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?(u=R.value)==null||u.focus("first"):t.key==="End"&&((h=R.value)==null||h.focus("last"));const a=1e3;function f(s){const y=s.key.length===1,m=!s.ctrlKey&&!s.metaKey&&!s.altKey;return y&&m}if(e.multiple||!f(t))return;const C=performance.now();C-M>a&&(O=""),O+=t.key.toLowerCase(),M=C;const g=d.value.find(s=>s.title.toLowerCase().startsWith(O));if(g!==void 0){o.value=[g];const s=F.value.indexOf(g);z&&window.requestAnimationFrame(()=>{var y;s>=0&&((y=w.value)==null||y.scrollToIndex(s))})}}function B(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const f=o.value.findIndex(g=>e.valueComparator(g.value,t.value)),C=a??!~f;if(~f){const g=C?[...o.value,t]:[...o.value];g.splice(f,1),o.value=g}else C&&(o.value=[...o.value,t])}else{const f=a!==!1;o.value=f?[t]:[],ke(()=>{l.value=!1})}}function ie(t){var a;(a=R.value)!=null&&a.$el.contains(t.relatedTarget)||(l.value=!1)}function se(){var t;P.value&&((t=c.value)==null||t.focus())}function re(t){P.value=!0}function ce(t){if(t==null)o.value=[];else if(W(c.value,":autofill")||W(c.value,":-webkit-autofill")){const a=d.value.find(f=>f.title===t);a&&B(a)}else c.value&&(c.value.value="")}return K(l,()=>{if(!e.hideSelected&&l.value&&o.value.length){const t=F.value.findIndex(a=>o.value.some(f=>e.valueComparator(f.value,a.value)));z&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=w.value)==null||a.scrollToIndex(t))})}}),K(()=>e.items,(t,a)=>{l.value||P.value&&!a.length&&t.length&&(l.value=!0)}),X(()=>{const t=!!(e.chips||n.chip),a=!!(!e.hideNoData||F.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),f=o.value.length>0,C=q.filterProps(e),g=f||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(q,A({ref:c},C,{modelValue:o.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":ce,focused:P.value,"onUpdate:focused":u=>P.value=u,validationValue:o.externalValue,counterValue:V.value,dirty:f,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:g,"onClick:clear":ae,"onMousedown:control":oe,onBlur:ie,onKeydown:ue,"aria-label":b(H.value),title:b(H.value)}),{...n,default:()=>r(E,null,[r(De,A({ref:k,modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent",contentClass:"v-select__content",disabled:N.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:se},te.value),{default:()=>[a&&r(Ae,A({ref:R,selected:ee.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:le,onFocusin:re,onScrollPassive:ne,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var u,h,s;return[(u=n["prepend-item"])==null?void 0:u.call(n),!F.value.length&&!e.hideNoData&&(((h=n["no-data"])==null?void 0:h.call(n))??r(Y,{title:b(e.noDataText)},null)),r(Pe,{ref:w,renderless:!0,items:F.value},{default:y=>{var $;let{item:m,index:T,itemRef:v}=y;const U=A(m.props,{ref:v,key:T,onClick:()=>B(m,null)});return(($=n.item)==null?void 0:$.call(n,{item:m,index:T,props:U}))??r(Y,A(U,{role:"option"}),{prepend:de=>{let{isSelected:fe}=de;return r(E,null,[e.multiple&&!e.hideSelected?r(ve,{key:m.value,modelValue:fe,ripple:!1,tabindex:"-1"},null):void 0,m.props.prependAvatar&&r(Re,{image:m.props.prependAvatar},null),m.props.prependIcon&&r(J,{icon:m.props.prependIcon},null)])}})}}),(s=n["append-item"])==null?void 0:s.call(n)]}})]}),o.value.map((u,h)=>{function s(v){v.stopPropagation(),v.preventDefault(),B(u,!1)}const y={"onClick:close":s,onKeydown(v){v.key!=="Enter"&&v.key!==" "||(v.preventDefault(),v.stopPropagation(),s(v))},onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},m=t?!!n.chip:!!n.selection,T=m?Ve(t?n.chip({item:u,index:h,props:y}):n.selection({item:u,index:h})):void 0;if(!(m&&!T))return r("div",{key:u.value,class:"v-select__selection"},[t?n.chip?r(Le,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[T]}):r(Oe,A({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},y),null):T??r("span",{class:"v-select__selection-text"},[u.title,e.multiple&&h<o.value.length-1&&r("span",{class:"v-select__selection-comma"},[ge(",")])])])})]),"append-inner":function(){var y;for(var u=arguments.length,h=new Array(u),s=0;s<u;s++)h[s]=arguments[s];return r(E,null,[(y=n["append-inner"])==null?void 0:y.call(n,...h),e.menuIcon?r(J,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Q({isFocused:P,menu:l,select:B},c)}}),He=_({...Be(),...Ce()},"VForm"),Ye=G()({name:"VForm",props:He(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,I){let{slots:n,emit:b}=I;const c=xe(e),k=L();function w(l){l.preventDefault(),c.reset()}function i(l){const d=l,p=c.validate();d.then=p.then.bind(p),d.catch=p.catch.bind(p),d.finally=p.finally.bind(p),b("submit",d),d.defaultPrevented||p.then(S=>{var V;let{valid:o}=S;o&&((V=k.value)==null||V.submit())}),d.preventDefault()}return X(()=>{var l;return r("form",{ref:k,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:w,onSubmit:i},[(l=n.default)==null?void 0:l.call(n,c)])}),Q(c,k)}});export{Ye as V,We as a};
