import{m as me,V as U}from"./VTextField-de7279c6.js";import{a5 as Y,J as E,l as H,aI as ve,as as pe,m as Z,aq as he,r as B,A as j,z as x,aZ as z,f as r,F as _,G as A,a$ as ye,H as Ve,b0 as ge,ar as be,b1 as W}from"./index-2dd0c7d2.js";import{f as ke,V as we,g as Pe,h as Ce}from"./VLabel-1f522f96.js";import{h as xe,V as Se,f as Q}from"./VMenu-97c1c955.js";import{m as Fe,b as De,a as Te}from"./VList-d110868a.js";import{N as Ae,c as X,V as G,x as Ie,q as J,F as Re,m as Be}from"./VListItem-cb387084.js";import{V as Le}from"./VVirtualScroll-660ff9a6.js";import{V as Oe}from"./VCheckboxBtn-c3f9b6ff.js";function _e(e,I){const n=Y(!1);let b;function c(i){cancelAnimationFrame(b),n.value=!0,b=requestAnimationFrame(()=>{b=requestAnimationFrame(()=>{n.value=!1})})}async function k(){await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>requestAnimationFrame(i)),await new Promise(i=>{if(n.value){const l=E(n,()=>{l(),i()})}else i()})}async function w(i){var p,S;if(i.key==="Tab"&&((p=I.value)==null||p.focus()),!["PageDown","PageUp","Home","End"].includes(i.key))return;const l=(S=e.value)==null?void 0:S.$el;if(!l)return;(i.key==="Home"||i.key==="End")&&l.scrollTo({top:i.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await k();const d=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(i.key==="PageDown"||i.key==="Home"){const o=l.getBoundingClientRect().top;for(const V of d)if(V.getBoundingClientRect().top>=o){V.focus();break}}else{const o=l.getBoundingClientRect().bottom;for(const V of[...d].reverse())if(V.getBoundingClientRect().bottom<=o){V.focus();break}}}return{onListScroll:c,onListKeydown:w}}const Ee=H({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:ve,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Fe({itemChildren:!1})},"Select"),He=H({...Ee(),...pe(me({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ae({transition:{component:xe}})},"VSelect"),Ge=Z()({name:"VSelect",props:He(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,I){let{slots:n}=I;const{t:b}=he(),c=B(),k=B(),w=B(),i=j(e,"menu"),l=x({get:()=>i.value,set:t=>{var a;i.value&&!t&&((a=k.value)!=null&&a.Î¨openChildren)||(i.value=t)}}),{items:d,transformIn:p,transformOut:S}=De(e),o=j(e,"modelValue",[],t=>p(t===null?[null]:ge(t)),t=>{const a=S(t);return e.multiple?a:a[0]??null}),V=x(()=>typeof e.counterValue=="function"?e.counterValue(o.value):typeof e.counterValue=="number"?e.counterValue:o.value.length),F=ke(),ee=x(()=>o.value.map(t=>t.value)),P=Y(!1),K=x(()=>l.value?e.closeText:e.openText);let O="",q;const D=x(()=>e.hideSelected?d.value.filter(t=>!o.value.some(a=>a===t)):d.value),M=x(()=>e.hideNoData&&!D.value.length||e.readonly||(F==null?void 0:F.isReadonly.value)),te=x(()=>{var t;return{...e.menuProps,activatorProps:{...((t=e.menuProps)==null?void 0:t.activatorProps)||{},"aria-haspopup":"listbox"}}}),R=B(),{onListScroll:ne,onListKeydown:le}=_e(R,c);function ae(t){e.openOnClear&&(l.value=!0)}function oe(){M.value||(l.value=!l.value)}function ue(t){var u,h;if(!t.key||e.readonly||F!=null&&F.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?(u=R.value)==null||u.focus("first"):t.key==="End"&&((h=R.value)==null||h.focus("last"));const a=1e3;function f(s){const y=s.key.length===1,m=!s.ctrlKey&&!s.metaKey&&!s.altKey;return y&&m}if(e.multiple||!f(t))return;const C=performance.now();C-q>a&&(O=""),O+=t.key.toLowerCase(),q=C;const g=d.value.find(s=>s.title.toLowerCase().startsWith(O));if(g!==void 0){o.value=[g];const s=D.value.indexOf(g);z&&window.requestAnimationFrame(()=>{var y;s>=0&&((y=w.value)==null||y.scrollToIndex(s))})}}function L(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const f=o.value.findIndex(g=>e.valueComparator(g.value,t.value)),C=a??!~f;if(~f){const g=C?[...o.value,t]:[...o.value];g.splice(f,1),o.value=g}else C&&(o.value=[...o.value,t])}else{const f=a!==!1;o.value=f?[t]:[],be(()=>{l.value=!1})}}function ie(t){var a;(a=R.value)!=null&&a.$el.contains(t.relatedTarget)||(l.value=!1)}function se(){var t;P.value&&((t=c.value)==null||t.focus())}function re(t){P.value=!0}function ce(t){if(t==null)o.value=[];else if(W(c.value,":autofill")||W(c.value,":-webkit-autofill")){const a=d.value.find(f=>f.title===t);a&&L(a)}else c.value&&(c.value.value="")}return E(l,()=>{if(!e.hideSelected&&l.value&&o.value.length){const t=D.value.findIndex(a=>o.value.some(f=>e.valueComparator(f.value,a.value)));z&&window.requestAnimationFrame(()=>{var a;t>=0&&((a=w.value)==null||a.scrollToIndex(t))})}}),E(()=>e.items,(t,a)=>{l.value||P.value&&!a.length&&t.length&&(l.value=!0)}),X(()=>{const t=!!(e.chips||n.chip),a=!!(!e.hideNoData||D.value.length||n["prepend-item"]||n["append-item"]||n["no-data"]),f=o.value.length>0,C=U.filterProps(e),g=f||!P.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return r(U,A({ref:c},C,{modelValue:o.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":ce,focused:P.value,"onUpdate:focused":u=>P.value=u,validationValue:o.externalValue,counterValue:V.value,dirty:f,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":o.value.length,"v-select--selection-slot":!!n.selection},e.class],style:e.style,inputmode:"none",placeholder:g,"onClick:clear":ae,"onMousedown:control":oe,onBlur:ie,onKeydown:ue,"aria-label":b(K.value),title:b(K.value)}),{...n,default:()=>r(_,null,[r(Se,A({ref:k,modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent",contentClass:"v-select__content",disabled:M.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterLeave:se},te.value),{default:()=>[a&&r(Te,A({ref:R,selected:ee.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:le,onFocusin:re,onScrollPassive:ne,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},e.listProps),{default:()=>{var u,h,s;return[(u=n["prepend-item"])==null?void 0:u.call(n),!D.value.length&&!e.hideNoData&&(((h=n["no-data"])==null?void 0:h.call(n))??r(G,{title:b(e.noDataText)},null)),r(Le,{ref:w,renderless:!0,items:D.value},{default:y=>{var $;let{item:m,index:T,itemRef:v}=y;const N=A(m.props,{ref:v,key:T,onClick:()=>L(m,null)});return(($=n.item)==null?void 0:$.call(n,{item:m,index:T,props:N}))??r(G,A(N,{role:"option"}),{prepend:de=>{let{isSelected:fe}=de;return r(_,null,[e.multiple&&!e.hideSelected?r(Oe,{key:m.value,modelValue:fe,ripple:!1,tabindex:"-1"},null):void 0,m.props.prependAvatar&&r(Ie,{image:m.props.prependAvatar},null),m.props.prependIcon&&r(J,{icon:m.props.prependIcon},null)])}})}}),(s=n["append-item"])==null?void 0:s.call(n)]}})]}),o.value.map((u,h)=>{function s(v){v.stopPropagation(),v.preventDefault(),L(u,!1)}const y={"onClick:close":s,onKeydown(v){v.key!=="Enter"&&v.key!==" "||(v.preventDefault(),v.stopPropagation(),s(v))},onMousedown(v){v.preventDefault(),v.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},m=t?!!n.chip:!!n.selection,T=m?ye(t?n.chip({item:u,index:h,props:y}):n.selection({item:u,index:h})):void 0;if(!(m&&!T))return r("div",{key:u.value,class:"v-select__selection"},[t?n.chip?r(Re,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[T]}):r(we,A({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},y),null):T??r("span",{class:"v-select__selection-text"},[u.title,e.multiple&&h<o.value.length-1&&r("span",{class:"v-select__selection-comma"},[Ve(",")])])])})]),"append-inner":function(){var y;for(var u=arguments.length,h=new Array(u),s=0;s<u;s++)h[s]=arguments[s];return r(_,null,[(y=n["append-inner"])==null?void 0:y.call(n,...h),e.menuIcon?r(J,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Q({isFocused:P,menu:l,select:L},c)}}),Ke=H({...Be(),...Pe()},"VForm"),Je=Z()({name:"VForm",props:Ke(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,I){let{slots:n,emit:b}=I;const c=Ce(e),k=B();function w(l){l.preventDefault(),c.reset()}function i(l){const d=l,p=c.validate();d.then=p.then.bind(p),d.catch=p.catch.bind(p),d.finally=p.finally.bind(p),b("submit",d),d.defaultPrevented||p.then(S=>{var V;let{valid:o}=S;o&&((V=k.value)==null||V.submit())}),d.preventDefault()}return X(()=>{var l;return r("form",{ref:k,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:w,onSubmit:i},[(l=n.default)==null?void 0:l.call(n,c)])}),Q(c,k)}});export{Je as V,Ge as a};
