"use strict";(self.webpackChunkvegafusion_jupyter=self.webpackChunkvegafusion_jupyter||[]).push([[568],{568:(e,s,n)=>{n.r(s),n.d(s,{MODULE_NAME:()=>i.o,MODULE_VERSION:()=>i.Y,VegaFusionModel:()=>t.VegaFusionModel,VegaFusionView:()=>t.VegaFusionView});var i=n(657),t=n(367)},657:(e,s,n)=>{n.d(s,{Y:()=>t,o:()=>l});const i=n(147),t=i.version,l=i.name},367:(e,s,n)=>{n.r(s),n.d(s,{VegaFusionModel:()=>a,VegaFusionView:()=>u});var i=n(759),t=n(744),l=n(625),o=n(657);class a extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:a.model_name,_model_module:a.model_module,_model_module_version:a.model_module_version,_view_name:a.view_name,_view_module:a.view_module,_view_module_version:a.view_module_version,spec:null,full_vega_spec:null,client_vega_spec:null,server_vega_spec:null,vegafusion_handle:null,verbose:null,debounce_wait:30,debounce_max_wait:60,_request_msg:null,_response_msg:null})}}a.serializers=Object.assign(Object.assign({},i.DOMWidgetModel.serializers),{_request_msg:{serialize:e=>e.buffer?new DataView(e.buffer.slice(0)):null}}),a.model_name="VegaFusionModel",a.model_module=o.o,a.model_module_version=o.Y,a.view_name="VegaFusionView",a.view_module=o.o,a.view_module_version=o.Y;class u extends i.DOMWidgetView{async render(){const{embedVegaFusion:e}=await n.e(288).then(n.t.bind(n,288,23));this.embedVegaFusion=e;const{compile:s}=await n.e(397).then(n.t.bind(n,397,23));this.vegalite_compile=s,this.vegaThemes=Object.assign({},t),this.value_changed(),this.model.on("change:spec",this.value_changed,this),this.model.on("change:verbose",this.value_changed,this),this.model.on("change:debounce_wait",this.value_changed,this),this.model.on("change:debounce_max_wait",this.value_changed,this),this.model.on("change:_response_msg",(()=>{const e=this.model.get("_response_msg");if(null!==e){this.model.get("verbose")&&(console.log("VegaFusion(js): Received response"),console.log(e.buffer));const s=new Uint8Array(e.buffer);this.vegafusion_handle.receive(s)}}))}value_changed(){var e,s,n,i;const t=this.model.get("spec");if(null!==t){const o=JSON.parse(t),a=(null!==(s=(null!==(e=o.usermeta)&&void 0!==e?e:{}).embedOptions)&&void 0!==s?s:{}).theme;if(null!=a){const e=this.vegaThemes[a];null!=e&&(o.config=(0,l.mergeConfig)(null!==(n=o.config)&&void 0!==n?n:{},e))}let u;if((null!==(i=o.$schema)&&void 0!==i?i:"").endsWith("schema/vega/v5.json"))u=t;else{const e=this.vegalite_compile(o);u=JSON.stringify(e.spec,null,2)}const r={verbose:this.model.get("verbose")||!1,debounce_wait:this.model.get("debounce_wait")||30,debounce_max_wait:this.model.get("debounce_max_wait")};this.vegafusion_handle=this.embedVegaFusion(this.el,u,(e=>{this.model.get("verbose")&&console.log("VegaFusion(js): Send request"),this.model.set("_request_msg",new DataView(e.buffer)),this.touch(),this.model.set("_request_msg",{})}),r),this.model.set("full_vega_spec",u),this.model.set("client_vega_spec",this.vegafusion_handle.client_spec_json()),this.model.set("server_vega_spec",this.vegafusion_handle.server_spec_json()),this.model.set("comm_plan",this.vegafusion_handle.comm_plan_json()),this.touch()}}}},147:e=>{e.exports=JSON.parse('{"name":"vegafusion-jupyter","version":"1.6.8","description":"Altair Jupyter Widget library that relies on VegaFusion for serverside calculations","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","dist/*.wasm","css/*.css","css/*.scss","images/*.svg"],"homepage":"https://github.com/hex-inc/vegafusion","bugs":{"url":"https://github.com/hex-inc/vegafusion/issues"},"license":"BSD-3-Clause","author":{"name":"Jon Mease","email":"jon@vegafusion.io"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/jonmmease/vegafusion"},"scripts":{"build:dev":"npm run build:lib && npm run build:nbextension && npm run build:labextension:dev && pip install --force-reinstall --no-deps .","build:prod":"npm run clean && npm run build:lib && npm run build:nbextension && npm run build:labextension","build:labextension":"jupyter-labextension build .","build:labextension:dev":"jupyter-labextension build --development True .","build:lib":"tsc && sass scss:css","build:nbextension":"webpack","clean":"npm run clean:lib && npm run clean:dist && npm run clean:nbextension && npm run clean:labextension","clean:dist":"rimraf dist","clean:lib":"rimraf lib","clean:labextension":"rimraf vegafusion_jupyter/labextension","clean:nbextension":"rimraf vegafusion_jupyter/nbextension/* && cp src/nbextension/extension.js vegafusion_jupyter/nbextension/","lint":"eslint . --ext .ts,.tsx --fix","lint:check":"eslint . --ext .ts,.tsx","prepack":"npm run build:prod","test":"jest","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:labextension":"jupyter-labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^4 || ^5 || ^6","@jupyterlab/notebook":"^3 || ^4","marked":"^4.0.10","vega":"^5.25.0","vega-lite":"^5.8.0","vega-themes":"^2.13.0","vegafusion-embed":"../../javascript/vegafusion-embed","vegafusion-wasm":"../../vegafusion-wasm/pkg"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyterlab/builder":"^4.0.5","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/jest":"^26.0.0","@types/webpack-env":"^1.16.3","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","css-loader":"6.5.1","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","sass":"^1.45.2","source-map-loader":"^1.1.3","style-loader":"^1.0.0","svg-inline-loader":"^0.8.2","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.65.0","webpack-cli":"^4.9.1","webpack-require-from":"^1.8.6"},"jupyterlab":{"extension":"lib/plugin","outputDir":"vegafusion_jupyter/labextension/","webpackConfig":"webpack.config.experimental.js","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);