"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[811],{89033:(t,e,r)=>{r.d(e,{Z:()=>g});var i=r(4942),s=r(36750),o=r(49331),n=r(84287),a=r(39450);function u(t,e){const r={};for(const i in t)e.includes(i)||(r[i]=t[i]);return r}class g extends s.Z{constructor(){super(...arguments),(0,i.Z)(this,"state",void 0)}initializeAggregationLayer(t){super.initializeState(this.context),this.setState({ignoreProps:u(this.constructor._propTypes,t.data.props),dimensions:t})}updateState(t){super.updateState(t);const{changeFlags:e}=t;if(e.extensionsChanged){const t=this.getShaders({});t&&t.defines&&(t.defines.NON_INSTANCED_MODEL=1),this.updateShaders(t)}this._updateAttributes()}updateAttributes(t){this.setState({changedAttributes:t})}getAttributes(){return this.getAttributeManager().getShaderAttributes()}getModuleSettings(){const{viewport:t,mousePosition:e,gl:r}=this.context;return Object.assign(Object.create(this.props),{viewport:t,mousePosition:e,pickingActive:0,devicePixelRatio:(0,a.w)(r)})}updateShaders(t){}isAggregationDirty(t,e){void 0===e&&(e={});const{props:r,oldProps:i,changeFlags:s}=t,{compareAll:n=!1,dimension:a}=e,{ignoreProps:u}=this.state,{props:g,accessors:d=[]}=a,{updateTriggersChanged:c}=s;if(s.dataChanged)return!0;if(c){if(c.all)return!0;for(const t of d)if(c[t])return!0}if(n)return!!s.extensionsChanged||(0,o.tg)({oldProps:i,newProps:r,ignoreProps:u,propTypes:this.constructor._propTypes});for(const t of g)if(r[t]!==i[t])return!0;return!1}isAttributeChanged(t){const{changedAttributes:e}=this.state;return t?e&&void 0!==e[t]:!function(t){let e=!0;for(const r in t){e=!1;break}return e}(e)}_getAttributeManager(){return new n.Z(this.context.gl,{id:this.props.id,stats:this.context.stats})}}(0,i.Z)(g,"layerName","AggregationLayer")},79543:(t,e,r)=>{r.d(e,{K:()=>i,P:()=>s});const i=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function s(t,e,r){let i;if(void 0===e&&(e=!1),void 0===r&&(r=Float32Array),Number.isFinite(t[0]))i=new r(t);else{i=new r(4*t.length);let e=0;for(let r=0;r<t.length;r++){const s=t[r];i[e++]=s[0],i[e++]=s[1],i[e++]=s[2],i[e++]=Number.isFinite(s[3])?s[3]:255}}if(e)for(let t=0;t<i.length;t++)i[t]/=255;return i}},36750:(t,e,r)=>{r.d(e,{Z:()=>u});var i=r(4942),s=r(5259),o=r(11482),n=r(77552),a=r(33230);class u extends s.Z{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every((t=>t.isLoaded))}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo(t){let{info:e}=t;const{object:r}=e;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id?(e.object=r.__source.object,e.index=r.__source.index,e):e}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){const{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||e}getSubLayerRow(t,e,r){return t.__source={parent:this,object:e,index:r},t}getSubLayerAccessor(t){if("function"==typeof t){const e={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(e.index=r.__source.index,t(r.__source.object,e)):t(r,i)}return t}getSubLayerProps(t){var e;void 0===t&&(t={});const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:n,highlightedObjectIndex:u,autoHighlight:g,highlightColor:d,coordinateSystem:c,coordinateOrigin:p,wrapLongitude:l,positionFormat:h,modelMatrix:b,extensions:f,fetch:y,operation:_,_subLayerProps:S}=this.props,L={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:n,highlightedObjectIndex:u,autoHighlight:g,highlightColor:d,coordinateSystem:c,coordinateOrigin:p,wrapLongitude:l,positionFormat:h,modelMatrix:b,extensions:f,fetch:y,operation:_},m=S&&t.id&&S[t.id],v=m&&m.updateTriggers,x=t.id||"sublayer";if(m){const e=this.props[a.Wb],r=t.type?t.type._propTypes:{};for(const t in m){const i=r[t]||e[t];i&&"accessor"===i.type&&(m[t]=this.getSubLayerAccessor(m[t]))}}Object.assign(L,t,m),L.id="".concat(this.props.id,"-").concat(x),L.updateTriggers={all:null===(e=this.props.updateTriggers)||void 0===e?void 0:e.all,...t.updateTriggers,...v};for(const t of f){const e=t.getSubLayerProps.call(this,t);e&&Object.assign(L,e,{updateTriggers:Object.assign(L.updateTriggers,e.updateTriggers)})}return L}_updateAutoHighlight(t){for(const e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const t=this.renderLayers();r=(0,n.x)(t,Boolean),this.internalState.subLayers=r}(0,o.Z)("compositeLayer.renderLayers",this,i,r);for(const t of r)t.parent=this}}(0,i.Z)(u,"layerName","CompositeLayer")},2429:(t,e,r)=>{r.r(e),r.d(e,{default:()=>h,getLayer:()=>l});var i=r(85672),s=(r(67294),r(61988)),o=r(45511),n=r(58371),a=r(63241),u=r(89503),g=r(89691),d=r(51805),c=r(11965);function p(t){return(0,c.tZ)("div",{className:"deckgl-tooltip"},(0,c.tZ)(d.Z,{label:(0,s.t)("Centroid (Longitude and Latitude): "),value:`(${null==t?void 0:t.coordinate[0]}, ${null==t?void 0:t.coordinate[1]})`}))}const l=(t,e,r,s)=>{var g,d,c,l;const h=t,{intensity:b=1,radius_pixels:f=30,aggregation:y="SUM",js_data_mutator:_,linear_color_scheme:S}=h;let L=e.data.features;_&&(L=(0,a.Z)(h.js_data_mutator)(L));const m=null==(g=(0,o.Z)())||null==(d=g.get(S))?void 0:d.createLinearScale([0,6]),v=null==m||null==(c=m.range())||null==(l=c.map((t=>(0,u.hexToRGB)(t))))?void 0:l.reverse();return new i.Z({id:`heatmp-layer-${h.slice_id}`,data:L,intensity:b,radiusPixels:f,colorRange:v,aggregation:y.toUpperCase(),getPosition:t=>t.position,getWeight:t=>t.weight?t.weight:1,...(0,n.N)(h,s,p)})},h=(0,g.G)(l,(function(t){return t.map((t=>t.position))}))}}]);
//# sourceMappingURL=d32101b579e7ec0b7290.chunk.js.map