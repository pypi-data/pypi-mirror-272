"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6789],{9386:(t,e,s)=>{s.d(e,{Z:()=>n,m:()=>d});var a=s(761),o=s(1599),r=s(8373);const i={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};var l=s(5103);const d=t=>{const{borderRadius:e,popoverColor:s,textColor3:a,dividerColor:o,textColor2:r,primaryColorPressed:l,textColorDisabled:d,primaryColor:n,opacityDisabled:u,hoverColor:c,fontSizeSmall:h,fontSizeMedium:p,fontSizeLarge:g,fontSizeHuge:S,heightSmall:m,heightMedium:b,heightLarge:_,heightHuge:x}=t;return Object.assign(Object.assign({},i),{optionFontSizeSmall:h,optionFontSizeMedium:p,optionFontSizeLarge:g,optionFontSizeHuge:S,optionHeightSmall:m,optionHeightMedium:b,optionHeightLarge:_,optionHeightHuge:x,borderRadius:e,color:s,groupHeaderTextColor:a,actionDividerColor:o,optionTextColor:r,optionTextColorPressed:l,optionTextColorDisabled:d,optionTextColorActive:n,optionOpacityDisabled:u,optionCheckColor:n,optionColorPending:c,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:c,actionTextColor:r,loadingColor:n})},n=(0,l.j)({name:"InternalSelectMenu",common:r.Z,peers:{Scrollbar:o.Z,Empty:a.Z},self:d})},7115:(t,e,s)=>{s.d(e,{Z:()=>a});const a={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"}},421:(t,e,s)=>{s.d(e,{Z:()=>l});var a=s(5944),o=s(8373),r=s(1301),i=s(7115);const l=(0,s(5103).j)({name:"InternalSelection",common:o.Z,peers:{Popover:r.Z},self:t=>{const{borderRadius:e,textColor2:s,textColorDisabled:o,inputColor:r,inputColorDisabled:l,primaryColor:d,primaryColorHover:n,warningColor:u,warningColorHover:c,errorColor:h,errorColorHover:p,borderColor:g,iconColor:S,iconColorDisabled:m,clearColor:b,clearColorHover:_,clearColorPressed:x,placeholderColor:v,placeholderColorDisabled:w,fontSizeTiny:C,fontSizeSmall:y,fontSizeMedium:f,fontSizeLarge:M,heightTiny:D,heightSmall:I,heightMedium:Z,heightLarge:$}=t;return Object.assign(Object.assign({},i.Z),{fontSizeTiny:C,fontSizeSmall:y,fontSizeMedium:f,fontSizeLarge:M,heightTiny:D,heightSmall:I,heightMedium:Z,heightLarge:$,borderRadius:e,textColor:s,textColorDisabled:o,placeholderColor:v,placeholderColorDisabled:w,color:r,colorDisabled:l,colorActive:r,border:`1px solid ${g}`,borderHover:`1px solid ${n}`,borderActive:`1px solid ${d}`,borderFocus:`1px solid ${n}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${(0,a.zX)(d,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${(0,a.zX)(d,{alpha:.2})}`,caretColor:d,arrowColor:S,arrowColorDisabled:m,loadingColor:d,borderWarning:`1px solid ${u}`,borderHoverWarning:`1px solid ${c}`,borderActiveWarning:`1px solid ${u}`,borderFocusWarning:`1px solid ${c}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${(0,a.zX)(u,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${(0,a.zX)(u,{alpha:.2})}`,colorActiveWarning:r,caretColorWarning:u,borderError:`1px solid ${h}`,borderHoverError:`1px solid ${p}`,borderActiveError:`1px solid ${h}`,borderFocusError:`1px solid ${p}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${(0,a.zX)(h,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${(0,a.zX)(h,{alpha:.2})}`,colorActiveError:r,caretColorError:h,clearColor:b,clearColorHover:_,clearColorPressed:x})}})},761:(t,e,s)=>{s.d(e,{Z:()=>i,m:()=>r});const a={iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};var o=s(8373);const r=t=>{const{textColorDisabled:e,iconColor:s,textColor2:o,fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d}=t;return Object.assign(Object.assign({},a),{fontSizeSmall:r,fontSizeMedium:i,fontSizeLarge:l,fontSizeHuge:d,textColor:e,iconColor:s,extraTextColor:o})},i={name:"Empty",common:o.Z,self:r}},1301:(t,e,s)=>{s.d(e,{Z:()=>i,m:()=>r});var a=s(8373);const o={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"},r=t=>{const{boxShadow2:e,popoverColor:s,textColor2:a,borderRadius:r,fontSize:i,dividerColor:l}=t;return Object.assign(Object.assign({},o),{fontSize:i,borderRadius:r,color:s,dividerColor:l,textColor:a,boxShadow:e})},i={name:"Popover",common:a.Z,self:r}},9918:(t,e,s)=>{s.d(e,{Z:()=>l,m:()=>i});var a=s(421),o=s(9386),r=s(8373);function i(t){const{boxShadow2:e}=t;return{menuBoxShadow:e}}const l=(0,s(5103).j)({name:"Select",common:r.Z,peers:{InternalSelection:a.Z,InternalSelectMenu:o.Z},self:i})},211:(t,e,s)=>{s.d(e,{Z:()=>a});const a={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px",closeMarginRtl:"0 4px 0 0"}},9434:(t,e,s)=>{s.r(e),s.d(e,{default:()=>ut});var a=s(6252),o=s(3577);const r={class:"card"},i={class:"card-body"},l=(0,a._)("br",null,null,-1),d=["href"],n=(0,a._)("hr",null,null,-1),u={class:"row"},c=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Editing Status"),(0,a._)("p",{class:"text-instructions"}," Move the status' around to reorder them. Double click to edit text and settings. ")],-1),h={class:"col-md-8"},p=(0,a._)("strong",null,"Status List",-1),g={key:0,class:"error"},S=(0,a._)("br",null,null,-1),m=["data-id"],b=["data-id"],_=["onClick"],x=(0,a._)("div",{class:"spacer"},null,-1);var v=s(6542),w=s(9980),C=s.n(w),y=s(3138),f=s(5808);const M={class:"modal fade",id:"confirmStatusDeleteModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},D={class:"modal-dialog"},I={class:"modal-content"},Z=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title"},"Confirm Deletion"),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmStatusDeleteModalClose"})],-1),$={class:"modal-body"},z=(0,a._)("div",{class:"alert alert-warning"},[(0,a._)("h4",null,"WARNING"),(0,a._)("p",null," This process can not be reversed. Deleting a status will remove it completely. "),(0,a._)("p",null," All objects connected with this status will have to migrate to a new status. This is also permanent and can not be reversed. ")],-1),O={class:"row"},L=(0,a._)("strong",null,"Status: ",-1),k=(0,a._)("strong",null,"Higher Order Status: ",-1),j=(0,a._)("div",{class:"spacer"},null,-1),T={class:"row"},E=(0,a._)("p",null,"Please select an appropriate status to migrate too.",-1),H=(0,a._)("label",null,[(0,a._)("strong",null,"New Status for the objects")],-1),P=(0,a._)("br",null,null,-1),U={class:"modal-footer"},A=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),W=["disabled"];var N=s(2001),q=s(989);const R={name:"ObjectStatusConfirmDelete",components:{NSelect:N.Z},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},data:()=>({migrationStatusIdModel:"",newStatusList:[]}),watch:{statusId(){this.migrationStatusIdModel="",this.newStatusList=this.statusList.filter((t=>parseInt(t.status_id)!==parseInt(this.statusId))).map((t=>({label:t.status,value:t.status_id})))}},computed:{...(0,q.Se)({destination:"getDestination",rootUrl:"getRootUrl"})},methods:{deleteStatus(){this.$store.dispatch("newToast",{header:"Removing Status",message:"Please wait whilst we remove the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"remove_status"});const t=new FormData;t.set("status_id",`${this.statusId}`),t.set("migration_status_id",this.migrationStatusIdModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/delete/`,t).then((()=>{this.$store.dispatch("newToast",{header:"Status Successfully Removed",message:"Status has been removed",extra_classes:"bg-success",unique_type:"remove_status"}),this.$emit("delete_status"),document.getElementById("confirmStatusDeleteModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Removing Status",message:`Sorry, we could not remove the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"remove_status"})}))}}};var F=s(3744);const B=(0,F.Z)(R,[["render",function(t,e,s,r,i,l){const d=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("div",D,[(0,a._)("div",I,[Z,(0,a._)("div",$,[(0,a.kq)(" WARNING "),z,(0,a._)("div",O,[(0,a._)("p",null,[L,(0,a.Uk)((0,o.toDisplayString)(s.statusData.status),1)]),(0,a._)("p",null,[k,(0,a.Uk)((0,o.toDisplayString)(s.statusData.higherOrderStatus),1)])]),j,(0,a._)("div",T,[E,H,(0,a.Wm)(d,{options:i.newStatusList,value:i.migrationStatusIdModel,"onUpdate:value":e[0]||(e[0]=t=>i.migrationStatusIdModel=t),style:{"z-index":"9999"},class:"new-card-destination"},null,8,["options","value"])]),P]),(0,a._)("div",U,[A,(0,a._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>l.deleteStatus&&l.deleteStatus(...t)),disabled:null===this.migrationStatusIdModel||""===this.migrationStatusIdModel}," Delete Status ",8,W)])])])])}]]);var X=s(9963);const V={class:"modal fade",id:"objectStatusModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true","data-bs-keyboard":"false"},G={class:"modal-dialog"},J={class:"modal-content"},Y=(0,a._)("div",{class:"modal-header"},[(0,a._)("h5",{class:"modal-title",id:"exampleModalLabel"}," Add/Edit Status "),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"objectStatusModalClose"})],-1),K={class:"modal-body"},Q={class:"form-group"},tt={key:0,class:"error"},et=(0,a._)("div",{class:"spacer"},null,-1),st={class:"form-group"},at=(0,a._)("label",null,"Higher Order Status",-1),ot={class:"modal-footer"},rt=(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),it=["disabled"],lt={name:"ObjectStatusModal",components:{NSelect:N.Z},props:{statusData:{type:Object,default:()=>({higherOrderStatus:"Closed",status:""})},statusId:{type:Number,default:0},statusList:{type:Array,default:()=>[]}},computed:{...(0,q.Se)({destination:"getDestination",rootUrl:"getRootUrl"})},data:()=>({higherOrderStatusList:[{label:"Backlog",value:"Backlog"},{label:"Blocked",value:"Blocked"},{label:"Normal",value:"Normal"},{label:"Closed",value:"Closed"}],higherOrderStatusModel:"Normal",isDuplicate:!1,localStatusModel:""}),watch:{statusId(){this.higherOrderStatusModel=this.statusData.higherOrderStatus,this.localStatusModel=this.statusData.status},localStatusModel(){const t=this.statusList.filter((t=>t.status.toLowerCase()===this.localStatusModel.toLowerCase())).length;this.isDuplicate=t>0}},methods:{editStatus(){this.$store.dispatch("newToast",{header:"Updating Status",message:"Please wait whilst we update the status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_status"});const t=new FormData;t.set("status_id",this.statusId.toString()),t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/update/`,t).then((t=>{this.$emit("update_status",{statusId:this.statusId,status:this.localStatusModel,higherOrderStatus:this.higherOrderStatusModel}),this.$store.dispatch("newToast",{header:"Successfully updated status",message:"Status has been updated",extra_classes:"bg-success",unique_type:"update_status"}),document.getElementById("objectStatusModalClose").click()})).catch((t=>{this.$store.dispatch("newToast",{header:"Error updating status",message:`Sorry, but we could not update your status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"update_status"})}))},newStatus(){this.$store.dispatch("newToast",{header:"Creating New Status",message:"Please wait whilst we create new status",extra_classes:"bg-warning text-dark",delay:0,unique_type:"create_status"});const t=new FormData;t.set("status",this.localStatusModel),t.set("higher_order_status",this.higherOrderStatusModel),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/create/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Created New Status",message:"New Status has been created successfully",extra_classes:"bg-success",unique_type:"create_status"}),this.$emit("add_status",t.data),document.getElementById("objectStatusModalClose").click(),this.localStatusModel="",this.higherOrderStatusModel="Normal"})).catch((t=>{this.$store.dispatch("newToast",{header:"Error Creating New Status",message:`Sorry, we could not create the status. Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"create_status"})}))},saveChanges(){0===parseInt(this.statusId)?this.newStatus():this.editStatus()}}},dt=(0,F.Z)(lt,[["render",function(t,e,s,o,r,i){const l=(0,a.up)("n-select");return(0,a.wg)(),(0,a.iD)("div",V,[(0,a._)("div",G,[(0,a._)("div",J,[Y,(0,a._)("div",K,[(0,a._)("div",Q,[(0,a._)("label",null,[(0,a.Uk)(" Status "),r.isDuplicate?((0,a.wg)(),(0,a.iD)("span",tt," Sorry, there is a status of that name already ")):(0,a.kq)("v-if",!0)]),(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.localStatusModel=t),type:"text",class:"form-control"},null,512),[[X.vModelText,r.localStatusModel]])]),et,(0,a._)("div",st,[at,(0,a.Wm)(l,{value:r.higherOrderStatusModel,"onUpdate:value":e[1]||(e[1]=t=>r.higherOrderStatusModel=t),options:r.higherOrderStatusList},null,8,["value","options"])])]),(0,a._)("div",ot,[rt,(0,a._)("button",{type:"button",class:"btn btn-primary",disabled:r.isDuplicate,onClick:e[2]||(e[2]=(...t)=>i.saveChanges&&i.saveChanges(...t))}," Save changes ",8,it)])])])])}]]),nt={name:"ObjectStatusInformation",props:{destination:{type:String,default:""},nearbeachTitle:{type:String,default:"Status Editor"},objectStatusResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},mixins:[f.Z],components:{draggable:C(),Icon:v.JO,ObjectStatusConfirmDelete:B,ObjectStatusModal:dt},data(){return{localStatusList:this.objectStatusResults,statusData:{higherOrderStatus:"Closed",status:""},statusId:0}},methods:{addStatus(t){this.localStatusList.push(t[0])},delete_status(){this.localStatusList=this.localStatusList.filter((t=>t.status_id!==this.statusId))},editStatus(t){const e=parseInt(t.target.dataset.id);this.updateProps(e),new y.u_(document.getElementById("objectStatusModal")).show()},newStatus(){this.statusData={higherOrderStatus:"Normal",status:""},this.statusId=0,new y.u_(document.getElementById("objectStatusModal")).show()},removeStatus(t){this.updateProps(t),new y.u_(document.getElementById("confirmStatusDeleteModal")).show()},updateProps(t){const e=this.localStatusList.filter((e=>parseInt(e.status_id)===t));0!==e.length&&(this.statusData={higherOrderStatus:e[0].higher_order_status,status:e[0].status},this.statusId=t)},updateSortOrder(){this.$store.dispatch("newToast",{header:"Updating Sort Order",message:"Please wait, as we update the sort order",extra_classes:"bg-warning text-dark",delay:0,unique_type:"sort_order"});const t=new FormData;this.localStatusList.forEach((e=>{t.append("status_id",e.status_id)})),this.axios.post(`${this.rootUrl}object_status_information/${this.destination}/reorder/`,t).then((t=>{this.$store.dispatch("newToast",{header:"Updated Sort Order",message:"Sort Order has been updated",extra_classes:"bg-success",unique_type:"sort_order"})})).catch((t=>{this.$store.dispatch("newToast",{header:"Failed Updating Sort Order",message:`We've encounted an issue updating the sort order: Error -> ${t}`,extra_classes:"bg-danger",delay:0,unique_type:"sort_order"})}))},updateStatus(t){const e=parseInt(t.statusId);if(void 0===e)return void this.$store.dispatch("newToast",{header:"Error updating card",message:"Please reload the page. We have experienced an in page issue",extra_classes:"bg-danger",delay:0});const s=this.localStatusList.findIndex((t=>t.status_id===e));this.localStatusList[s].higher_order_status=t.higherOrderStatus,this.localStatusList[s].status=t.status}},async beforeMount(){await this.$store.dispatch("processThemeUpdate",{theme:this.theme})},mounted(){this.$store.commit({type:"updateDestination",destination:this.destination})}},ut=(0,F.Z)(nt,[["render",function(t,e,s,v,w,C){const y=(0,a.up)("Icon"),f=(0,a.up)("draggable"),M=(0,a.up)("object-status-modal"),D=(0,a.up)("object-status-confirm-delete");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",r,[(0,a._)("div",i,[(0,a._)("h1",null,(0,o.toDisplayString)(s.nearbeachTitle),1),l,(0,a._)("a",{href:`${this.rootUrl}object_status_list/`}," Go back to object status list ",8,d),n,(0,a._)("div",u,[c,(0,a._)("div",h,[p,0===w.localStatusList.length?((0,a.wg)(),(0,a.iD)("span",g," Please create at least one status ")):(0,a.kq)("v-if",!0),S,(0,a.Wm)(f,{modelValue:w.localStatusList,"onUpdate:modelValue":e[1]||(e[1]=t=>w.localStatusList=t),"item-key":"status_id","ghost-class":"ghost",onChange:C.updateSortOrder},{item:(0,a.w5)((({element:s})=>[((0,a.wg)(),(0,a.iD)("div",{class:"sortable",key:s.status_id,"data-id":s.status_id,onDblclick:e[0]||(e[0]=t=>C.editStatus(t))},[((0,a.wg)(),(0,a.iD)("strong",{key:s.status_id,"data-id":s.status_id},(0,o.toDisplayString)(s.status),9,b)),w.localStatusList.length>1?((0,a.wg)(),(0,a.iD)("span",{key:0,onClick:t=>C.removeStatus(s.status_id)},[(0,a.Wm)(y,{icon:t.icons.xCircle},null,8,["icon"])],8,_)):(0,a.kq)("v-if",!0)],40,m))])),_:1},8,["modelValue","onChange"]),x,(0,a._)("button",{onClick:e[2]||(e[2]=(...t)=>C.newStatus&&C.newStatus(...t)),class:"btn btn-primary"}," New Status ")])])])]),(0,a.Wm)(M,{"status-data":w.statusData,"status-id":w.statusId,"status-list":w.localStatusList,onAdd_status:e[3]||(e[3]=t=>C.addStatus(t)),onUpdate_status:e[4]||(e[4]=t=>C.updateStatus(t))},null,8,["status-data","status-id","status-list"]),(0,a.Wm)(D,{"status-data":w.statusData,"status-id":w.statusId,"status-list":w.localStatusList,onDelete_status:C.delete_status},null,8,["status-data","status-id","status-list","onDelete_status"])],64)}]])},5808:(t,e,s)=>{s.d(e,{Z:()=>Z});var a=s(3985),o=s(5555),r=s(1826),i=s(6443),l=s(1327),d=s(8521),n=s(1056),u=s(4324),c=s(9672),h=s(9867),p=s(1239),g=s(5004),S=s(1321),m=s(1216),b=s(5550),_=s(7702),x=s(7903),v=s(2606),w=s(3843),C=s(2393),y=s(3360),f=s(9714),M=s(1323),D=s(2610),I=s(5968);const Z={data:()=>({icons:{arrowUp:a.Z,bugIcon:o.Z,bxBriefcase:r.Z,cardChecklist:i.Z,clipboardIcon:l.Z,documentPdf:d.Z,documentText:n.Z,folderIcon:u.Z,groupPresentation:c.Z,imageIcon:h.Z,infoCircle:p.Z,linkIcon:g.Z,linkIcon2:S.Z,linkOut:m.Z,mailIcon:b.Z,microsoftExcel:_.Z,microsoftPowerpoint:x.Z,microsoftWord:v.Z,noteAdd:w.Z,objectStorage:C.Z,passwordIcon:y.Z,trashCan:f.Z,userIcon:M.Z,usersIcon:D.Z,xCircle:I.Z}})}}}]);