"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[4417],{3164:(e,t,o)=>{o.r(t),o.d(t,{default:()=>q});var r=o(6252),a=o(9963);const s={class:"card"},l={class:"card-body"},u=(0,r._)("h1",null,"Group Information",-1),n=(0,r._)("br",null,null,-1),d=["href"],p=(0,r._)("hr",null,null,-1),i={class:"row"},c=(0,r._)("div",{class:"col-md-4"},[(0,r._)("strong",null,"Group Information"),(0,r._)("p",{class:"text-instruction"}," Please edit the group information here. Please note - groups have to be unique! ")],-1),m={class:"col-md-8"},g={class:"form-group"},h=(0,r._)("label",null,"Group Name",-1),_={class:"form-group"},f=(0,r._)("label",null,"Parent Group",-1),b=(0,r._)("hr",null,null,-1),G={class:"row submit-row"},y={class:"col-md-12"};var v=o(5892),k=o(2001),w=o(3138);const D={class:"modal fade",id:"confirmGroupDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmGroupDelete","aria-hidden":"true"},U={class:"modal-dialog"},M={class:"modal-content"},x=(0,r._)("div",{class:"modal-header"},[(0,r._)("h5",{class:"modal-title",id:"confirmGroupDelete"}," Please confirm Group Deletion "),(0,r.kq)(" TASK INFORMATION "),(0,r._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmGroupDeleteButton"})],-1),$=(0,r._)("div",{class:"modal-body"}," Please confirm you would like to delete this group. This is permanent. ",-1),I={class:"modal-footer"},T={name:"ConfirmGroupDelete",computed:{...(0,o(989).Se)({rootUrl:"getRootUrl"})},props:{groupId:{type:Number,default:0}},methods:{closeModal(){document.getElementById("confirmGroupDeleteButton").click()},deleteGroup(){0!==this.groupId?this.axios.post(`${this.rootUrl}group_information/${this.groupId}/delete/`).then((()=>{window.location=`${this.rootUrl}search/group/`})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Deleting Group",message:`Sorry could not delete the group. Error -> ${e}`,extra_classes:"bg-danger",delay:0})})):this.$store.dispatch("newToast",{header:"Group ID not valid",message:"Sorry, current group ID is not valid",extra_classes:"bg-danger",delay:0})}}};var N=o(3744);const C=(0,N.Z)(T,[["render",function(e,t,o,a,s,l){return(0,r.wg)(),(0,r.iD)("div",D,[(0,r._)("div",U,[(0,r._)("div",M,[x,$,(0,r._)("div",I,[(0,r._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))}," No "),(0,r._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>l.deleteGroup&&l.deleteGroup(...e))}," Yes ")])])])])}]]);var R=o(624);const S={name:"GroupInformation",components:{ConfirmGroupDelete:C,NConfigProvider:v.Z,NSelect:k.Z},props:{groupResults:{type:Array,default:()=>[]},parentGroupResults:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},theme:{type:String,default:""}},data(){return{groupNameModel:this.groupResults[0].fields.group_name,parentGroupFixList:[],parentGroupModel:this.groupResults[0].fields.parent_group}},mixins:[R.Z],methods:{confirmDelete(){new w.u_(document.getElementById("confirmGroupDeleteModal")).show()},updateGroup(){const e=new FormData;e.set("group_name",this.groupNameModel),null!==this.parentGroupModel&&""!==this.parentGroupModel&&e.set("parent_group",this.parentGroupModel),this.$store.dispatch("newToast",{header:"Updated Group",message:"Updated Group. Please wait.",extra_classes:"bg-warning text-dark",delay:0,unique_type:"update_group_leader"}),this.axios.post(`${this.rootUrl}group_information/${this.groupResults[0].pk}/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Updated Group",message:"Successfully Update Group",extra_classes:"bg-success",delay:0,unique_type:"update_group_leader"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Updating Group",message:`We had an issue updating group. Error -> ${e}`,extra_classes:"bg-danger",delay:0,unique_type:"update_group_leader"})}))}},mounted(){const e=this.parentGroupResults.map((e=>({group_name:e.fields.group_name,label:e.fields.group_name,value:e.pk})));this.parentGroupFixList=e,this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},q=(0,N.Z)(S,[["render",function(e,t,o,v,k,w){const D=(0,r.up)("n-select"),U=(0,r.up)("confirm-group-delete"),M=(0,r.up)("n-config-provider");return(0,r.wg)(),(0,r.j4)(M,{theme:e.getTheme(o.theme)},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r._)("div",l,[u,n,(0,r._)("a",{href:`${this.rootUrl}search/group/`},"Back to group list",8,d),p,(0,r._)("div",i,[c,(0,r._)("div",m,[(0,r._)("div",g,[h,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>k.groupNameModel=e),class:"form-control"},null,512),[[a.vModelText,k.groupNameModel]])]),(0,r._)("div",_,[f,(0,r.Wm)(D,{value:k.parentGroupModel,"onUpdate:value":t[1]||(t[1]=e=>k.parentGroupModel=e),filterable:"",options:k.parentGroupFixList,clearable:""},null,8,["value","options"])])])]),(0,r.kq)(" Submit Button "),b,(0,r._)("div",G,[(0,r._)("div",y,[1!==parseInt(o.groupResults[0].pk)?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"btn btn-danger",onClick:t[2]||(t[2]=(...e)=>w.confirmDelete&&w.confirmDelete(...e))}," Delete Group ")):(0,r.kq)("v-if",!0),(0,r._)("button",{class:"btn btn-primary save-changes",onClick:t[3]||(t[3]=(...e)=>w.updateGroup&&w.updateGroup(...e))}," Update Group ")])])])]),(0,r.Wm)(U,{"group-id":o.groupResults[0].pk},null,8,["group-id"])])),_:1},8,["theme"])}]])},624:(e,t,o)=>{o.d(t,{Z:()=>a});var r=o(7449);const a={data:()=>({darkTheme:r.$}),methods:{getTheme:e=>"dark"===e?r.$:null}}}}]);