"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1793],{2156:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(6252),l=s(3577),r=s(9963);const i={class:"card"},o={class:"card-body"},n=(0,a._)("h1",null,"My Profile",-1),d=(0,a._)("hr",null,null,-1),u={class:"row"},m=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"User Details"),(0,a._)("p",{class:"text-instructions"},"Please update your details.")],-1),c={class:"col-md-8"},h=(0,a._)("strong",null,"Username: ",-1),p={class:"row"},_={class:"col-md-6"},v=(0,a._)("br",null,null,-1),g={class:"col-md-6"},f=(0,a._)("br",null,null,-1),y=(0,a._)("div",{class:"spacer"},null,-1),M={class:"row"},w={class:"col-md-6"},b=(0,a._)("label",null," Email: ",-1),U=(0,a._)("hr",null,null,-1),T={class:"row"},k=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Theme Preference"),(0,a._)("p",{class:"text-instructions"},"Please choose an appropriate theme for NearBeach")],-1),$={class:"col-md-4"},x={class:"form-group"},N=(0,a._)("label",null,"Theme",-1),S={key:0,class:"error"},P=(0,a._)("hr",null,null,-1),D={class:"row submit-row"},E={class:"col-md-12"};var R=s(2001),q=s(5705),L=s(760),Z=s(7939),C=s(624);const V={name:"ProfileInformation",setup:()=>({v$:(0,q.ZP)()}),props:{rootUrl:{type:String,default:"/"},staticUrl:{type:String,default:"/"},theme:{type:String,default:"light"},userResults:{type:Array,default:()=>[]}},components:{NSelect:R.Z,ValidationRendering:Z.Z},data(){return{currentTheme:this.theme,emailModel:this.userResults[0].email,firstNameModel:this.userResults[0].first_name,lastNameModel:this.userResults[0].last_name,showMessage:!1,themeList:[{label:"Light Theme",value:"light"},{label:"Dark Theme",value:"dark"}],themeModel:this.theme}},watch:{themeModel(){this.showMessage=!0}},mixins:[C.Z],validations:()=>({lastNameModel:{required:L.C1,maxLength:(0,L.BS)(255)},firstNameModel:{required:L.C1,maxLength:(0,L.BS)(255)}}),methods:{updateUser(){if(this.v$.$touch(),this.v$.$invalid)return void this.$store.dispatch("newToast",{header:"Please check validation",message:"Sorry, but can you please fix all validation issues.",extra_classes:"bg-warning text-dark",delay:0});const e=new FormData;e.set("username",this.userResults[0].id),e.set("first_name",this.firstNameModel),e.set("last_name",this.lastNameModel),e.set("theme",this.themeModel),this.showMessage=!1,document.documentElement.setAttribute("data-bs-theme",this.themeModel),this.$store.dispatch("newToast",{header:"Currently Updating",message:"Your Profile has been submitted. Please wait",unique_type:"update",extra_classes:"bg-warning text-dark",delay:0}),this.currentTheme=this.themeModel,this.axios.post(`${this.rootUrl}profile_information/update_data/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Update Successful",message:"Your Profile has been updated",unique_type:"update",extra_classes:"bg-success"})})).catch((e=>{this.$store.dispatch("newToast",{header:"Error updating profile",message:`Can not update your profile sorry. Error -> ${e}`,unique_type:"update",extra_classes:"bg-danger"})}))}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl,staticUrl:this.staticUrl})}},A=(0,s(3744).Z)(V,[["render",function(e,t,s,R,q,L){const Z=(0,a.up)("validation-rendering"),C=(0,a.up)("n-select"),V=(0,a.up)("n-config-provider");return(0,a.wg)(),(0,a.j4)(V,{theme:e.getTheme(q.currentTheme)},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",o,[n,d,(0,a._)("div",u,[m,(0,a._)("div",c,[(0,a._)("p",null,[h,(0,a.Uk)((0,l.toDisplayString)(s.userResults[0].username),1)]),(0,a._)("div",p,[(0,a._)("div",_,[(0,a._)("label",null,[(0,a.Uk)(" First Name: "),(0,a.Wm)(Z,{"error-list":R.v$.firstNameModel.$errors},null,8,["error-list"]),v]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>q.firstNameModel=e),class:"form-control"},null,512),[[r.vModelText,q.firstNameModel]])]),(0,a._)("div",g,[(0,a._)("label",null,[(0,a.Uk)(" Last Name: "),(0,a.Wm)(Z,{"error-list":R.v$.firstNameModel.$errors},null,8,["error-list"]),f]),(0,a.wy)((0,a._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>q.lastNameModel=e),class:"form-control"},null,512),[[r.vModelText,q.lastNameModel]])])]),y,(0,a._)("div",M,[(0,a._)("div",w,[b,(0,a.wy)((0,a._)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>q.emailModel=e),class:"form-control",disabled:"true"},null,512),[[r.vModelText,q.emailModel]])])])])]),U,(0,a.kq)(" THEME SETTINGS "),(0,a._)("div",T,[k,(0,a._)("div",$,[(0,a._)("div",x,[N,(0,a.Wm)(C,{value:q.themeModel,"onUpdate:value":t[3]||(t[3]=e=>q.themeModel=e),options:q.themeList},null,8,["value","options"]),q.showMessage?((0,a.wg)(),(0,a.iD)("p",S," Please update user details to save. ")):(0,a.kq)("v-if",!0)])])]),P,(0,a.kq)(" UPDATE USER "),(0,a._)("div",D,[(0,a._)("div",E,[(0,a._)("a",{href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[4]||(t[4]=(...e)=>L.updateUser&&L.updateUser(...e))}," Update User Details ")])])])])])),_:1},8,["theme"])}]])},7939:(e,t,s)=>{s.d(t,{Z:()=>i});var a=s(6252),l=s(3577);const r={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},i=(0,s(3744).Z)(r,[["render",function(e,t,s,r,i,o){return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.errorList,(e=>((0,a.wg)(),(0,a.iD)("span",{class:"error",key:e.$uid},(0,l.toDisplayString)(e.$message),1)))),128)}]])},624:(e,t,s)=>{s.d(t,{Z:()=>l});var a=s(7449);const l={data:()=>({darkTheme:a.$}),methods:{getTheme:e=>"dark"===e?a.$:null}}}}]);