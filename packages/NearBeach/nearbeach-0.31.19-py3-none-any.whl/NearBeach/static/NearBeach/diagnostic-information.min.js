"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[8001],{5531:(t,e,l)=>{l.r(e),l.d(e,{default:()=>pt});var a=l(6252),s=l(3577);const n={class:"card"},i={class:"card-body"},o=(0,a._)("h1",null,"Diagnostic Information",-1),r=(0,a._)("hr",null,null,-1),d=(0,a._)("h2",null,"Core Configurations",-1),u=(0,a._)("div",{class:"spacer"},null,-1),c={class:"row"},_=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Azure Storage"),(0,a._)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing Azure Storage ")],-1),m={class:"col-md-8"},g={class:"table"},h=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",{style:{width:"80%"}},"Configuration Field"),(0,a._)("td",{style:{width:"20%"}},"Is Filled In")])],-1),p=(0,a._)("td",null,"AZURE_STORAGE_CONNECTION_STRING",-1),S=(0,a._)("td",null,"AZURE_STORAGE_CONTAINER_NAME",-1),y=(0,a._)("hr",null,null,-1),f={class:"row"},w=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"S3/R2/Minio Storage"),(0,a._)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. Please ignore if you are not utilsing either S3, R2, or Minio storage solutions. ")],-1),v={class:"col-md-8"},D={class:"table"},E=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",{style:{width:"80%"}},"Configuration Field"),(0,a._)("td",{style:{width:"20%"}},"Is Filled In")])],-1),b=(0,a._)("td",null,"AWS_ACCESS_KEY_ID",-1),k=(0,a._)("td",null,"AWS_SECRET_ACCESS_KEY",-1),U=(0,a._)("td",null,"AWS_S3_ENDPOINT_URL (for minio)",-1),C=(0,a._)("td",null,"AWS_STORAGE_BUCKET_NAME",-1),I=(0,a._)("hr",null,null,-1),T={class:"row"},A=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Email"),(0,a._)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1),R={class:"col-md-8"},x={class:"table"},N=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",{style:{width:"80%"}},"Configuration Field"),(0,a._)("td",{style:{width:"20%"}},"Values")])],-1),B=(0,a._)("td",null,"SMTP_EMAIL_HOST",-1),F=(0,a._)("td",null,"SMTP_EMAIL_HOST_USER",-1),H=(0,a._)("hr",null,null,-1),P={class:"row"},O=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Allowed Hosts & CSRF Trusted URLS"),(0,a._)("p",{class:"text-instructions"}," Confirms these values have been set in your Django Settings file. ")],-1),$={class:"col-md-8"},L={class:"table"},K=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("td",{style:{width:"50%"}},"Configuration Field"),(0,a._)("td",{style:{width:"50%"}},"Is Filled In")])],-1),M=(0,a._)("td",null,"ALLOWED_HOSTS",-1),W=(0,a._)("td",null,"CSRF_TRUSTED_URLS",-1),Z=(0,a._)("hr",null,null,-1),z=(0,a._)("hr",null,null,-1);var j=l(624);const q={key:0,class:"row"},G=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Upload Document Test"),(0,a._)("p",{class:"text-instructions"},' Please click on the "Upload Document" button. It will upload a small text file to the blob storage. If there are any issues, they will print here. ')],-1),V={class:"col-md-8"},Y={key:0,class:"alert alert-danger"},J=(0,a._)("h1",null,"Upload Issues",-1),Q={key:1},X=[(0,a._)("div",{class:"alert alert-info"},"Currently sending data",-1)],tt={key:2,class:"row"},et=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Test Download"),(0,a._)("p",{class:"text-instructions"}," Please download the file and compare it's components with the UUID. They should match. ")],-1),lt={class:"col-md-8"},at=["href"];var st=l(989);const nt={name:"DiagnosticUpload",data:()=>({downloadLocation:"",uploadIssues:"",uploadState:"before_upload",uuidVerification:""}),computed:{...(0,st.Se)({rootUrl:"getRootUrl"})},methods:{uploadFile(){this.uploadState="sending";const t=crypto.randomUUID(),e=new Blob([t],{type:"text/plain"}),l=new FormData;l.set("document",e,"diagnostic-upload-test.txt"),l.set("uuid",t.toString()),this.axios.post(`${this.rootUrl}diagnostic_information/upload_test/`,l).then((e=>{this.uploadState="Completed",this.uuidVerification=t,this.downloadLocation=`${this.rootUrl}private/${e.data[0].document_key_id}/`})).catch((t=>{this.$store.dispatch("newToast",{header:"Error with Uploads",message:`Sorry could not upload document. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))}}};var it=l(3744);const ot=(0,it.Z)(nt,[["render",function(t,e,l,n,i,o){return"before_upload"===i.uploadState?((0,a.wg)(),(0,a.iD)("div",q,[G,(0,a._)("div",V,[(0,a._)("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...t)=>o.uploadFile&&o.uploadFile(...t))}," Upload Test "),""!==i.uploadIssues?((0,a.wg)(),(0,a.iD)("div",Y,[J,(0,a.Uk)(" "+(0,s.toDisplayString)(i.uploadIssues),1)])):(0,a.kq)("v-if",!0)])])):"sending"===i.uploadState?((0,a.wg)(),(0,a.iD)("div",Q,X)):((0,a.wg)(),(0,a.iD)("div",tt,[et,(0,a._)("div",lt,[(0,a._)("p",null,[(0,a._)("a",{href:i.downloadLocation,target:"_blank"},"Please click here to download the file.",8,at)]),(0,a._)("p",null,"It's contents should match the UUID: "+(0,s.toDisplayString)(i.uuidVerification),1)])]))}]]),rt={class:"row"},dt=(0,a._)("div",{class:"col-md-4"},[(0,a._)("strong",null,"Email Test"),(0,a._)("p",{class:"text-instructions"},' Please click "Send Email", to send an email to yourself. If you do not receive an email, it means there is something broken. '),(0,a._)("p",{class:"text-instructions"},[(0,a.Uk)(" Potential Issues "),(0,a._)("ul",null,[(0,a._)("li",null,"Spam Blocking Email"),(0,a._)("li",null,"Server not sending"),(0,a._)("li",null,"Email Credentials Incorrect")])])],-1),ut={class:"col-md-8"},ct={key:1,class:"alert alert-warning"},_t={key:2,class:"alert alert-success"},mt={key:3,class:"alert alert-danger"},gt={name:"DiagnosticEmailTest",computed:{...(0,st.Se)({rootUrl:"getRootUrl"})},data:()=>({emailState:"not_started"}),methods:{sendEmail(){this.emailState="sending_email",this.axios.post(`${this.rootUrl}diagnostic_information/email_test/`).then((()=>{this.emailState="sent_email"})).catch((t=>{this.emailState="failed_sending",this.$store.dispatch("newToast",{header:"Error sending Email",message:`${t}`,extra_classes:"bg-danger",delay:0})}))}}},ht={name:"DiagnosticInformation",components:{DiagnosticEmailTest:(0,it.Z)(gt,[["render",function(t,e,l,s,n,i){return(0,a.wg)(),(0,a.iD)("div",rt,[dt,(0,a._)("div",ut,["not_started"===n.emailState?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-warning",onClick:e[0]||(e[0]=(...t)=>i.sendEmail&&i.sendEmail(...t))},"Send Email")):(0,a.kq)("v-if",!0),"sending_email"===n.emailState?((0,a.wg)(),(0,a.iD)("div",ct," Currently sending the email. Please wait. ")):(0,a.kq)("v-if",!0),"sent_email"===n.emailState?((0,a.wg)(),(0,a.iD)("div",_t," Email sent by backend. Please check your inbox. If you do not receive the email, please check to make sure it is not in spam. ")):(0,a.kq)("v-if",!0),"failed_sending"===n.emailState?((0,a.wg)(),(0,a.iD)("div",mt," Sorry. The backend server could not send the email. Please check logs ")):(0,a.kq)("v-if",!0)])])}]]),DiagnosticUpload:ot},props:{awsAccessKeyId:{type:Boolean,default:!1},awsSecretAccessKey:{type:Boolean,default:!1},allowedHosts:{type:Array,default:()=>[]},awsS3EndpointUrl:{type:Boolean,default:!1},awsStorageBucketName:{type:Boolean,default:!1},azureStorageConnectionString:{type:Boolean,default:!1},azureStorageContainerName:{type:Boolean,default:!1},csrfTrustedUrls:{type:Array,default:()=>[]},rootUrl:{type:String,default:"/"},smtpEmailHost:{type:Boolean,default:!1},smtpEmailHostUser:{type:Boolean,default:!1},theme:{type:String,default:"light"}},mixins:[j.Z],methods:{},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl})}},pt=(0,it.Z)(ht,[["render",function(t,e,l,j,q,G){const V=(0,a.up)("diagnostic-upload"),Y=(0,a.up)("diagnostic-email-test"),J=(0,a.up)("n-config-provider");return(0,a.wg)(),(0,a.j4)(J,{theme:t.getTheme(l.theme)},{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a._)("div",i,[o,r,d,u,(0,a._)("div",c,[_,(0,a._)("div",m,[(0,a._)("table",g,[h,(0,a._)("tbody",null,[(0,a._)("tr",null,[p,(0,a._)("td",null,(0,s.toDisplayString)(l.azureStorageConnectionString),1)]),(0,a._)("tr",null,[S,(0,a._)("td",null,(0,s.toDisplayString)(l.azureStorageContainerName),1)])])])])]),y,(0,a._)("div",f,[w,(0,a._)("div",v,[(0,a._)("table",D,[E,(0,a._)("tbody",null,[(0,a._)("tr",null,[b,(0,a._)("td",null,(0,s.toDisplayString)(l.awsAccessKeyId),1)]),(0,a._)("tr",null,[k,(0,a._)("td",null,(0,s.toDisplayString)(l.awsSecretAccessKey),1)]),(0,a._)("tr",null,[U,(0,a._)("td",null,(0,s.toDisplayString)(l.awsS3EndpointUrl),1)]),(0,a._)("tr",null,[C,(0,a._)("td",null,(0,s.toDisplayString)(l.awsStorageBucketName),1)])])])])]),I,(0,a._)("div",T,[A,(0,a._)("div",R,[(0,a._)("table",x,[N,(0,a._)("tbody",null,[(0,a._)("tr",null,[B,(0,a._)("td",null,(0,s.toDisplayString)(l.smtpEmailHost),1)]),(0,a._)("tr",null,[F,(0,a._)("td",null,(0,s.toDisplayString)(l.smtpEmailHostUser),1)])])])])]),H,(0,a._)("div",P,[O,(0,a._)("div",$,[(0,a._)("table",L,[K,(0,a._)("tbody",null,[(0,a._)("tr",null,[M,(0,a._)("td",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedHosts,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])]),(0,a._)("tr",null,[W,(0,a._)("td",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.allowedHosts,(t=>((0,a.wg)(),(0,a.iD)("p",{key:t},"- "+(0,s.toDisplayString)(t),1)))),128))])])])])])]),Z,(0,a.Wm)(V),z,(0,a.Wm)(Y)])])])),_:1},8,["theme"])}]])},624:(t,e,l)=>{l.d(e,{Z:()=>s});var a=l(7449);const s={data:()=>({darkTheme:a.$}),methods:{getTheme:t=>"dark"===t?a.$:null}}}}]);