"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[1807],{1071:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var s=a(6252),l=a(3577);const o={class:"card"},i={class:"card-body"},d=(0,s._)("h1",null,"Search Tags",-1),g=(0,s._)("hr",null,null,-1),r={class:"row"},n={class:"col-md-4"},c=(0,s._)("strong",null,"Tags",-1),u=(0,s._)("p",{class:"text-instructions"}," Use the search bar to help you find any tags. ",-1),h={class:"text-instructions"},T=(0,s._)("p",{class:"text-instructions"},' To add in any new tags - please click on the "New Tag" button. ',-1),m={class:"col-md-8 tag-list"},p=["onDblclick"],_=["onClick"],b=(0,s._)("hr",null,null,-1),v={class:"row submit-row"},f={class:"col-md-12"};var C=a(5808),y=a(3138),x=a(6542),w=a(9963);const k={class:"modal fade",id:"editTagModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"editTagModalLabel","aria-hidden":"true"},M={class:"modal-dialog"},I={class:"modal-content"},Z=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"editTagModalLabel"}," Edit Tag "),(0,s._)("button",{type:"button",id:"editTagCloseModal",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),U={class:"modal-body"},N={class:"row"},$=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Edit Tags"),(0,s._)("p",{class:"text-instructions"}," Please give the tag an appropriate name. Please do not pick an existing tag name. ")],-1),S={class:"col-md-8"},D={key:0,class:"error"},E=["disabled"],L=(0,s._)("hr",null,null,-1),R={class:"row"},q=(0,s._)("div",{class:"col-md-4"},[(0,s._)("strong",null,"Pick Colour"),(0,s._)("p",{class:"text-instructions"}," Please choose a background and text colour for your tag. ")],-1),P={class:"col-md-8"},B={class:"form-group"},A=(0,s._)("label",null,"Background Colour",-1),W={class:"form-group"},O=(0,s._)("label",null,"Text Colour",-1),j=(0,s._)("hr",null,null,-1),z={class:"modal-footer"},F=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),G=["disabled"];var H=a(989);const J={name:"EditTagModal",components:{NColorPicker:a(3087).Z},props:{existingTags:{type:Array,default:()=>[]},tagColour:{type:String,default:""},tagId:{type:Number,default:0},tagName:{type:String,default:""},tagTextColour:{type:String,default:""}},data(){return{tagColourModel:this.tagColour,tagNameModel:this.tagName,tagTextColourModel:this.tagTextColour}},watch:{tagColour(){this.tagColourModel=this.tagColour},tagName(){this.tagNameModel=this.tagName},tagTextColour(){this.tagTextColourModel=this.tagTextColour}},computed:{...(0,H.Se)({rootUrl:"getRootUrl",userLevel:"getUserLevel"}),canSave(){return 0===this.existingTags.filter((e=>e.fields.tag_name.toUpperCase()===this.tagNameModel.toUpperCase()&&e.pk!==this.tagId)).length}},methods:{deleteTag(){this.axios.post(`${this.rootUrl}tag/delete/${this.tagId}/`).then((e=>{this.$emit("delete_tag",{tag_id:this.tagId}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error deleting tag",message:`Sorry we could not delete your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},getClasses(e){let t="single-colour";return e===this.tagColourModel&&(t=`${t} selected-colour`),t},newTag(e){this.$store.dispatch("newToast",{header:"New Tag",message:"Creating new Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/new/`,e).then((e=>{this.$store.dispatch("newToast",{header:"Tag Saved",message:"Tag has been successfully saved",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("new_tag",e.data),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not create new tag",message:`Sorry, we could not create your new tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))},saveTag(){const e=new FormData;e.set("tag_id",this.tagId),e.set("tag_name",this.tagNameModel),e.set("tag_colour",this.tagColourModel),e.set("tag_text_colour",this.tagTextColourModel),0===this.tagId?this.newTag(e):this.updateTag(e)},updateColour(e){this.tagColourModel=e},updateTag(e){this.$store.dispatch("newToast",{header:"Updating Tag",message:"Updating Tag - please wait",extra_classes:"bg-warning text-dark",delay:0,unique_type:"save_tag"}),this.axios.post(`${this.rootUrl}tag/save/`,e).then((()=>{this.$store.dispatch("newToast",{header:"Tag Updated",message:"Tag has been updated successfully",extra_classes:"bg-success",unique_type:"save_tag"}),this.$emit("update_tags",{tag_id:this.tagId,tag_name:this.tagNameModel,tag_colour:this.tagColourModel,tag_text_colour:this.tagTextColourModel}),document.getElementById("editTagCloseModal").click()})).catch((e=>{this.$store.dispatch("newToast",{header:"Can not update tag",message:`Sorry, we could not update your tag. Error -> ${e}`,extra_classes:"bg-danger",delay:0})}))}}};var K=a(3744);const V={name:"SearchTags",components:{EditTagModal:(0,K.Z)(J,[["render",function(e,t,a,o,i,d){const g=(0,s.up)("n-color-picker");return(0,s.wg)(),(0,s.iD)("div",k,[(0,s._)("div",M,[(0,s._)("div",I,[Z,(0,s._)("div",U,[(0,s._)("div",N,[$,(0,s._)("div",S,[(0,s._)("label",null,[(0,s.Uk)(" Tag Name "),d.canSave?(0,s.kq)("v-if",!0):((0,s.wg)(),(0,s.iD)("span",D," Please use a unique name "))]),(0,s.wy)((0,s._)("input",{class:"form-control",disabled:e.userLevel<=1,"onUpdate:modelValue":t[0]||(t[0]=e=>i.tagNameModel=e)},null,8,E),[[w.vModelText,i.tagNameModel]])])]),L,(0,s._)("div",R,[q,(0,s._)("div",P,[(0,s._)("div",B,[A,(0,s.Wm)(g,{"show-alpha":!1,disabled:e.userLevel<=1,value:i.tagColourModel,"onUpdate:value":t[1]||(t[1]=e=>i.tagColourModel=e),modes:["hex"]},null,8,["disabled","value"])]),(0,s._)("div",W,[O,(0,s.Wm)(g,{value:i.tagTextColourModel,"onUpdate:value":t[2]||(t[2]=e=>i.tagTextColourModel=e),disabled:e.userLevel<=1,"show-alpha":!1,modes:["hex"]},null,8,["value","disabled"]),(0,s._)("span",null,(0,l.toDisplayString)(i.tagTextColourModel),1)]),j,(0,s._)("div",{class:"single-tag",style:(0,l.normalizeStyle)(`margin-right:0;background-color:${i.tagColourModel};color:${i.tagTextColourModel};`)},(0,l.toDisplayString)(i.tagNameModel),5)])])]),(0,s._)("div",z,[0!==a.tagId&&e.userLevel>1?((0,s.wg)(),(0,s.iD)("button",{key:0,type:"button",class:"btn btn-danger delete-tag",onClick:t[3]||(t[3]=(...e)=>d.deleteTag&&d.deleteTag(...e))}," Delete Tag ")):(0,s.kq)("v-if",!0),F,e.userLevel>1?((0,s.wg)(),(0,s.iD)("button",{key:1,type:"button",class:"btn btn-primary",disabled:!d.canSave,onClick:t[4]||(t[4]=(...e)=>d.saveTag&&d.saveTag(...e))}," Save Tag ",8,G)):(0,s.kq)("v-if",!0)])])])])}]]),Icon:x.JO},props:{rootUrl:{type:String,default:"/"},tagResults:{type:Array,default:()=>[]},userLevel:{type:Number,default:0}},data(){return{singleTagColour:"",singleTagId:0,singleTagName:"#37cbd2",singleTagTextColour:"#ffffff",localTagResults:this.tagResults}},mixins:[C.Z],methods:{addTag(){this.singleTagName="default tag",this.singleTagId=0,this.singleTagColour="#37cbd2",this.singleTagTextColour="#ffffff",new y.u_(document.getElementById("editTagModal")).show()},deleteTag(e){this.localTagResults=this.localTagResults.filter((t=>t.pk!==e.tag_id))},editTag(e){let t=this.localTagResults.filter((t=>t.pk===e))[0];this.singleTagName=t.fields.tag_name,this.singleTagId=e,this.singleTagColour=t.fields.tag_colour,this.singleTagTextColour=t.fields.tag_text_colour,new y.u_(document.getElementById("editTagModal")).show()},newTag(e){this.localTagResults.push(e[0])},updateTags(e){let t=this.localTagResults.findIndex((t=>t.pk===e.tag_id));this.localTagResults[t].fields.tag_name=e.tag_name,this.localTagResults[t].fields.tag_colour=e.tag_colour,this.localTagResults[t].fields.tag_text_colour=e.tag_text_colour}},mounted(){this.$store.commit({type:"updateUrl",rootUrl:this.rootUrl}),this.$store.commit({type:"updateUserLevel",userLevel:this.userLevel})}},Y=(0,K.Z)(V,[["render",function(e,t,a,C,y,x){const w=(0,s.up)("Icon"),k=(0,s.up)("edit-tag-modal");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",i,[d,g,(0,s._)("div",r,[(0,s._)("div",n,[c,u,(0,s._)("p",h,[(0,s.Uk)(" Click on the icon "),(0,s.Wm)(w,{icon:e.icons.infoCircle},null,8,["icon"]),(0,s.Uk)(" to edit the tag. ")]),T]),(0,s._)("div",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(y.localTagResults,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t.pk,style:(0,l.normalizeStyle)(`background-color: ${t.fields.tag_colour};color: ${t.fields.tag_text_colour}`),onDblclick:e=>x.editTag(t.pk),class:"single-tag"},[(0,s.Uk)((0,l.toDisplayString)(t.fields.tag_name)+" ",1),(0,s._)("span",{onClick:e=>x.editTag(t.pk)},[(0,s.Wm)(w,{icon:e.icons.infoCircle},null,8,["icon"])],8,_)],44,p)))),128))]),(0,s.kq)(" ADD NEW TAG BUTTON "),b,(0,s._)("div",v,[(0,s._)("div",f,[a.userLevel>=2?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:t[0]||(t[0]=(...e)=>x.addTag&&x.addTag(...e))},"Add Tag")):(0,s.kq)("v-if",!0)])])]),(0,s.kq)(" MODALS "),(0,s.Wm)(k,{"existing-tags":y.localTagResults,"tag-colour":y.singleTagColour,"tag-id":y.singleTagId,"tag-name":y.singleTagName,"tag-text-colour":y.singleTagTextColour,onNew_tag:x.newTag,onDelete_tag:t[1]||(t[1]=e=>x.deleteTag(e)),onUpdate_tags:x.updateTags},null,8,["existing-tags","tag-colour","tag-id","tag-name","tag-text-colour","onNew_tag","onUpdate_tags"])])])}]])},5808:(e,t,a)=>{a.d(t,{Z:()=>Z});var s=a(3985),l=a(5555),o=a(1826),i=a(6443),d=a(1327),g=a(8521),r=a(1056),n=a(4324),c=a(9672),u=a(9867),h=a(1239),T=a(5004),m=a(1321),p=a(1216),_=a(5550),b=a(7702),v=a(7903),f=a(2606),C=a(3843),y=a(2393),x=a(3360),w=a(9714),k=a(1323),M=a(2610),I=a(5968);const Z={data:()=>({icons:{arrowUp:s.Z,bugIcon:l.Z,bxBriefcase:o.Z,cardChecklist:i.Z,clipboardIcon:d.Z,documentPdf:g.Z,documentText:r.Z,folderIcon:n.Z,groupPresentation:c.Z,imageIcon:u.Z,infoCircle:h.Z,linkIcon:T.Z,linkIcon2:m.Z,linkOut:p.Z,mailIcon:_.Z,microsoftExcel:b.Z,microsoftPowerpoint:v.Z,microsoftWord:f.Z,noteAdd:C.Z,objectStorage:y.Z,passwordIcon:x.Z,trashCan:w.Z,userIcon:k.Z,usersIcon:M.Z,xCircle:I.Z}})}}}]);