"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1795],{84022:function(e,n,t){t.d(n,{C:function(){return RepoFilterButton}});var r=t(58467),o=t(52322),i=t(10952),s=t(18399),a=t(9001),l=t(67486),c=t(2784),u=t(75690),d=t(46988),RepoFilterButton=function(){var e=(0,c.useContext)(d.C5),n=e.allRepos,t=e.visibleRepos,h=e.toggleVisible,v=(0,r._)((0,c.useState)(!1),2),f=v[0],x=v[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.Vq,{canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:f,style:{width:"auto"},onClose:function(){return x(!1)},children:[(0,o.jsx)(i.fK,{icon:"repo",label:"Filter code locations"}),(0,o.jsx)(u.e,{options:n,onBrowse:function(){return x(!1)},onToggle:h,selected:t}),(0,o.jsx)(i.cN,{children:(0,o.jsx)(s.x,{padding:{top:8},children:(0,o.jsx)(a.zx,{intent:"none",onClick:function(){return x(!1)},children:"Done"})})})]}),(0,o.jsx)(a.zx,{outlined:!0,icon:(0,o.jsx)(l.JO,{name:"folder"}),rightIcon:(0,o.jsx)(l.JO,{name:"expand_more"}),onClick:function(){return x(!0)},children:"".concat(t.length," of ").concat(n.length)})]})}},9445:function(e,n,t){t.d(n,{e:function(){return JobsPageContent}});var r=t(58467),o=t(73235),i=t(52322),s=t(40794),a=t(89130),l=t(18399),c=t(63832),u=t(25195),d=t(92364),h=t(34822),v=t(25557),f=t(2784),x=t(91195),p=t(55237),m=t(35157),j=t(71277),g=t(84022),y=t(43180),w=t(57830),b=t(88510),O=t(68884),_=t(55658),C=t(77277),k=t(42885),R=t(9901),T=t(41256),A=t(44254),OverviewJobsTable=function(e){var n=e.repos,t=(0,f.useRef)(null),r=(0,f.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,A.Uz)(n)})},[n]),o=(0,k.N)(O.y,r),s=o.expandedKeys,a=o.onToggle,l=o.onToggleAll,c=(0,f.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.jobs;e.push({type:"header",repoAddress:t,jobCount:r.length});var o=(0,A.Uz)(t);s.includes(o)&&r.forEach(function(n){var r=n.isJob,o=n.name;e.push({type:"job",repoAddress:t,isJob:r,name:o})})}),e},[n,s]),u=(0,C.w)(n.map(function(e){return e.repoAddress.name})),d=(0,b.MG)({count:c.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=c[e];return(null==n?void 0:n.type)==="header"?_.lo:64},overscan:10}),h=d.getTotalSize(),v=d.getVirtualItems();return(0,i.jsx)("div",{style:{overflow:"hidden"},children:(0,i.jsxs)(_.W2,{ref:t,children:[(0,i.jsx)(R.I,{}),(0,i.jsx)(_.Nh,{$totalHeight:h,children:v.map(function(e){var n=e.index,t=e.key,r=e.size,o=e.start,d=c[n];return"header"===d.type?(0,i.jsx)(T.vG,{repoAddress:d.repoAddress,height:r,start:o,onToggle:a,onToggleAll:l,expanded:s.includes((0,A.Uz)(d.repoAddress)),showLocation:u.has(d.repoAddress.name),rightElement:(0,i.jsx)(y.u,{content:1===d.jobCount?"1 job":"".concat(d.jobCount," jobs"),placement:"top",children:(0,i.jsx)(w.V,{children:d.jobCount})})},t):(0,i.jsx)(R.b,{name:d.name,isJob:d.isJob,repoAddress:d.repoAddress,height:r,start:o},t)})})]})})},S=t(44392),N=t(89191),L=t(58298),E=t(46988),I=t(37160);function _templateObject(){var e=(0,o._)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return e},e}var JobsPageContent=function(){var e=(0,f.useContext)(E.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,a=(0,r._)((0,j.q)({queryKey:"search",defaults:{search:""}}),2),x=a[0],m=a[1],y=n.length,w=(0,s.a)(P,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),b=w.data,O=w.loading,_=(0,p.C4)(w,p.dT),C=(0,f.useMemo)(function(){var e=(0,N.S)(t);return buildBuckets(b).filter(function(n){var t=n.repoAddress;return e.has((0,A.Uz)(t))})},[b,t]),k=x.trim().toLocaleLowerCase(),R=k.length>0,T=(0,f.useMemo)(function(){var e=k.toLocaleLowerCase();return C.map(function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.jobs.length>0})},[C,k]),S=o&&!y||O&&!b;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",grow:0},children:[(0,i.jsxs)(l.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[y>1?(0,i.jsx)(g.C,{}):null,(0,i.jsx)(h.oi,{icon:"search",value:x,rightElement:S?(0,i.jsx)(L.W,{tooltipContent:"Loading jobs…"}):void 0,onChange:function(e){return m(e.target.value)},placeholder:"Filter by job name…",style:{width:"340px"}})]}),(0,i.jsx)(p.xi,{refreshState:_})]}),O&&!y?(0,i.jsx)(l.x,{padding:64,children:(0,i.jsx)(v.f,{label:"Loading jobs…"})}):function(){if(O&&!b)return(0,i.jsx)(l.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,i.jsxs)(l.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,i.jsx)(c.$,{purpose:"body-text"}),(0,i.jsx)("div",{style:{color:u.$()},children:"Loading jobs…"})]})});var e=n.length>t.length;return T.length?(0,i.jsx)(OverviewJobsTable,{repos:T}):R?(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No matching jobs",description:e?(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:x})," were found in the selected code locations"]}):(0,i.jsxs)("div",{children:["No jobs matching ",(0,i.jsx)("strong",{children:x})," were found in your definitions"]})})}):(0,i.jsx)(l.x,{padding:{top:20},children:(0,i.jsx)(d.t,{icon:"search",title:"No jobs",description:e?"No jobs were found in the selected code locations":"No jobs were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,x=f.name,p=f.pipelines,j=(0,I.kQ)(x,l.name),g=p.filter(function(e){var n=e.name;return!(0,m.pv)(n)}).map(function(e){return{isJob:e.isJob,name:e.name}});g.length>0&&t.push({repoAddress:j,jobs:g})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,S.S)(t)},P=(0,a.Ps)(_templateObject(),x.B)},71795:function(e,n,t){t.r(n),t.d(n,{OverviewRoot:function(){return OverviewRoot},default:function(){return eB}});var r=t(52322),o=t(7267),i=t(58467),s=t(9001),a=t(18399),l=t(2784),c=t(85333),u=t(6692),d=t(73235),h=t(63832),v=t(34822),f=t(9676),x=t(21106),p=t(67486),m=t(57830),j=t(25195),g=t(17276),y=t(44678),w=t(81308),b=t(88510),O=t(47933),_=t(35505),C=t(56266),k=t(55237),R=t(68028),T=t(8169),A=t(99322),S=t(35157),N=t(16339),L=t(58885),E=t(91351),I=t(74711),P=t(28252),z=t(71277),F=t(63386),M=t(83568),W=t(55658),J=t(37160),$=t(38153);function _templateObject(){var e=(0,d._)(["\n  display: grid;\n  grid-template-columns: ",";\n  height: 100%;\n  > * {\n    vertical-align: middle;\n  }\n"]);return _templateObject=function(){return e},e}function _templateObject1(){var e=(0,d._)(["\n  font-size: 12px;\n  pointer-events: none;\n  a {\n    color: ",";\n    pointer-events: none;\n    max-width: ",";\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){var e=(0,d._)(["\n  cursor: pointer;\n  &:hover {\n    font-weight: 600;\n  }\n"]);return _templateObject2=function(){return e},e}function _templateObject3(){var e=(0,d._)(["\n  &:hover {\n    text-decoration: none;\n  }\n"]);return _templateObject3=function(){return e},e}var OverviewAssetsRoot=function(e){var n=e.Header,t=e.TabButton;(0,R.Px)(),(0,P.j)("Overview | Assets");var o=(0,E.Zg)(),s=o.assets,c=o.query,u=o.error,d=o.loading,x=(0,k.bT)({refresh:c,intervalMs:k.dT,leading:!0}),p=l.useMemo(function(){var e;return s?(e={},s.forEach(function(n){if(n.definition){var t=n.definition.groupName,r=n.definition.repository.name,o="".concat(t,"||").concat(r),i=e[o]||{groupName:t,repositoryName:r,assets:[]};i.assets.push(n),e[o]=i}}),Object.values(e)):[]},[s]),m=(0,i._)((0,z.q)({queryKey:"q",decode:function(e){return e.searchQuery?JSON.parse(e.searchQuery):""},encode:function(e){return{searchQuery:e?JSON.stringify(e):void 0}}}),2),j=m[0],g=m[1],y=l.useMemo(function(){return""===j?p:p.filter(function(e){return(e.groupName||H).toLowerCase().includes(j.toLowerCase())||e.repositoryName.toLowerCase().includes(j.toLowerCase())})},[p,j]),w=l.useMemo(function(){var e;return null!==(e=y.flatMap(function(e){return e.assets.map(function(e){return e.key})}))&&void 0!==e?e:[]},[y]),_=(0,T.NY)(w,"OverviewAssetsRoot").liveDataByNode,A=(0,M.se)("OverviewAssetsRoot"),S=Object.keys(_).length===w.length;l.useEffect(function(){S&&A.endTrace()},[S,A]);var N=l.useRef(null),L=(0,b.MG)({count:y.length,getScrollElement:function(){return N.current},estimateSize:function(){return 82},overscan:5}),I=L.getTotalSize(),F=L.getVirtualItems();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{position:"sticky",top:0,zIndex:1},children:[(0,r.jsx)(n,{refreshState:x}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",gap:12,grow:0},children:[(0,r.jsx)(t,{selected:"assets"}),(0,r.jsx)(v.oi,{value:j,onChange:function(e){g(e.target.value)},placeholder:"Filter asset groups…"})]}),(0,r.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:"top",children:(0,r.jsx)(f.b,{intent:"info",title:"This Assets tab will be removed in an upcoming release.",description:(0,r.jsxs)(r.Fragment,{children:["Use the ",(0,r.jsx)(O.rU,{to:"/asset-groups",children:"global asset lineage page"})," to view grouped asset status details."]})})})]}),d?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(h.$,{purpose:"page"})}):u?(0,r.jsx)(a.x,{flex:{alignItems:"center",justifyContent:"center",direction:"column",grow:1},style:{width:"100%"},children:(0,r.jsx)(C.T9,{error:u})}):(0,r.jsx)(a.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:(0,r.jsxs)(W.W2,{ref:N,children:[(0,r.jsx)(VirtualHeaderRow,{}),(0,r.jsx)(W.Nh,{$totalHeight:I,children:F.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,s=y[n];return(0,r.jsx)(VirtualRow,{start:i,height:o,group:s},t)})})]})})]})},B="5fr 1fr 1fr 1fr 1fr",VirtualHeaderRow=function(){return(0,r.jsxs)(W.VJ,{templateColumns:B,sticky:!0,children:[(0,r.jsx)(W.qN,{children:"Group name"}),(0,r.jsx)(W.qN,{children:"Missing"}),(0,r.jsx)(W.qN,{children:"Failed/Overdue"}),(0,r.jsx)(W.qN,{children:"In progress"}),(0,r.jsx)(W.qN,{children:"Materialized"})]})},H="Ungrouped Assets";function VirtualRow(e){var n,t,o=e.height,i=e.start,s=e.group,d=l.useMemo(function(){return s.assets.map(function(e){return{path:e.key.path}})},[s.assets]),v=(0,T.NY)(d).liveDataByNode,f=(0,M.se)("OverviewAssetsRoot:GroupBatch"),g=l.useMemo(function(){return(0,N.s)(s.assets,v)},[v,s.assets]),y=null===(t=s.assets.find(function(e){var n;return null===(n=e.definition)||void 0===n?void 0:n.repository}))||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.repository,w=(0,J.kQ)((null==y?void 0:y.name)||"",(null==y?void 0:y.location.name)||""),b=(0,x.S)(),_=b.containerProps,C=b.viewport,k=d.length!==Object.keys(v).length,R=k?"":"0";return l.useEffect(function(){k||f.endTrace()},[f,k]),(0,r.jsx)(W.X2,{$height:o,$start:i,children:(0,r.jsxs)(q,{border:"bottom",children:[(0,r.jsx)(Cell,{children:(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"column",gap:2,grow:1},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8},children:[(0,r.jsx)(p.JO,{name:"asset_group"}),s.groupName?(0,r.jsx)(O.rU,{style:{fontWeight:700},to:(0,$.$U)(w,"/asset-groups/".concat(s.groupName)),children:s.groupName}):H]}),(0,r.jsx)("div",(0,u._)((0,c._)({},_),{children:(0,r.jsx)(U,{maxWidth:C.width,children:(0,r.jsx)(F.b,{repoAddress:w,showRefresh:!1})})}))]}),(0,r.jsx)(a.x,{flex:{direction:"column",justifyContent:"center"},children:k?(0,r.jsx)(h.$,{purpose:"body-text"}):null})]})}),(0,r.jsx)(Cell,{children:g.missing.length?(0,r.jsx)(SelectOnHover,{assets:g.missing,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MISSING&&n.numMissing||0},adjective:"missing",children:(0,r.jsx)(m.V,{intent:"none",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid ".concat(j.im()),borderRadius:"50%"}}),g.missing.length]})})}):R}),(0,r.jsx)(Cell,{children:g.failed.length?(0,r.jsx)(SelectOnHover,{assets:g.failed,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_FAILED&&n.numFailed||0},adjective:"failed",children:(0,r.jsx)(m.V,{intent:"danger",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"10px solid red",display:"inline-block"}}),g.failed.length]})})}):R}),(0,r.jsx)(Cell,{children:g.inprogress.length?(0,r.jsx)(SelectOnHover,{assets:g.inprogress,getCount:function(e){var n=e.status;return n.case===A.KB.MATERIALIZING&&n.numMaterializing||0},adjective:"materializing",children:(0,r.jsx)(m.V,{intent:"primary",icon:"spinner",children:g.inprogress.length})}):R}),(0,r.jsx)(Cell,{children:g.successful.length?(0,r.jsx)(SelectOnHover,{assets:g.successful,getCount:function(e){var n=e.status;return n.case===A.KB.PARTITIONS_MATERIALIZED&&n.numMaterialized||0},adjective:"materialized",children:(0,r.jsx)(m.V,{intent:"success",children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:6},children:[(0,r.jsx)("div",{style:{backgroundColor:j.fA(),width:"10px",height:"10px",borderRadius:"50%"}}),g.successful.length]})})}):R})]})})}var q=(0,_.ZP)(a.x).withConfig({componentId:"sc-5a3ca5ca-0"})(_templateObject(),B),Cell=function(e){var n=e.children;return(0,r.jsx)(W.E5,{style:{color:j.Ep()},children:(0,r.jsx)(a.x,{flex:{direction:"row",alignItems:"center",grow:1},children:n})})},U=_.ZP.div.withConfig({componentId:"sc-5a3ca5ca-1"})(_templateObject1(),j.$(),function(e){var n=e.maxWidth;return n?"unset":"".concat(n,"px")});function SelectOnHover(e){var n=e.assets,t=e.children,o=e.getCount,i=e.adjective;return(0,r.jsx)(D,{children:(0,r.jsx)(g.P,{items:n,itemPredicate:function(e,n){return(0,S.ll)(n.asset.key).toLocaleLowerCase().includes(e.toLocaleLowerCase())},itemRenderer:function(e){var n=o(e);return(0,r.jsx)(V,{to:(0,I.p)(e.asset.key),target:"_blank",children:(0,r.jsx)(y.sN,{text:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("div",{style:{paddingLeft:"4px"},children:(0,r.jsx)(p.JO,{name:"asset"})}),(0,r.jsx)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:(0,S.ll)(e.asset.key)}),n&&n>0?(0,r.jsxs)(w.YS,{style:{color:j.$()},children:[(0,L._e)(n)," ",i]}):null]})},(0,S.ll)(e.asset.key))})},onItemSelect:function(){},children:t})})}var D=_.ZP.div.withConfig({componentId:"sc-5a3ca5ca-2"})(_templateObject2()),V=(0,_.ZP)(O.rU).withConfig({componentId:"sc-5a3ca5ca-3"})(_templateObject3()),K=t(2281),G=t(17131),Q=(0,t(53360).f)("OverviewPageAlerts"),Z=t(56024),X=t(20775),Y=t(18613),ee=t(58341),en=t(81966),et=t(40049),OverviewTabs=function(e){var n=e.refreshState,t=e.tab,o=(0,X.gV)().flagSettingsPage,i=(0,en.dx)(),s=(0,ee.I)(),c=(0,l.useContext)(Y.G).enableAssetHealthOverviewPreview;return(0,r.jsxs)(a.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,r.jsxs)(Z.mQ,{selectedTabId:t,children:[(0,r.jsx)(et.f,{id:"activity",title:"Timeline",to:"/overview/activity"}),c&&(0,r.jsx)(et.f,{id:"asset-health",title:"Asset health",to:"/overview/asset-health"}),o?null:(0,r.jsx)(et.f,{id:"jobs",title:"Jobs",to:"/overview/jobs"}),o?null:(0,r.jsx)(et.f,{id:"schedules",title:"Schedules",to:"/overview/schedules"}),o?null:(0,r.jsx)(et.f,{id:"sensors",title:"Sensors",to:"/overview/sensors"}),o||"has-global-amp"!==s?null:(0,r.jsx)(et.f,{id:"amp",title:(0,r.jsxs)(a.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:"Auto-materialize"}),i.loading?(0,r.jsx)(h.$,{purpose:"body-text"}):(0,r.jsx)("div",{style:{width:"10px",height:"10px",borderRadius:"50%",backgroundColor:!1===i.paused?j.L$():j.md()}})]}),to:"/overview/automation"}),(0,r.jsx)(et.f,{id:"resources",title:"Resources",to:"/overview/resources"}),o?null:(0,r.jsx)(et.f,{id:"backfills",title:"Backfills",to:"/overview/backfills"})]}),n?(0,r.jsx)(a.x,{padding:{bottom:8},children:(0,r.jsx)(k.xi,{refreshState:n})}):null]})},OverviewPageHeader=function(e){var n=e.tab,t=e.queryData,o=e.refreshState,i=(0,K._)(e,["tab","queryData","refreshState"]);return(0,r.jsx)(G.m,(0,c._)({title:(0,r.jsx)(w.X6,{children:"Overview"}),tabs:(0,r.jsxs)(a.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(OverviewTabs,{tab:n,queryData:t,refreshState:o}),(0,r.jsx)(Q,{})]})},i))},er=t(99596),eo=t(64595),ei=t(84022),es=t(35564),ea=t(15282),useHourWindow=function(e){var n=(0,l.useCallback)(function(n){switch(n){case"1":case"6":case"12":case"24":return n;default:return e}},[e]),t=(0,i._)((0,ea.U)("dagster.run-timeline-hour-window",n),2),r=t[0],o=t[1],s=(0,l.useCallback)(function(n){o(n||e)},[e,o]);return(0,l.useMemo)(function(){return[r,s]},[r,s])},el=t(87612),ec=t(82550),eu=t(40794),ed=t(89130),eh=t(6315),ev=t(38917),ef=t(16413),ex=t(61935);function NextTick_templateObject(){var e=(0,d._)(["\n  fragment ScheduleFutureTicksFragment on Schedule {\n    id\n    executionTimezone\n    scheduleState {\n      id\n      status\n    }\n    futureTicks(cursor: $tickCursor, until: $ticksUntil) {\n      results {\n        timestamp\n      }\n    }\n  }\n"]);return NextTick_templateObject=function(){return e},e}var ep=(0,ed.Ps)(NextTick_templateObject()),em=t(44254);function useRunsForTimeline_templateObject(){var e=(0,d._)(["\n  query RunTimelineQuery(\n    $inProgressFilter: RunsFilter!\n    $terminatedFilter: RunsFilter!\n    $tickCursor: Float\n    $ticksUntil: Float\n  ) {\n    unterminated: runsOrError(filter: $inProgressFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    terminated: runsOrError(filter: $terminatedFilter) {\n      ... on Runs {\n        results {\n          id\n          pipelineName\n          repositoryOrigin {\n            id\n            repositoryName\n            repositoryLocationName\n          }\n          ...RunTimeFragment\n        }\n      }\n    }\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          name\n          loadStatus\n          displayMetadata {\n            key\n            value\n          }\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n                schedules {\n                  id\n                  name\n                  pipelineName\n                  scheduleState {\n                    id\n                    status\n                  }\n                  ...ScheduleFutureTicksFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return useRunsForTimeline_templateObject=function(){return e},e}var useRunsForTimeline=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=(0,i._)(e,2),r=t[0],o=t[1],s=r/1e3,a=o/1e3,d=(0,eu.a)(ej,{notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:{inProgressFilter:(0,u._)((0,c._)({},n),{statuses:[ex.VOA.CANCELING,ex.VOA.STARTED],createdBefore:a}),terminatedFilter:(0,u._)((0,c._)({},n),{statuses:Array.from(eh.cv),createdBefore:a,updatedAfter:s}),tickCursor:s,ticksUntil:a}}),h=d.data,v=d.previousData,f=d.loading&&!h,x=h||v||{},p=x.unterminated,m=x.terminated,j=x.workspaceOrError,g=(0,l.useMemo)(function(){var e={},n=Date.now();return(0,ec._)((null==p?void 0:p.__typename)==="Runs"?p.results:[]).concat((0,ec._)((null==m?void 0:m.__typename)==="Runs"?m.results:[])).forEach(function(t){if(t.startTime&&t.repositoryOrigin&&(0,ef.a)({start:r,end:o},{start:1e3*t.startTime,end:t.endTime?1e3*t.endTime:n})){var i=makeJobKey({name:t.repositoryOrigin.repositoryName,location:t.repositoryOrigin.repositoryLocationName},t.pipelineName);e[i]=(0,ec._)(e[i]||[]).concat([{id:t.id,status:t.status,startTime:1e3*t.startTime,endTime:t.endTime?1e3*t.endTime:n}])}}),e},[o,p,m,r]),y=(0,l.useMemo)(function(){if(!j||"Workspace"!==j.__typename)return[];var e=[],n=!0,t=!1,i=void 0;try{for(var s,a=j.locationEntries[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)!function(){var n=s.value;if("WorkspaceLocationEntry"===n.__typename&&(null===(c=n.locationOrLoadError)||void 0===c?void 0:c.__typename)==="RepositoryLocation"){var t=Date.now(),i=!0,a=!1,l=void 0;try{for(var c,u,d=n.locationOrLoadError.repositories[Symbol.iterator]();!(i=(u=d.next()).done);i=!0)!function(){var i=u.value,s=(0,J.kQ)(i.name,n.locationOrLoadError.name),a=!0,l=!1,c=void 0;try{for(var d,h=i.pipelines[Symbol.iterator]();!(a=(d=h.next()).done);a=!0)!function(){var n=d.value,a=(i.schedules||[]).filter(function(e){return e.pipelineName===n.name}),l=[],c=!0,u=!1,h=void 0;try{for(var v,f=a[Symbol.iterator]();!(c=(v=f.next()).done);c=!0)!function(){var e=v.value;e.scheduleState.status===ex.ynu.RUNNING&&e.futureTicks.results.forEach(function(n){var i=n.timestamp,s=1e3*i;s>t&&(0,ef.a)({start:r,end:o},{start:s,end:s})&&l.push({id:"".concat(e.pipelineName,"-future-run-").concat(i),status:"SCHEDULED",startTime:s,endTime:s+5e3})})}()}catch(e){u=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(u)throw h}}var x=(0,S.pv)(n.name),p=makeJobKey(s,n.name),m=x?"Ad hoc materializations":n.name,j=g[p]||[];if(l.length||j.length){var y=(0,ec._)(j).concat((0,ec._)(l));if(x){var w,b=e.find(function(e){return"asset"===e.jobType&&e.repoAddress===s});if(b)return(w=b.runs).push.apply(w,(0,ec._)(y))}e.push({key:p,jobName:m,jobType:x?"asset":"job",repoAddress:s,path:(0,$.jT)({repoName:s.name,repoLocation:s.location,pipelineName:n.name,isJob:n.isJob}),runs:(0,ec._)(j).concat((0,ec._)(l))})}}()}catch(e){l=!0,c=e}finally{try{a||null==h.return||h.return()}finally{if(l)throw c}}}()}catch(e){a=!0,l=e}finally{try{i||null==d.return||d.return()}finally{if(a)throw l}}}}()}catch(e){t=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}var l=e.reduce(function(e,n){var t,r=n.runs.map(function(e){return e.startTime});return(0,u._)((0,c._)({},e),(0,el._)({},n.key,(t=Math).min.apply(t,(0,ec._)(r))))},{});return e.sort(function(e,n){return l[e.key]-l[n.key]})},[j,g,r,o]);return(0,l.useMemo)(function(){return{jobs:y,initialLoading:f,queryData:d}},[f,y,d])},makeJobKey=function(e,n){return"".concat(n,"-").concat((0,em.Uz)(e))},ej=(0,ed.Ps)(useRunsForTimeline_templateObject(),ev.$X,ep),eg=t(46988),hourWindowToOffset=function(e){switch(e){case"1":return 36e5;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},OverviewTimelineRoot=function(e){var n=e.Header,t=e.TabButton;(0,R.Px)(),(0,P.j)("Overview | Timeline");var o=(0,M.se)("OverviewTimelineRoot"),c=l.useContext(eg.C5),u=c.allRepos,d=c.visibleRepos,h=(0,i._)(useHourWindow("12"),2),f=h[0],x=h[1],p=(0,i._)(l.useState(function(){return Date.now()}),2),m=p[0],j=p[1],g=(0,i._)(l.useState(function(){return 0}),2),y=g[0],w=g[1],b=(0,i._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),O=b[0],_=b[1];l.useEffect(function(){j(Date.now());var e=setInterval(function(){j(Date.now())},6e4);return function(){clearInterval(e)}},[f]);var C=l.useCallback(function(){w(function(e){return e-hourWindowToOffset(f)})},[f]),T=l.useCallback(function(){w(function(e){return e+hourWindowToOffset(f)})},[f]),A=l.useCallback(function(){w(0)},[]),S=l.useMemo(function(){return[m-36e5*Number(f)+y,m+36e5+y]},[f,m,y]),N=useRunsForTimeline(S),L=N.jobs,E=N.initialLoading,I=N.queryData,F=(0,k.C4)(I,k.dT);l.useEffect(function(){E||o.endTrace()},[E,o]);var W=l.useMemo(function(){var e=O.toLocaleLowerCase().trim(),n=d.flatMap(function(n){var t=(0,J.kQ)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter(function(n){return n.name.toLocaleLowerCase().includes(e)}).map(function(e){return makeJobKey(t,e.name)})});return new Set(n)},[d,O]),$=l.useMemo(function(){return L.filter(function(e){var n=e.key;return W.has(n)})},[L,W]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n,{refreshState:F}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[t&&(0,r.jsx)(t,{selected:"timeline"}),u.length>1&&(0,r.jsx)(ei.C,{}),(0,r.jsx)(v.oi,{icon:"search",value:O,onChange:function(e){return _(e.target.value)},placeholder:"Filter by job name…",style:{width:"200px"}})]}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,r.jsx)(er.h,{activeItems:new Set([f]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return x(e)}}),(0,r.jsxs)(a.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,r.jsx)(s.zx,{onClick:C,children:"←"}),(0,r.jsx)(s.zx,{onClick:A,children:"Now"}),(0,r.jsx)(s.zx,{onClick:T,children:"→"})]})]})]}),(0,r.jsx)(eo.S,{region:"timeline",children:(0,r.jsx)(es.q,{loading:E,range:S,jobs:$})})]})},ey=t(46928),OverviewActivityRoot=function(){(0,P.j)("Overview | Activity");var e=l.useCallback(function(e){var n=e.refreshState;return(0,r.jsx)(OverviewPageHeader,{tab:"activity",refreshState:n})},[]),n=(0,i._)((0,ea.U)("overview-activity-tab",function(e){return["timeline","assets"].includes(e)?e:"timeline"}),2),t=n[0],c=n[1],u=l.useContext(Y.G).enableAssetHealthOverviewPreview,d=u?"timeline":t,h=l.useCallback(function(e){var n=e.selected;return u?null:(d!==n&&c(n),(0,r.jsxs)(s.zH,{children:[(0,r.jsx)(ey.Q1,{$active:"timeline"===n,to:"/overview/activity/timeline",children:"Timeline"}),(0,r.jsx)(ey.Q1,{$active:"assets"===n,to:"/overview/activity/assets",children:"Assets"})]}))},[d,c,u]);return(0,r.jsx)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:(0,r.jsxs)(o.rs,{children:[!u&&(0,r.jsx)(o.AW,{path:"/overview/activity/assets",children:(0,r.jsx)(OverviewAssetsRoot,{Header:e,TabButton:h})}),(0,r.jsx)(o.AW,{path:"/overview/activity/timeline",children:(0,r.jsx)(OverviewTimelineRoot,{Header:e,TabButton:h})}),(0,r.jsx)(o.AW,{path:"*",render:l.useCallback(function(){return"timeline"===d?(0,r.jsx)(o.l_,{to:"/overview/activity/timeline"}):(0,r.jsx)(o.l_,{to:"/overview/activity/assets"})},[d])})]})})},ew=t(9445),OverviewJobsRoot=function(){return(0,R.Px)(),(0,P.j)("Overview | Jobs"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(G.m,{title:(0,r.jsx)(w.X6,{children:"Overview"}),tabs:(0,r.jsx)(OverviewTabs,{tab:"jobs"})}),(0,r.jsx)(ew.e,{})]})},eb=t(92364),eO=t(43180),e_=t(68884),eC=t(98319),ek=t(77277),eR=t(42885),eT=t(41256),OverviewResourcesTable=function(e){var n=e.repos,t=(0,l.useRef)(null),o=(0,l.useMemo)(function(){return n.map(function(e){var n=e.repoAddress;return(0,em.Uz)(n)})},[n]),i=(0,eR.N)(e_.y,o),s=i.expandedKeys,a=i.onToggle,u=i.onToggleAll,d=(0,l.useMemo)(function(){var e=[];return n.forEach(function(n){var t=n.repoAddress,r=n.resources;e.push({type:"header",repoAddress:t,resourceCount:r.length});var o=(0,em.Uz)(t);s.includes(o)&&r.forEach(function(n){e.push((0,c._)({type:"resource",repoAddress:t},n))})}),e},[n,s]),h=(0,ek.w)(n.map(function(e){return e.repoAddress.name})),v=(0,b.MG)({count:d.length,getScrollElement:function(){return t.current},estimateSize:function(e){var n=d[e];return(null==n?void 0:n.type)==="header"?32:64},overscan:10}),f=v.getTotalSize(),x=v.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(W.W2,{ref:t,children:[(0,r.jsx)(eC.f,{}),(0,r.jsx)(W.Nh,{$totalHeight:f,children:x.map(function(e){var n=e.index,t=e.key,o=e.size,i=e.start,l=d[n];return"header"===l.type?(0,r.jsx)(eT.vG,{repoAddress:l.repoAddress,height:o,start:i,onToggle:a,onToggleAll:u,expanded:s.includes((0,em.Uz)(l.repoAddress)),showLocation:h.has(l.repoAddress.name),rightElement:(0,r.jsx)(eO.u,{content:1===l.resourceCount?"1 resource":"".concat(l.resourceCount," resources"),placement:"top",children:(0,r.jsx)(m.V,{children:l.resourceCount})})},t):(0,r.jsx)(eC.K,(0,c._)({height:o,start:i},l),t)})})]})})},eA=t(44392),eS=t(89191),eN=t(91195),eL=t(76588),eE=t(58298);function OverviewResourcesRoot_templateObject(){var e=(0,d._)(["\n  query OverviewResourcesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        id\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                allTopLevelResourceDetails {\n                  id\n                  ...ResourceEntryFragment\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return OverviewResourcesRoot_templateObject=function(){return e},e}var OverviewResourcesRoot=function(){(0,R.Px)(),(0,P.j)("Overview | Resources");var e=(0,l.useContext)(eg.C5),n=e.allRepos,t=e.visibleRepos,o=e.loading,s=(0,i._)((0,z.q)({queryKey:"search",defaults:{search:""}}),2),c=s[0],u=s[1],d=n.length,f=(0,eu.a)(eI,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),x=f.data,p=f.loading,m=(0,k.C4)(f,k.dT),g=(0,l.useMemo)(function(){var e=(0,eS.S)(t);return buildBuckets(x).filter(function(n){var t=n.repoAddress;return e.has((0,em.Uz)(t))})},[x,t]),y=c.trim().toLocaleLowerCase(),w=y.length>0,b=(0,l.useMemo)(function(){var e=y.toLocaleLowerCase();return g.map(function(n){return{repoAddress:n.repoAddress,resources:n.resources.filter(function(n){return n.name.toLocaleLowerCase().includes(e)})}}).filter(function(e){return e.resources.length>0})},[g,y]),O=o&&!d||p&&!x;return(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"resources",refreshState:m}),(0,r.jsxs)(a.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[d>1?(0,r.jsx)(ei.C,{}):null,(0,r.jsx)(v.oi,{icon:"search",value:c,rightElement:O?(0,r.jsx)(eE.W,{tooltipContent:"Loading resources…"}):void 0,onChange:function(e){return u(e.target.value)},placeholder:"Filter by resource name…",style:{width:"340px"}})]}),p&&!d?(0,r.jsx)(a.x,{padding:64,children:(0,r.jsx)(h.$,{purpose:"page"})}):function(){if(p&&!x)return(0,r.jsx)(a.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(a.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(h.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:j.$()},children:"Loading resources…"})]})});var e=n.length>t.length;return b.length?(0,r.jsx)(OverviewResourcesTable,{repos:b}):w?(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eb.t,{icon:"search",title:"No matching resources",description:e?(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in the selected code locations"]}):(0,r.jsxs)("div",{children:["No resources matching ",(0,r.jsx)("strong",{children:c})," were found in your definitions"]})})}):(0,r.jsx)(a.x,{padding:{top:20},children:(0,r.jsx)(eb.t,{icon:"search",title:"No resources",description:e?"No resources were found in the selected code locations":"No resources were found in your definitions"})})}()]})},buildBuckets=function(e){if((null==e?void 0:e.workspaceOrError.__typename)!=="Workspace")return[];var n=e.workspaceOrError.locationEntries.map(function(e){return e.locationOrLoadError}),t=[],r=!0,o=!1,i=void 0;try{for(var s,a=n[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;if((null==l?void 0:l.__typename)==="RepositoryLocation"){var c=!0,u=!1,d=void 0;try{for(var h,v=l.repositories[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var f=h.value,x=f.name,p=f.allTopLevelResourceDetails,m=(0,J.kQ)(x,l.name);p.length>0&&t.push({repoAddress:m,resources:p})}}catch(e){u=!0,d=e}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return(0,eA.S)(t)},eI=(0,ed.Ps)(OverviewResourcesRoot_templateObject(),eN.B,eL.L),eP=t(71569),OverviewSchedulesRoot=function(){return(0,R.Px)(),(0,P.j)("Overview | Schedules"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"schedules"}),(0,r.jsx)(eP.z,{})]})},ez=t(57070),OverviewSensorsRoot=function(){return(0,R.Px)(),(0,P.j)("Overview | Sensors"),(0,r.jsxs)(a.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(OverviewPageHeader,{tab:"sensors"}),(0,r.jsx)(ez.n,{})]})},eF=t(28888),eM=t(81967),eW=t(46032),AutomaterializationRoot=function(){var e=(0,ee.I)();switch(e){case"unknown":return(0,r.jsx)("div",{});case"has-global-amp":return(0,r.jsx)(GlobalAutomaterializationRoot,{});case"has-sensor-amp":return(0,r.jsx)(o.l_,{to:"/overview/sensors"});default:(0,eW.UT)(e)}},GlobalAutomaterializationRoot=function(){return(0,R.Px)(),(0,P.j)("Overview | Auto-materialize"),(0,r.jsxs)(eF.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"amp"}),(0,r.jsx)(eM.$,{})]})},eJ=t(95881),InstanceBackfillsRoot=function(){return(0,R.Px)(),(0,P.j)("Overview | Backfills"),(0,r.jsxs)(eF.T,{children:[(0,r.jsx)(OverviewPageHeader,{tab:"backfills"}),(0,r.jsx)(eJ.A,{})]})},e$=t(42006),OverviewRoot=function(){var e=(0,X.gV)().flagSettingsPage;return(0,r.jsxs)(o.rs,{children:[(0,r.jsx)(o.AW,{path:"/overview/activity",children:(0,r.jsx)(OverviewActivityRoot,{})}),(0,r.jsx)(o.AW,{path:"/overview/jobs",render:function(){return e?(0,r.jsx)(o.l_,{to:"/jobs"}):(0,r.jsx)(OverviewJobsRoot,{})}}),(0,r.jsx)(o.AW,{path:"/overview/schedules",render:function(){return e?(0,r.jsx)(o.l_,{to:"/automation/schedules"}):(0,r.jsx)(OverviewSchedulesRoot,{})}}),(0,r.jsx)(o.AW,{path:"/overview/sensors",render:function(){return e?(0,r.jsx)(o.l_,{to:"/automation/sensors"}):(0,r.jsx)(OverviewSensorsRoot,{})}}),(0,r.jsx)(o.AW,{path:"/overview/automation",render:function(){return e?(0,r.jsx)(o.l_,{to:"/automation"}):(0,r.jsx)(AutomaterializationRoot,{})}}),(0,r.jsx)(o.AW,{path:"/overview/backfills/:backfillId",render:function(n){var t=n.match;return e?(0,r.jsx)(o.l_,{to:"/automation/backfills/".concat(t.params.backfillId)}):(0,r.jsx)(e$.t4,{})}}),(0,r.jsx)(o.AW,{path:"/overview/backfills",exact:!0,render:function(){return e?(0,r.jsx)(o.l_,{to:"/automation/backfills"}):(0,r.jsx)(InstanceBackfillsRoot,{})}}),(0,r.jsx)(o.AW,{path:"/overview/resources",children:(0,r.jsx)(OverviewResourcesRoot,{})}),(0,r.jsx)(o.AW,{path:"*",render:function(){return(0,r.jsx)(o.l_,{to:"/overview/activity"})}})]})},eB=OverviewRoot}}]);
//# sourceMappingURL=1795.d525efa3b639fb80.js.map