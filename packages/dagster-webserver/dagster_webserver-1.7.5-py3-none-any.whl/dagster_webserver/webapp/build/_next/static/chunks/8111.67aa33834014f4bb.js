"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8111],{78945:function(n,t,e){e.d(t,{_:function(){return useCanSeeConfig}});var i=e(73235),r=e(40794),s=e(89130);function _templateObject(){var n=(0,i._)(["\n  query InstanceConfigHasInfo {\n    instance {\n      id\n      hasInfo\n    }\n  }\n"]);return _templateObject=function(){return n},n}var useCanSeeConfig=function(){var n=(0,r.a)(o).data;return!!(null==n?void 0:n.instance.hasInfo)},o=(0,s.Ps)(_templateObject())},91230:function(n,t,e){e.d(t,{Jd:function(){return TargetedRunList},dY:function(){return j},i0:function(){return RunList}});var i=e(73235),r=e(52322),s=e(40794),o=e(89130),a=e(18399),l=e(63832),c=e(92364),d=e(59692),u=e(25195),g=e(81308),m=e(43180),p=e(67486),h=e(91195),x=e(61608);function _templateObject(){var n=(0,i._)(["\n  fragment TickTagFragment on InstigationTick {\n    id\n    status\n    timestamp\n    skipReason\n    runIds\n    runKeys\n    error {\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,i._)(["\n  query LaunchedRunListQuery($filter: RunsFilter!) {\n    pipelineRunsOrError(filter: $filter, limit: 500) {\n      ... on PipelineRuns {\n        results {\n          ...RunTableRunFragment\n          id\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject1=function(){return n},n}var RunList=function(n){var t=n.runIds,e=(0,s.a)(v,{variables:{filter:{runIds:t}}}),i=e.data;return e.loading||!i?(0,r.jsx)(a.x,{padding:32,children:(0,r.jsx)(l.$,{purpose:"section"})}):"Runs"!==i.pipelineRunsOrError.__typename?(0,r.jsx)(a.x,{padding:32,children:(0,r.jsx)(c.t,{icon:"error",title:"An error occurred",description:i.pipelineRunsOrError.message})}):(0,r.jsx)(a.x,{padding:{bottom:8},children:(0,r.jsx)(x.AL,{runs:i.pipelineRunsOrError.results})})},TargetedRunList=function(n){var t=n.originRunIds;return t&&t.length?(0,r.jsxs)(d.Z,{direction:"column",spacing:16,children:[(0,r.jsxs)(a.x,{padding:12,border:{side:"bottom",color:u.Aw()},children:[(0,r.jsxs)(g.uT,{children:["Targeted Runs",(0,r.jsx)(m.u,{content:"Runs this tick reacted on and reported back to.",children:(0,r.jsx)(p.JO,{name:"info",color:u.$()})})]}),(0,r.jsx)(RunList,{runIds:t})]}),(0,r.jsxs)(a.x,{padding:12,margin:{bottom:8},children:[(0,r.jsxs)(g.uT,{children:["Requested Runs",(0,r.jsx)(m.u,{content:"Runs launched by the run requests in this tick.",children:(0,r.jsx)(p.JO,{name:"info",color:u.$()})})]}),(0,r.jsx)(c.t,{icon:"sensors",title:"No runs to display",description:"This sensor does not target a pipeline or job."})]})]}):null},j=(0,o.Ps)(_templateObject(),h.B),v=(0,o.Ps)(_templateObject1(),x.ZZ,h.B)},49280:function(n,t,e){e.d(t,{Jy:function(){return j},RX:function(){return RunStatusLink},S9:function(){return h},ai:function(){return x},vw:function(){return f}});var i=e(73235),r=e(52322),s=e(89130),o=e(59692),a=e(81308),l=e(25195),c=e(47933),d=e(35505),u=e(91230),g=e(91195);e(17212);var m=e(21485),p=e(38917);function _templateObject(){var n=(0,i._)(["\n  fragment RunStatusFragment on Run {\n    id\n    status\n  }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){var n=(0,i._)(["\n  fragment InstigationStateFragment on InstigationState {\n    id\n    selectorId\n    name\n    instigationType\n    status\n    hasStartPermission\n    hasStopPermission\n    repositoryName\n    repositoryLocationName\n    typeSpecificData {\n      ... on SensorData {\n        lastRunKey\n        lastCursor\n      }\n      ... on ScheduleData {\n        cronSchedule\n      }\n    }\n    runs(limit: 1) {\n      id\n      ...RunStatusFragment\n      ...RunTimeFragment\n    }\n    status\n    ticks(limit: 1) {\n      id\n      cursor\n      ...TickTagFragment\n    }\n    runningCount\n  }\n\n  ","\n  ","\n  ","\n"]);return _templateObject1=function(){return n},n}function _templateObject2(){var n=(0,i._)(["\n  font-size: 13px;\n  border-spacing: 0;\n\n  &&&&& tr {\n    box-shadow: none;\n  }\n\n  &&&&& tbody > tr > td {\n    background: transparent;\n    box-shadow: none !important;\n    padding: 1px 0;\n  }\n\n  &&&&& tbody > tr > td:first-child {\n    color: ",";\n  }\n"]);return _templateObject2=function(){return n},n}function _templateObject3(){var n=(0,i._)(["\n  fragment DynamicPartitionsRequestResultFragment on DynamicPartitionsRequestResult {\n    partitionsDefName\n    partitionKeys\n    skippedPartitionKeys\n    type\n  }\n"]);return _templateObject3=function(){return n},n}function _templateObject4(){var n=(0,i._)(["\n  fragment HistoryTick on InstigationTick {\n    id\n    tickId\n    status\n    timestamp\n    endTimestamp\n    cursor\n    instigationType\n    skipReason\n    runIds\n    runs {\n      id\n      status\n      ...RunStatusFragment\n    }\n    originRunIds\n    error {\n      ...PythonErrorFragment\n    }\n    logKey\n    ...TickTagFragment\n    dynamicPartitionsRequestResults {\n      ...DynamicPartitionsRequestResultFragment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return _templateObject4=function(){return n},n}var RunStatusLink=function(n){var t=n.run;return(0,r.jsxs)(o.Z,{direction:"row",spacing:4,alignItems:"center",children:[(0,r.jsx)(m.K9,{status:t.status}),(0,r.jsx)(c.rU,{to:"/runs/".concat(t.id),target:"_blank",rel:"noreferrer",children:(0,r.jsx)(a.fv,{children:(0,p.EI)({id:t.id})})})]})},h=(0,s.Ps)(_templateObject()),x=(0,s.Ps)(_templateObject1(),h,p.$X,u.dY),j=d.ZP.table.withConfig({componentId:"sc-301b4ed0-0"})(_templateObject2(),l.$()),v=(0,s.Ps)(_templateObject3()),f=(0,s.Ps)(_templateObject4(),h,g.B,u.dY,v)},32911:function(n,t,e){e.d(t,{X:function(){return TickDetailsDialog},c:function(){return TickDetailSummary}});var i=e(58467),r=e(73235),s=e(52322),o=e(40794),a=e(89130);e(33521);var l=e(10952),c=e(9001),d=e(18399),u=e(63832),g=e(56024),m=e(81308),p=e(57830),h=e(12084),x=e(54266),j=e(16861),v=e(2784),f=e(91230),y=e(49280),T=e(66904),b=e(91195),k=e(56266),S=e(46032),I=e(58701),_=e(61935),R=e(30301),O=e(22665);function _templateObject(){var n=(0,r._)(["\n  query SelectedTickQuery($instigationSelector: InstigationSelector!, $tickId: Int!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        tick(tickId: $tickId) {\n          id\n          ...HistoryTick\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return _templateObject=function(){return n},n}var TickDetailsDialog=function(n){var t=n.tickId,e=n.isOpen,i=n.instigationSelector,r=n.onClose;return(0,s.jsxs)(l.Vq,{isOpen:e,onClose:r,style:{width:"80vw",maxWidth:"1200px",minWidth:"600px"},children:[(0,s.jsx)(TickDetailsDialogImpl,{tickId:t,instigationSelector:i}),(0,s.jsx)("div",{style:{zIndex:1},children:(0,s.jsx)(l.cN,{topBorder:!0,children:(0,s.jsx)(c.zx,{onClick:r,children:"Close"})})})]})},TickDetailsDialogImpl=function(n){var t=n.tickId,e=n.instigationSelector,r=(0,i._)((0,v.useState)("result"),2),a=r[0],c=r[1],p=(0,o.a)(E,{variables:{instigationSelector:e,tickId:t||0},skip:!t}).data,h=(null==p?void 0:p.instigationStateOrError.__typename)==="InstigationState"?null==p?void 0:p.instigationStateOrError.tick:void 0,x=(0,i._)((0,v.useMemo)(function(){return[null==h?void 0:h.dynamicPartitionsRequestResults.filter(function(n){var t;return n.type===_.Dq2.ADD_PARTITIONS&&(null===(t=n.partitionKeys)||void 0===t?void 0:t.length)}),null==h?void 0:h.dynamicPartitionsRequestResults.filter(function(n){var t;return n.type===_.Dq2.DELETE_PARTITIONS&&(null===(t=n.partitionKeys)||void 0===t?void 0:t.length)})]},[null==h?void 0:h.dynamicPartitionsRequestResults]),2),j=x[0],y=x[1];return h?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.fK,{label:(0,s.jsx)(R.v,{timestamp:h.timestamp,timeFormat:{showTimezone:!1,showSeconds:!0}})}),(0,s.jsx)(d.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(TickDetailSummary,{tick:h})}),(0,s.jsx)(d.x,{padding:{horizontal:24},border:"bottom",children:(0,s.jsxs)(g.mQ,{selectedTabId:a,onChange:c,children:[(0,s.jsx)(g.OK,{id:"result",title:"Result"}),(0,s.jsx)(g.OK,{id:"logs",title:"Logs"})]})}),"result"===a?(0,s.jsxs)("div",{style:{height:"500px",overflowY:"auto"},children:[h.runIds.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(m.Tj,{children:"Requested Runs"})}),(0,s.jsx)(f.i0,{runIds:h.runIds})]}):h.originRunIds.length?(0,s.jsx)(f.Jd,{originRunIds:h.originRunIds}):null,(null==j?void 0:j.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(m.Tj,{children:"Added partitions"})}),(0,s.jsx)(PartitionsTable,{partitions:j})]}):null,(null==y?void 0:y.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,s.jsx)(m.Tj,{children:"Deleted partitions"})}),(0,s.jsx)(PartitionsTable,{partitions:y})]}):null,h.error?(0,s.jsx)(d.x,{padding:24,children:(0,s.jsx)(k.T9,{error:h.error})}):null,h.skipReason?(0,s.jsxs)(d.x,{padding:24,children:[(0,s.jsx)("strong",{children:"Skip reason:"})," ",h.skipReason]}):null]}):null,"logs"===a?(0,s.jsx)(O.x,{instigationSelector:e,tick:h}):null]}):(0,s.jsx)(d.x,{style:{padding:32},flex:{alignItems:"center",justifyContent:"center"},children:(0,s.jsx)(u.$,{purpose:"section"})})};function TickDetailSummary(n){var t,e=n.tick,i=(0,v.useMemo)(function(){switch(null==e?void 0:e.status){case _.izS.FAILURE:return"danger";case _.izS.STARTED:return"primary";case _.izS.SUCCESS:return"success"}},[e]),r="requestedAssetMaterializationCount"in e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:12},children:[(0,s.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(m.Tj,{children:"Status"}),(0,s.jsxs)(d.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,s.jsx)(p.V,{intent:i,children:e.status===_.izS.STARTED?"Evaluating…":(0,s.jsxs)(s.Fragment,{children:[null!==(t=r?e.requestedAssetMaterializationCount:e.runIds.length)&&void 0!==t?t:0," ","requested"]})}),e.error?(0,s.jsx)(h.Z,{onClick:function(){(0,T._K)({title:"Tick error",body:(0,s.jsx)(k.T9,{error:e.error})})},children:"View error"}):null]})]}),(0,s.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(m.Tj,{children:"Timestamp"}),(0,s.jsx)("div",{children:e?(0,s.jsx)(I.E,{timestamp:{unix:e.timestamp},timeFormat:{showTimezone:!0}}):"–"})]}),(0,s.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(m.Tj,{children:"Duration"}),(0,s.jsx)("div",{children:(null==e?void 0:e.endTimestamp)?(0,S.R4)(1e3*e.endTimestamp-1e3*e.timestamp):"–"})]})]})})}function PartitionsTable(n){var t=n.partitions;return(0,s.jsxs)(x.i,{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Partition definition"}),(0,s.jsx)("th",{children:"Partition"})]})}),(0,s.jsx)("tbody",{children:t.flatMap(function(n){var t;return null===(t=n.partitionKeys)||void 0===t?void 0:t.map(function(t){return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)(j.g,{text:n.partitionsDefName})}),(0,s.jsx)("td",{children:(0,s.jsx)(j.g,{text:t})})]},t)})})})]})}var E=(0,a.Ps)(_templateObject(),b.B,y.vw)},22665:function(n,t,e){e.d(t,{l:function(){return TickLogDialog},x:function(){return QueryfulTickLogsTable}});var i=e(85333),r=e(6692),s=e(73235),o=e(52322),a=e(40794),l=e(89130),c=e(10952),d=e(18399),u=e(25195),g=e(9001),m=e(92364),p=e(67486),h=e(2784),x=e(25774),j=e(34793),v=e(30301);function _templateObject(){var n=(0,s._)(["\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: Int!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...TickLogEvent\n            }\n          }\n        }\n      }\n    }\n  }\n\n  fragment TickLogEvent on InstigationEvent {\n    message\n    timestamp\n    level\n  }\n"]);return _templateObject=function(){return n},n}var TickLogDialog=function(n){var t=n.tick,e=n.instigationSelector,i=n.onClose,r=(0,a.a)(f,{variables:{instigationSelector:e,tickId:Number(t.tickId)},notifyOnNetworkStatusChange:!0}).data,s=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"&&(null==r?void 0:r.instigationStateOrError.tick)?null==r?void 0:r.instigationStateOrError.tick.logEvents.events:void 0;return(0,o.jsxs)(c.Vq,{isOpen:!!s,onClose:i,style:{width:"70vw",display:"flex"},title:t?(0,o.jsx)(v.v,{timestamp:t.timestamp}):null,children:[(0,o.jsx)(c.a7,{children:s&&s.length?(0,o.jsx)(TickLogsTable,{events:s}):(0,o.jsx)(d.x,{flex:{justifyContent:"center",alignItems:"center"},style:{flex:1,color:u.$()},children:"No logs available"})}),(0,o.jsx)(c.cN,{children:(0,o.jsx)(g.zx,{intent:"primary",onClick:i,children:"OK"})})]})},QueryfulTickLogsTable=function(n){var t=n.instigationSelector,e=n.tick,i=(0,a.a)(f,{variables:{instigationSelector:t,tickId:Number(e.tickId)}}),r=i.data,s=i.loading,l=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"&&(null==r?void 0:r.instigationStateOrError.tick)?null==r?void 0:r.instigationStateOrError.tick.logEvents.events:void 0;if(l&&l.length)return(0,o.jsx)(TickLogsTable,{events:l});var c=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"?null==r?void 0:r.instigationStateOrError.tick.status:void 0,u=(null==r?void 0:r.instigationStateOrError.__typename)==="InstigationState"?null==r?void 0:r.instigationStateOrError.instigationType:void 0,h="SENSOR"===u?"https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors":"SCHEDULE"===u?"https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules":void 0;return(0,o.jsx)(d.x,{style:{height:500},flex:{justifyContent:"center",alignItems:"center"},padding:{vertical:48},children:s?"Loading logs…":(0,o.jsx)(m.t,{icon:"no-results",title:"No logs to display",description:(0,o.jsxs)(d.x,{flex:{direction:"column",gap:12},children:[(0,o.jsx)("div",{children:"Your evaluation did not emit any logs. To learn how to emit logs in your evaluation, visit the documentation for more information."}),"FAILURE"===c&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{children:"For failed evaluations, logs will only be displayed if your Dagster and Dagster Cloud agent versions 1.5.14 or higher."}),(0,o.jsx)("div",{children:"Upgrade your Dagster versions to view logs for failed evaluations."})]})]}),action:h&&(0,o.jsx)(g.fr,{href:h,rightIcon:(0,o.jsx)(p.JO,{name:"open_in_new"}),children:"View documentation"})})})},TickLogsTable=function(n){var t=n.events;return(0,o.jsx)(j.bu,{onWidthsChanged:function(){},children:(0,o.jsxs)("div",{style:{height:500,position:"relative",zIndex:0},children:[(0,o.jsx)(Headers,{}),(0,o.jsx)("div",{style:{height:468,overflowY:"auto"},children:t.map(function(n,t){return(0,o.jsx)(TickLogRow,{event:n},t)})})]})})},Headers=function(){var n=(0,h.useContext)(j.D7);return(0,o.jsxs)(j.Cr,{children:[(0,o.jsx)(j.h4,{width:n.eventType,onResize:function(t){return n.onChange((0,r._)((0,i._)({},n),{eventType:t}))},children:"Event Type"}),(0,o.jsx)(j.gM,{style:{flex:1},children:"Info"}),(0,o.jsx)(j.h4,{handleSide:"left",width:n.timestamp,onResize:function(t){return n.onChange((0,r._)((0,i._)({},n),{timestamp:t}))},children:"Timestamp"})]})},TickLogRow=function(n){var t=n.event;return(0,o.jsxs)(x.X2,{level:t.level,highlighted:!1,style:{height:"auto"},children:[(0,o.jsx)(x.qH,{children:(0,o.jsx)("span",{style:{marginLeft:8},children:t.level})}),(0,o.jsx)(d.x,{padding:{horizontal:12},style:{flex:1},children:t.message}),(0,o.jsx)(x.pq,{time:t.timestamp})]})},f=(0,l.Ps)(_templateObject())}}]);
//# sourceMappingURL=8111.67aa33834014f4bb.js.map