import{m as e,r as s,R as t,n as a,j as o,o as n,f as i,p as r,q as l,v as d,w as c,D as m,x,B as h,y as b,z as p,E as j,F as u,t as y,G as f,H as k,I as g}from"./index-BBaWpi9t.js";import{u as w,A as v,a as N,C}from"./useMarimoWebSocket-PdcHg9GG.js";const I=({appConfig:r})=>{const{setCells:l}=e();s.useEffect((()=>(t.INSTANCE.start(),()=>{t.INSTANCE.stop()})),[]);const{connection:d}=w({autoInstantiate:!0,setCells:l,sessionId:i()}),c=a(n);return o.jsxs(v,{connectionState:d.state,isRunning:c,width:r.width,children:[o.jsx(N,{connection:d,className:"sm:pt-8"}),o.jsx(C,{appConfig:r,mode:"read"})]})},T=()=>{if(!r())return null;const e=l();return e?o.jsxs("div",{className:"px-4 py-2 bg-[var(--sky-2)] border-b border-[var(--sky-7)] text-md text-[var(--sky-11)] font-semibold flex justify-between items-center gap-4",children:[o.jsxs("span",{children:["This is a static Python notebook built using"," ",o.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"underline",children:"marimo"}),".",o.jsx("br",{}),"Some interactive features may not work, see ways to run or edit this."]}),o.jsx("span",{className:"flex-shrink-0",children:o.jsx(A,{code:e})})]}):null},A=({code:e})=>{let s=d()||"notebook.py";const t=s.lastIndexOf("/");-1!==t&&(s=s.slice(t+1));const a=window.location.href,n=c({code:e});return o.jsxs(m,{children:[o.jsx(x,{asChild:!0,children:o.jsx(h,{"data-testid":"static-notebook-dialog-trigger",variant:"secondary",children:"Run or edit this notebook"})}),o.jsxs(b,{children:[o.jsxs(p,{children:[o.jsx(j,{children:s}),o.jsxs(u,{className:"pt-4 text-md text-left",children:["This is a static notebook built using"," ",o.jsx("a",{href:"https://github.com/marimo-team/marimo",target:"_blank",className:"text-link hover:underline",children:"marimo"}),". marimo is an open-source next-generation Python notebook.",o.jsx("hr",{className:"my-3"}),"In order to edit this notebook, you will need to download the code locally, install marimo, and run the following in your terminal:",o.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)]",children:["pip install marimo",o.jsx("br",{}),"marimo edit ",s]}),!a.endsWith(".html")&&o.jsxs(o.Fragment,{children:["or",o.jsxs("div",{className:"font-mono text-sm bg-[var(--sky-2)] rounded-md my-3 p-2 border border-[var(--sky-7)] break-all",children:["marimo edit ",window.location.href]})]}),o.jsx("hr",{className:"my-3"}),"You may also be able to run this notebook entirely in the browser via WebAssembly at:"," ",o.jsxs("a",{href:n,target:"_blank",className:"text-link hover:underline",children:[n.slice(0,40),"..."]}),o.jsx("br",{}),o.jsxs("div",{className:"text-sm text-muted-foreground pt-2",children:[o.jsx("strong",{children:"Note:"})," This feature is experimental and may not work for all notebooks. Additionally, some dependencies may not be available in the browser."]})]})]}),o.jsxs("div",{className:"flex gap-4 flex-wrap",children:[o.jsxs(h,{"data-testid":"copy-static-notebook-dialog-button",variant:"secondary",onClick:()=>{window.navigator.clipboard.writeText(e),y({title:"Copied to clipboard"})},children:[o.jsx(f,{className:"w-4 h-4 mr-1"}),"Copy code"]}),o.jsxs(h,{"data-testid":"download-static-notebook-dialog-button",variant:"secondary",onClick:()=>{k(new Blob([e],{type:"text/plain"}),s)},children:[o.jsx(g,{className:"w-4 h-4 mr-1"}),"Download code"]})]})]})]})},S=e=>o.jsxs(o.Fragment,{children:[o.jsx(T,{}),o.jsx(I,{appConfig:e.appConfig})]});export{S as default};
