import{hw as e,hD as t,hE as r,hu as s,hF as n,ht as i,g4 as o,gf as a,hG as u,hs as h,fZ as c,g9 as d,ge as f,f$ as l,gb as _,hH as b,hI as g,hq as p,hJ as v,hK as j,gd as m}from"./index-BBaWpi9t.js";import{z as y,A as w,B as C,C as E,D as A,E as N,F as D,G as L,H as O,I as F}from"./mermaid-B61QcULm.js";import{b as M,a as x,h as I,c as P}from"./_baseEach-D5U5K6JU.js";import{e as S,b as U,f as G}from"./transform-DWY0-w3O.js";function B(e,t){for(var r=-1,s=null==e?0:e.length;++r<s&&!1!==t(e[r],r,e););return e}var k=Object.getOwnPropertySymbols?function(e){for(var r=[];e;)s(r,t(e)),e=C(e);return r}:r;function z(e){return n(e,w,k)}var H=Object.prototype.hasOwnProperty;var R=/\w*$/;var V=i?i.prototype:void 0,$=V?V.valueOf:void 0;var q="[object Boolean]",J="[object Date]",K="[object Map]",W="[object Number]",Z="[object RegExp]",Q="[object Set]",T="[object String]",X="[object Symbol]",Y="[object ArrayBuffer]",ee="[object DataView]",te="[object Float32Array]",re="[object Float64Array]",se="[object Int8Array]",ne="[object Int16Array]",ie="[object Int32Array]",oe="[object Uint8Array]",ae="[object Uint8ClampedArray]",ue="[object Uint16Array]",he="[object Uint32Array]";function ce(e,t,r){var s,n,i,o=e.constructor;switch(t){case Y:return E(e);case q:case J:return new o(+e);case ee:return function(e,t){var r=t?E(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case te:case re:case se:case ne:case ie:case oe:case ae:case ue:case he:return A(e,r);case K:return new o;case W:case T:return new o(e);case Z:return(i=new(n=e).constructor(n.source,R.exec(n))).lastIndex=n.lastIndex,i;case Q:return new o;case X:return s=e,$?Object($.call(s)):{}}}var de=u&&u.isMap,fe=de?h(de):function(e){return o(e)&&"[object Map]"==a(e)};var le=u&&u.isSet,_e=le?h(le):function(e){return o(e)&&"[object Set]"==a(e)},be="[object Arguments]",ge="[object Function]",pe="[object Object]",ve={};function je(r,s,n,i,o,u){var h,g=1&s,p=2&s,v=4&s;if(n&&(h=o?n(r,i,o,u):n(r)),void 0!==h)return h;if(!c(r))return r;var j=_(r);if(j){if(h=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&H.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(r),!g)return N(r,h)}else{var m=a(r),C=m==ge||"[object GeneratorFunction]"==m;if(d(r))return D(r,g);if(m==pe||m==be||C&&!o){if(h=p||C?{}:L(r),!g)return p?function(e,t){return y(e,k(e),t)}(r,function(e,t){return e&&y(t,w(t),e)}(h,r)):function(e,r){return y(e,t(e),r)}(r,function(t,r){return t&&y(r,e(r),t)}(h,r))}else{if(!ve[m])return o?r:{};h=ce(r,m,g)}}u||(u=new f);var E=u.get(r);if(E)return E;u.set(r,h),_e(r)?r.forEach((function(e){h.add(je(e,s,n,e,r,u))})):fe(r)&&r.forEach((function(e,t){h.set(t,je(e,s,n,t,r,u))}));var A=j?void 0:(v?p?z:b:p?w:e)(r);return B(A||r,(function(e,t){A&&(e=r[t=e]),l(h,t,je(e,s,n,t,r,u))})),h}function me(e){return"function"==typeof e?e:S}function ye(e,t){return(_(e)?B:M)(e,me(t))}function we(e,t){var r=[];return M(e,(function(e,s,n){t(e,s,n)&&r.push(e)})),r}function Ce(e,t){return(_(e)?g:we)(e,x(t))}ve[be]=ve["[object Array]"]=ve["[object ArrayBuffer]"]=ve["[object DataView]"]=ve["[object Boolean]"]=ve["[object Date]"]=ve["[object Float32Array]"]=ve["[object Float64Array]"]=ve["[object Int8Array]"]=ve["[object Int16Array]"]=ve["[object Int32Array]"]=ve["[object Map]"]=ve["[object Number]"]=ve[pe]=ve["[object RegExp]"]=ve["[object Set]"]=ve["[object String]"]=ve["[object Symbol]"]=ve["[object Uint8Array]"]=ve["[object Uint8ClampedArray]"]=ve["[object Uint16Array]"]=ve["[object Uint32Array]"]=!0,ve["[object Error]"]=ve[ge]=ve["[object WeakMap]"]=!1;var Ee=Object.prototype.hasOwnProperty;function Ae(e,t){return null!=e&&Ee.call(e,t)}function Ne(e,t){return null!=e&&I(e,t,Ae)}function De(t){return null==t?[]:function(e,t){return p(t,(function(t){return e[t]}))}(t,e(t))}function Le(e){return void 0===e}function Oe(e,t,r,s,n){return n(e,(function(e,n,i){r=s?(s=!1,e):t(r,e,n,i)})),r}function Fe(e,t,r){var s=_(e)?v:Oe,n=arguments.length<3;return s(e,x(t),r,n,M)}var Me=U((function(e){return j(P(e,1,O,!0))})),xe="\0",Ie="\0",Pe="";class Se{constructor(e={}){this._isDirected=!Ne(e,"directed")||e.directed,this._isMultigraph=!!Ne(e,"multigraph")&&e.multigraph,this._isCompound=!!Ne(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=G(void 0),this._defaultEdgeLabelFn=G(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Ie]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return m(e)||(e=G(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return e(this._nodes)}sources(){var e=this;return Ce(this.nodes(),(function(t){return F(e._in[t])}))}sinks(){var e=this;return Ce(this.nodes(),(function(t){return F(e._out[t])}))}setNodes(e,t){var r=arguments,s=this;return ye(e,(function(e){r.length>1?s.setNode(e,t):s.setNode(e)})),this}setNode(e,t){return Ne(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=Ie,this._children[e]={},this._children[Ie][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Ne(this._nodes,e)}removeNode(t){var r=this;if(Ne(this._nodes,t)){var s=function(e){r.removeEdge(r._edgeObjs[e])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],ye(this.children(t),(function(e){r.setParent(e)})),delete this._children[t]),ye(e(this._in[t]),s),delete this._in[t],delete this._preds[t],ye(e(this._out[t]),s),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Le(t))t=Ie;else{for(var r=t+="";!Le(r);r=this.parent(r))if(r===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==Ie)return t}}children(t){if(Le(t)&&(t=Ie),this._isCompound){var r=this._children[t];if(r)return e(r)}else{if(t===Ie)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var r=this._preds[t];if(r)return e(r)}successors(t){var r=this._sucs[t];if(r)return e(r)}neighbors(e){var t=this.predecessors(e);if(t)return Me(t,this.successors(e))}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;ye(this._nodes,(function(r,s){e(s)&&t.setNode(s,r)})),ye(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))}));var s={};function n(e){var i=r.parent(e);return void 0===i||t.hasNode(i)?(s[e]=i,i):i in s?s[i]:n(i)}return this._isCompound&&ye(t.nodes(),(function(e){t.setParent(e,n(e))})),t}setDefaultEdgeLabel(e){return m(e)||(e=G(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return De(this._edgeObjs)}setPath(e,t){var r=this,s=arguments;return Fe(e,(function(e,n){return s.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n})),this}setEdge(){var e,t,r,s,n=!1,i=arguments[0];"object"==typeof i&&null!==i&&"v"in i?(e=i.v,t=i.w,r=i.name,2===arguments.length&&(s=arguments[1],n=!0)):(e=i,t=arguments[1],r=arguments[3],arguments.length>2&&(s=arguments[2],n=!0)),e=""+e,t=""+t,Le(r)||(r=""+r);var o=Be(this._isDirected,e,t,r);if(Ne(this._edgeLabels,o))return n&&(this._edgeLabels[o]=s),this;if(!Le(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[o]=n?s:this._defaultEdgeLabelFn(e,t,r);var a=function(e,t,r,s){var n=""+t,i=""+r;if(!e&&n>i){var o=n;n=i,i=o}var a={v:n,w:i};s&&(a.name=s);return a}(this._isDirected,e,t,r);return e=a.v,t=a.w,Object.freeze(a),this._edgeObjs[o]=a,Ue(this._preds[t],e),Ue(this._sucs[e],t),this._in[t][o]=a,this._out[e][o]=a,this._edgeCount++,this}edge(e,t,r){var s=1===arguments.length?ke(this._isDirected,arguments[0]):Be(this._isDirected,e,t,r);return this._edgeLabels[s]}hasEdge(e,t,r){var s=1===arguments.length?ke(this._isDirected,arguments[0]):Be(this._isDirected,e,t,r);return Ne(this._edgeLabels,s)}removeEdge(e,t,r){var s=1===arguments.length?ke(this._isDirected,arguments[0]):Be(this._isDirected,e,t,r),n=this._edgeObjs[s];return n&&(e=n.v,t=n.w,delete this._edgeLabels[s],delete this._edgeObjs[s],Ge(this._preds[t],e),Ge(this._sucs[e],t),delete this._in[t][s],delete this._out[e][s],this._edgeCount--),this}inEdges(e,t){var r=this._in[e];if(r){var s=De(r);return t?Ce(s,(function(e){return e.v===t})):s}}outEdges(e,t){var r=this._out[e];if(r){var s=De(r);return t?Ce(s,(function(e){return e.w===t})):s}}nodeEdges(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}}function Ue(e,t){e[t]?e[t]++:e[t]=1}function Ge(e,t){--e[t]||delete e[t]}function Be(e,t,r,s){var n=""+t,i=""+r;if(!e&&n>i){var o=n;n=i,i=o}return n+Pe+i+Pe+(Le(s)?xe:s)}function ke(e,t){return Be(e,t.v,t.w,t.name)}Se.prototype._nodeCount=0,Se.prototype._edgeCount=0;export{Se as G,Ce as a,je as b,me as c,ye as f,Ne as h,Le as i,Fe as r,De as v};
