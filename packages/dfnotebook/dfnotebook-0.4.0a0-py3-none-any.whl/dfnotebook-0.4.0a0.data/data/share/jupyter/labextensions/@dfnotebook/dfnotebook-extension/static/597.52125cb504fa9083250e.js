"use strict";(self.webpackChunk_dfnotebook_dfnotebook_extension=self.webpackChunk_dfnotebook_dfnotebook_extension||[]).push([[597],{88597:(t,e,o)=>{o.r(e),o.d(e,{DataflowAttachmentsCell:()=>m,DataflowCell:()=>c,DataflowCodeCell:()=>g,DataflowInputArea:()=>s,DataflowInputPrompt:()=>u,DataflowMarkdownCell:()=>p,DataflowRawCell:()=>h});var n=o(206);class s extends n.InputArea{constructor(t){super(t),this.prompt.model=this.model}get prompt(){return this._prompt}set prompt(t){t.model=this.model,this._prompt=t}addTag(t){var e;null===(e=this.model)||void 0===e||e.setMetadata("tag",t),this.prompt.updatePromptNode(this.prompt.executionCount)}}!function(t){class e extends n.InputArea.ContentFactory{createInputPrompt(){return new u}}t.ContentFactory=e}(s||(s={}));class u extends n.InputPrompt{constructor(t=null){super(),this.model=t}updatePromptNode(t){var e;(null===(e=this.model)||void 0===e?void 0:e.getMetadata("tag"))?this.node.textContent=`[${this.model.getMetadata("tag")}]:`:this.node.textContent=null===t?" ":`[${t||" "}]:`}get executionCount(){return super.executionCount}set executionCount(t){super.executionCount=t,this.updatePromptNode(t)}get model(){return this._model}set model(t){this._model=t,this._model&&this.updatePromptNode(this.executionCount)}}var a=o(9611);class r extends a.OutputArea{constructor(t,e){super({contentFactory:r.defaultContentFactory,...t}),this.onIOPub=t=>{const e=t.header.msg_type;let o;switch(e){case"execute_result":case"display_data":case"stream":case"error":if(o={...t.content,output_type:e},o.execution_count){const n=o.execution_count.toString(16).padStart(8,"0");if("stream"===e&&delete o.execution_count,n!==this.cellId){r.cellIdWidgetMap&&r.cellIdWidgetMap[n]._output._onIOPub(t);break}}this._onIOPub(t);break;default:this._onIOPub(t)}},this.cellId=e}get future(){return super.future}set future(t){super.future=t,super.future.onIOPub=this.onIOPub}createOutputItem(t){const e=super.createOutputItem(t);return e&&t.metadata.output_tag&&(e.widgets[0].outputTag=t.metadata.output_tag),e}}class i extends a.OutputPrompt{constructor(){super(...arguments),this._outputTag=""}updatePrompt(){if(this._outputTag)this.node.textContent=`${this._outputTag}:`;else if(null===this.executionCount)this.node.textContent="";else{const t=this.executionCount.toString(16).padStart(8,"0");this.node.textContent=`[${t}]:`}}get executionCount(){return super.executionCount}set executionCount(t){super.executionCount=t,this.updatePrompt()}get outputTag(){return this._outputTag}set outputTag(t){this._outputTag=t,this.updatePrompt()}}!function(t){t.execute=async function(e,o,n,s,u,a){var r;let i=!0;s&&Array.isArray(s.tags)&&-1!==s.tags.indexOf("raises-exception")&&(i=!1),void 0===u&&(u={});const d={code:e,stop_on_error:i,user_expressions:{__dfkernel_data__:u}},l=null===(r=n.session)||void 0===r?void 0:r.kernel;if(!l)throw new Error("Session has no kernel.");const c=l.requestExecute(d,!1,s);return o.future=c,t.cellIdWidgetMap=a,c.done};class e extends a.OutputArea.ContentFactory{createOutputPrompt(){return new i}}t.ContentFactory=e,t.defaultContentFactory=new e}(r||(r={}));var d=o(49471);function l(t){const e=t._inputWrapper,o=t.inputArea;let n=-1;if(o){const{id:t}=o;e.widgets.forEach(((e,o)=>{e.id===t&&(n=o)}))}const u=new s({model:t.model,contentFactory:t.contentFactory,editorOptions:{config:t.editorConfig}});u.addClass("jp-Cell-inputArea"),e.insertWidget(n,u),null==o||o.dispose(),t._input=u}class c extends n.Cell{initializeDOM(){super.initializeDOM(),l(this),this.addClass("df-cell")}}!function(t){class e extends n.Cell.ContentFactory{createInputPrompt(){return new u}createOutputPrompt(){return new i}}t.ContentFactory=e}(c||(c={}));class p extends n.MarkdownCell{initializeDOM(){super.initializeDOM(),l(this),this.addClass("df-cell")}}class h extends n.RawCell{initializeDOM(){super.initializeDOM(),l(this),this.addClass("df-cell")}}class m extends n.AttachmentsCell{initializeDOM(){super.initializeDOM(),l(this),this.addClass("df-cell")}}class g extends n.CodeCell{initializeDOM(){super.initializeDOM(),l(this),function(t){const e=t._outputWrapper,o=t.outputArea,{id:n}=o;let s=-1;e.widgets.forEach(((t,e)=>{t.id===n&&(s=e)}));const u=new r({model:t.model.outputs,rendermime:o.rendermime,contentFactory:t.contentFactory,maxNumberOutputs:o.maxNumberOutputs,translator:o._translator,promptOverlay:!0,inputHistoryScope:o._inputHistoryScope},t.model.id.replace(/-/g,"").substring(0,8));u.addClass("jp-Cell-outputArea"),o.toggleScrolling.disconnect((()=>{t.outputsScrolled=!t.outputsScrolled})),u.toggleScrolling.connect((()=>{t.outputsScrolled=!t.outputsScrolled})),o.outputLengthChanged.disconnect(t._outputLengthHandler,t),u.outputLengthChanged.connect(t._outputLengthHandler,t),e.insertWidget(s,u),o.dispose(),t._output=u}(this),this.setPromptToId(),this.addClass("df-cell")}setPromptToId(){this.setPrompt(`${this.model.id.replace(/-/g,"").substring(0,8)||""}`)}initializeState(){return super.initializeState(),this.setPromptToId(),this}onStateChanged(t,e){super.onStateChanged(t,e),"executionCount"===e.name&&this.setPromptToId()}}!function(t){t.execute=async function(t,e,o,n,s){var u;const a=t.model,i=a.sharedModel.getSource();if(!i.trim()||!(null===(u=e.session)||void 0===u?void 0:u.kernel))return void a.sharedModel.transact((()=>{a.clearExecution()}),!1);const l={cellId:a.sharedModel.getId()};o={...a.metadata,...o,...l};const{recordTiming:c}=o;let p;a.sharedModel.transact((()=>{a.clearExecution(),t.outputHidden=!1}),!1),t.setPrompt("*"),a.trusted=!0;try{const u=r.execute(i,t.outputArea,e,o,n,s);if(c){const e=t=>{let e;switch(t.header.msg_type){case"status":e=`status.${t.content.execution_state}`;break;case"execute_input":e="execute_input";break;default:return!0}const o=t.header.date||(new Date).toISOString(),n=Object.assign({},a.getMetadata("execution"));return n[`iopub.${e}`]=o,a.setMetadata("execution",n),!0};t.outputArea.future.registerMessageHook(e)}else a.deleteMetadata("execution");const l=t=>{if("execute_input"!==t.header.msg_type)return!0;{const e=t.content.execution_count;if(null!==e){const o=e.toString(16).padStart(8,"0");if(s){const e=s[o];e.model.sharedModel.setSource(t.content.code),e.outputArea.model.clear()}}}return!0};t.outputArea.future.registerMessageHook(l),p=t.outputArea.future;const h=await u;if(a.executionCount=h.content.execution_count,c){const t=Object.assign({},a.getMetadata("execution")),e=h.metadata.started;e&&(t["shell.execute_reply.started"]=e);const o=h.header.date;t["shell.execute_reply"]=o||(new Date).toISOString(),a.setMetadata("execution",t)}let m=h.content,g=m.nodes,_=m.links,x=m.cells,f=m.imm_downstream_deps,C=m.upstream_deps,w=m.internal_nodes,O=e.session.id;return d.m.graphs[O].updateCellContents(null==n?void 0:n.code_dict),d.m.graphs[O].updateGraph(x,g,_,f,`${t.model.id.substr(0,8)||""}`,C,w),d.m.updateDepViews(!1),m.update_downstreams&&d.m.graphs[O].updateDownLinks(m.update_downstreams),h}catch(e){throw p&&!t.isDisposed&&t.outputArea.future===p&&t.setPromptToId(),e}}}(g||(g={}))}}]);