"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[842],{4842:(e,r,a)=>{a.r(r),a.d(r,{default:()=>x});var t=a(5923),o=a(2350),n=a(3438),s=a(1527),i=a(8702),l=a(7861),c=a(8101),d=a(265),u=a(5256),p=a(7202),m=a(2206),b=a(7784);const y={id:"@jupyter/collaboration-extension:userMenu",description:"Provide connected user menu.",requires:[],provides:p.IUserMenu,activate:e=>{const{commands:r}=e,{user:a}=e.serviceManager;return new p.UserMenu({commands:r,user:a})}},w={id:"@jupyter/collaboration-extension:user-menu-bar",description:"Add user menu to the interface.",autoStart:!0,requires:[p.IUserMenu,t.IToolbarWidgetRegistry],activate:async(e,r,a)=>{const{user:t}=e.serviceManager,o=new u.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new p.RendererUserMenu(t)});o.id="jp-UserMenu",t.userChanged.connect((()=>o.update())),o.addMenu(r),a.addFactory("TopBar","user-menu",(()=>o))}},v={id:"@jupyter/collaboration-extension:rtcGlobalAwareness",description:"Add global awareness to share working document of users.",requires:[c.IStateDB],provides:p.IGlobalAwareness,activate:(e,r)=>{const{user:a}=e.serviceManager,t=new m.Doc,o=new b.ww(t),s=l.ServerConnection.makeSettings(),c=i.URLExt.join(s.wsUrl,"api/collaboration/room");return new n.WebSocketAwarenessProvider({url:c,roomID:"JupyterLab:globalAwareness",awareness:o,user:a}),r.changed.connect((async()=>{var e,a;const t=(null===(a=null===(e=(await r.toJSON())["layout-restorer:data"])||void 0===e?void 0:e.main)||void 0===a?void 0:a.current)||"";t.startsWith("editor")||t.startsWith("notebook")?o.setLocalStateField("current",t):o.setLocalStateField("current",null)})),o}},h={id:"@jupyter/collaboration-extension:rtcPanel",description:"Add side panel to display all currently connected users.",autoStart:!0,requires:[p.IGlobalAwareness],optional:[d.ITranslator],activate:(e,r,a)=>{const{user:t}=e.serviceManager,o=(null!=a?a:d.nullTranslator).load("jupyter_collaboration"),n=new s.SidePanel({alignment:"justify"});n.id="jp-collaboration-panel",n.title.icon=s.usersIcon,n.title.caption=o.__("Collaboration"),n.addClass("jp-RTCPanel"),e.shell.add(n,"left",{rank:300});const i=new p.UserInfoPanel(t);i.title.label=o.__("User info"),i.title.caption=o.__("User information"),n.addWidget(i);const l=new p.CollaboratorsPanel(t,r,(r=>{e.commands.execute("docmanager:open",{path:r})}));l.title.label=o.__("Online Collaborators"),n.addWidget(l)}},g={id:"@jupyter/collaboration-extension:userEditorCursors",description:"Add CodeMirror extension to display remote user cursors and selections.",autoStart:!0,requires:[o.IEditorExtensionRegistry],activate:(e,r)=>{r.addExtension({name:"remote-user-cursors",factory(e){const{awareness:r,ysource:a}=e.model.sharedModel;return o.EditorExtensionRegistry.createImmutableExtension((0,p.remoteUserCursors)({awareness:r,ytext:a}))}})}};var _;!function(e){e.share="collaboration:shared-link"}(_||(_={}));const x=[y,w,v,h,{id:"@jupyter/collaboration-extension:shared-link",autoStart:!0,optional:[t.ICommandPalette,d.ITranslator],activate:async(e,r,a)=>{const{commands:o}=e,n=(null!=a?a:d.nullTranslator).load("collaboration");o.addCommand(_.share,{label:n.__("Generate a Shared Link"),icon:s.shareIcon,execute:async()=>{const e=await(0,p.showSharedLinkDialog)({translator:a});e.button.accept&&e.value&&t.Clipboard.copyToSystem(e.value)}}),r&&r.addItem({command:_.share,category:n.__("Server")})}},g]}}]);